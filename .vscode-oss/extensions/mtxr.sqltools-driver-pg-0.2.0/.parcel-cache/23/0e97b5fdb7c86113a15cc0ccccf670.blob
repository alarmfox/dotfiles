var e=require("tty"),t=require("child_process"),r=require("os"),n=require("tls"),i=require("assert"),s=require("net"),o=require("dns"),a=require("url"),c=require("fs"),u=c,l=E(c),h=require("path"),d=require("string_decoder"),p=require("stream"),f=require("crypto"),m=f,g=E(f),v=require("util"),y=require("events");function E(e){return e&&e.__esModule?e.default:e}var _,R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},C=y.EventEmitter,T=v,w={};w={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var b,S=function(e,t){return new A(e,t).parse()};class A{constructor(e,t){this.source=e,this.transform=t||N,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(e){var t,r,n;for(this.consumeDimensions();!this.isEof();)if("{"!==(t=this.nextCharacter()).value||n){if("}"!==t.value||n)'"'!==t.value||t.escaped?","!==t.value||n?this.record(t.value):this.newEntry():(n&&this.newEntry(!0),n=!n);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new A(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}}function N(e){return e}var O;O={create:function(e,t){return{parse:function(){return S(e,t)}}}};var P,I=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,D=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,k=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,M=/^-?infinity$/;function x(e){return-(e-1)}function L(e){return e>=0&&e<100}P=function(e){if(M.test(e))return Number(e.replace("i","I"));var t=I.exec(e);if(!t)return function(e){var t=D.exec(e);if(!t)return;var r=parseInt(t[1],10);t[4]&&(r=x(r));var n=parseInt(t[2],10)-1,i=t[3],s=new Date(r,n,i);L(r)&&s.setFullYear(r);return s}(e)||null;var r=!!t[8],n=parseInt(t[1],10);r&&(n=x(n));var i,s=parseInt(t[2],10)-1,o=t[3],a=parseInt(t[4],10),c=parseInt(t[5],10),u=parseInt(t[6],10),l=t[7];l=l?Math.round(1e3*parseFloat(l)):0;var h=function(e){var t=k.exec(e.split(" ")[1]);if(!t)return;var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}(e);return null!=h?(i=new Date(Date.UTC(n,s,o,a,c,u,l)),L(n)&&i.setUTCFullYear(n),i.setTime(i.getTime()-h)):(i=new Date(n,s,o,a,c,u,l),L(n)&&i.setFullYear(n)),i};var q={},F={};F=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)j.call(r,n)&&(e[n]=r[n])}return e};var j=Object.prototype.hasOwnProperty;function B(e){if(!(this instanceof B))return new B(e);F(this,function(e){if(!e)return{};var t=V.exec(e),r="-"===t[8];return Object.keys(G).reduce((function(e,n){var i,s,o=t[G[n]];return o&&(o="milliseconds"===n?(s=(i=o)+"000000".slice(i.length),parseInt(s,10)/1e3):parseInt(o,10))?(r&&~Q.indexOf(n)&&(o*=-1),e[n]=o,e):e}),{})}(e))}q=B;var W=["seconds","minutes","hours","days","months","years"];B.prototype.toPostgres=function(){var e=W.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var U={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},$=["years","months","days"],H=["hours","minutes","seconds"];B.prototype.toISOString=B.prototype.toISO=function(){return"P"+$.map(e,this).join("")+"T"+H.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+U[e]}};var V=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),G={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Q=["hours","minutes","seconds","milliseconds"];var z;function K(e){return function(t){return null===t?t:e(t)}}function X(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function Y(e){return e?S(e,X):null}function J(e){return parseInt(e,10)}function Z(e){return e?S(e,K(J)):null}function ee(e){return e?S(e,K((function(e){return ce(e).trim()}))):null}z=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")};var te=function(e){return e?O.create(e,(function(e){return null!==e&&(e=le(e)),e})).parse():null},re=function(e){return e?O.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},ne=function(e){return e?O.create(e).parse():null},ie=function(e){return e?O.create(e,(function(e){return null!==e&&(e=P(e)),e})).parse():null},se=function(e){return e?O.create(e,(function(e){return null!==e&&(e=q(e)),e})).parse():null},oe=function(e){return e?S(e,K(z)):null},ae=function(e){return parseInt(e,10)},ce=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},ue=function(e){return e?S(e,K(JSON.parse)):null},le=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},he=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=le(t);return s.radius=parseFloat(r),s};b={init:function(e){e(20,ce),e(21,ae),e(23,ae),e(26,ae),e(700,parseFloat),e(701,parseFloat),e(16,X),e(1082,P),e(1114,P),e(1184,P),e(600,le),e(651,ne),e(718,he),e(1e3,Y),e(1001,oe),e(1005,Z),e(1007,Z),e(1028,Z),e(1016,ee),e(1017,te),e(1021,re),e(1022,re),e(1231,re),e(1014,ne),e(1015,ne),e(1008,ne),e(1009,ne),e(1040,ne),e(1041,ne),e(1115,ie),e(1182,ie),e(1185,ie),e(1186,q),e(1187,se),e(17,z),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,ue),e(3807,ue),e(3907,ne),e(2951,ne),e(791,ne),e(1183,ne),e(1270,ne)}};var de,pe;pe=function(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(0===r),r=1+~r>>>0,n="-");var i,s,o,a,c,u,l="";if(i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";if(l=a+o+l,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";if(l=a+o+l,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";return l=a+o+l,n+(o=""+(s=4294967296*(i=t%1e6)+r)%1e6)+l};var fe=function(e,t,r,n,i){n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a>>=r%8);var u=0;r%8+t>=8&&(u=i(0,o(e[s])&a,c));for(var l=t+r>>3,h=s+1;h<l;h++)u=i(u,o(e[h]),8);var d=(t+r)%8;return d>0&&(u=i(u,o(e[l])>>8-d,d)),u},me=function(e,t,r){var n=Math.pow(2,r-1)-1,i=fe(e,1),s=fe(e,r,1);if(0===s)return 0;var o=1,a=fe(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)o/=2,(t&1<<r-n)>0&&(e+=o);return e}));return s==Math.pow(2,r+1)-1?0===a?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,s-n)*a},ge=function(e){return 1==fe(e,1)?-1*(fe(e,15,1,!0)+1):fe(e,15,1)},ve=function(e){return 1==fe(e,1)?-1*(fe(e,31,1,!0)+1):fe(e,31,1)},ye=function(e){return me(e,23,8)},Ee=function(e){return me(e,52,11)},_e=function(e){var t=fe(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,fe(e,16,16)),n=0,i=fe(e,16),s=0;s<i;s++)n+=fe(e,16,64+16*s)*r,r/=1e4;var o=Math.pow(10,fe(e,16,48));return(0===t?1:-1)*Math.round(n*o)/o},Re=function(e,t){var r=fe(t,1),n=fe(t,63,1),i=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},Ce=function(e){for(var t=fe(e,32),r=(fe(e,32,32),fe(e,32,64)),n=96,i=[],s=0;s<t;s++)i[s]=fe(e,32,n),n+=32,n+=32;var o=function(t){var r,i=fe(e,32,n);return n+=32,4294967295==i?null:23==t||20==t?(r=fe(e,8*i,n),n+=8*i,r):25==t?r=e.toString(this.encoding,n>>3,(n+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},a=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=a(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=o(t);return n};return a(i,r)},Te=function(e){return e.toString("utf8")},we=function(e){return null===e?null:fe(e,8)>0};de={init:function(e){e(20,pe),e(21,ge),e(23,ve),e(26,ve),e(1700,_e),e(700,ye),e(701,Ee),e(16,we),e(1114,Re.bind(null,!1)),e(1184,Re.bind(null,!0)),e(1e3,Ce),e(1007,Ce),e(1016,Ce),e(1008,Ce),e(1009,Ce),e(25,Te)}};var be;be={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096};var Se,Ae,Ne,Oe,Pe,Ie,De,ke,Me,xe=!1;function Le(e){return String(e)}function qe(e,t){return Me[t=t||"text"]&&Me[t][e]||Le}function Fe(e,t,r){"function"==typeof t&&(r=t,t="text"),Me[t][e]=r}function je(){return xe||(xe=!0,Ae=b,Ne=de,Oe=O,Pe=be,(Se={}).getTypeParser=qe,Ie=Fe,Se.setTypeParser=Ie,De=Oe,Se.arrayParser=De,ke=Pe,Se.builtins=ke,Me={text:{},binary:{}},Ae.init((function(e,t){Me.text[e]=t})),Ne.init((function(e,t){Me.binary[e]=t}))),Se}var Be=je(),We=Be.getTypeParser(20,"text"),Ue=Be.getTypeParser(1016,"text");w.__defineSetter__("parseInt8",(function(e){Be.setTypeParser(20,"text",e?Be.getTypeParser(23,"text"):We),Be.setTypeParser(1016,"text",e?Be.getTypeParser(1007,"text"):Ue)}));var $e,He,Ve,Ge,Qe,ze=!1;function Ke(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function Xe(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e}function Ye(){$e={},He=m,Ve=w,Ge=function(e,t){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?Ve.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=Ke(t,4)+"-"+Ke(e.getUTCMonth()+1,2)+"-"+Ke(e.getUTCDate(),2)+"T"+Ke(e.getUTCHours(),2)+":"+Ke(e.getUTCMinutes(),2)+":"+Ke(e.getUTCSeconds(),2)+"."+Ke(e.getUTCMilliseconds(),3);return n+="+00:00",r&&(n+=" BC"),n}(e):function(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=Ke(r,4)+"-"+Ke(e.getMonth()+1,2)+"-"+Ke(e.getDate(),2)+"T"+Ke(e.getHours(),2)+":"+Ke(e.getMinutes(),2)+":"+Ke(e.getSeconds(),2)+"."+Ke(e.getMilliseconds(),3);return t<0?(i+="-",t*=-1):i+="+",i+=Ke(Math.floor(t/60),2)+":"+Ke(t%60,2),n&&(i+=" BC"),i}(e):Array.isArray(e)?function e(t){for(var r="{",n=0;n<t.length;n++)n>0&&(r+=","),null===t[n]||void 0===t[n]?r+="NULL":Array.isArray(t[n])?r+=e(t[n]):t[n]instanceof Buffer?r+="\\\\x"+t[n].toString("hex"):r+='"'+Ge(t[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return r+="}"}(e):null==e?null:"object"==typeof e?function(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Ge(e.toPostgres(Ge),t)}return JSON.stringify(e)}(e,t):e.toString()},$e={prepareValue:function(e){return Ge(e)},normalizeQueryConfig:Xe,postgresMd5PasswordHash:function(e,t,r){var n=Qe(t+e);return"md5"+Qe(Buffer.concat([Buffer.from(n),r]))},md5:Qe=function(e){return He.createHash("md5").update(e,"utf-8").digest("hex")}}}function Je(){return ze||(ze=!0,Ye()),$e}var Ze=Je(),et={};const tt=m;function rt(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e)),Buffer.isBuffer(t)||(t=Buffer.from(t));var r=[];if(e.length>t.length)for(var n=0;n<t.length;n++)r.push(e[n]^t[n]);else for(var i=0;i<e.length;i++)r.push(e[i]^t[i]);return Buffer.from(r)}function nt(e,t){return tt.createHmac("sha256",e).update(t).digest()}et={startSession:function(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");const t=tt.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}},continueSession:function(e,t,r){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");const n=function(e){var t,r,n;if(String(e).split(",").forEach((function(e){switch(e[0]){case"r":t=e.substr(2);break;case"s":r=e.substr(2);break;case"i":n=parseInt(e.substr(2),10)}})),!t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:t,salt:r,iteration:n}}(r);if(!n.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var i=function(e,t,r){for(var n=nt(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),i=n,s=0;s<r-1;s++)n=nt(e,n),i=rt(i,n);return i}(t,Buffer.from(n.salt,"base64"),n.iteration),s=nt(i,"Client Key"),o=tt.createHash("sha256").update(s).digest(),a="n=*,r="+e.clientNonce,c="r="+n.nonce+",s="+n.salt+",i="+n.iteration,u="c=biws,r="+n.nonce,l=a+","+c+","+u,h=rt(s,nt(o,l)).toString("base64"),d=nt(i,"Server Key"),p=nt(d,l);e.message="SASLResponse",e.serverSignature=p.toString("base64"),e.response=u+",p="+h},finalizeSession:function(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");var r;if(String(t).split(",").forEach((function(e){switch(e[0]){case"v":r=e.substr(2)}})),r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}};var it,st,ot,at,ct={},ut={},lt={},ht=p;function dt(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var n=!1,i=!1,s=[],o=!1,a=new ht;function c(){for(;s.length&&!a.paused;){var e=s.shift();if(null===e)return a.emit("end");a.emit("data",e)}}function u(){a.writable=!1,t.call(a),!a.readable&&a.autoDestroy&&a.destroy()}return a.readable=a.writable=!0,a.paused=!1,a.autoDestroy=!(r&&!1===r.autoDestroy),a.write=function(t){return e.call(this,t),!a.paused},a.queue=a.push=function(e){return o||(null===e&&(o=!0),s.push(e),c()),a},a.on("end",(function(){a.readable=!1,!a.writable&&a.autoDestroy&&process.nextTick((function(){a.destroy()}))})),a.end=function(e){if(!n)return n=!0,arguments.length&&a.write(e),u(),a},a.destroy=function(){if(!i)return i=!0,n=!0,s.length=0,a.writable=a.readable=!1,a.emit("close"),a},a.pause=function(){if(!a.paused)return a.paused=!0,a},a.resume=function(){return a.paused&&(a.paused=!1,a.emit("resume")),c(),a.paused||a.emit("drain"),a},a}lt=dt,dt.through=dt;var pt=d.StringDecoder;ut=function(e,t,r){var n=new pt,i="",s=r&&r.maxLength,o=!r||!1!==r.trailing;"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function a(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}void 0!==r&&e.queue(r)}else e.queue(r)}function c(t,r){var n=((null!=i?i:"")+r).split(e);if(i=n.pop(),s&&i.length>s)return t.emit("error",new Error("maximum buffer reached"));for(var o=0;o<n.length;o++){a(t,n[o])}}return lt((function(e){c(this,n.write(e))}),(function(){n.end&&c(this,n.end()),o&&null!=i&&a(this,i),this.queue(null)}))};var ft=h,mt=p.Stream,gt=v,vt="win32"===process.platform,yt=process.stderr;var Et=["host","port","database","user","password"],_t=Et.length,Rt=Et[_t-1];function Ct(){var e=yt instanceof mt&&!0===yt.writable;if(e){var t=Array.prototype.slice.call(arguments).concat("\n");yt.write(gt.format.apply(gt,t))}}Object.defineProperty(ct,"isWin",{get:function(){return vt},set:function(e){vt=e}});ct.warnTo=function(e){var t=yt;return yt=e,t};ct.getFileName=function(e){return(e=e||process.env).PGPASSFILE||(vt?ft.join(e.APPDATA,"postgresql","pgpass.conf"):ft.join(e.HOME,".pgpass"))};ct.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!vt||(t=t||"<unkn>",32768!=(61440&e.mode)?(Ct('WARNING: password file "%s" is not a plain file',t),!1):!(63&e.mode)||(Ct('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var Tt=(st=function(e,t){return Et.slice(0,-1).reduce((function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])}),!0)},ct.match=st);ct.getPassword=function(e,t,r){var n,i=t.pipe(new ut);var s=function(e){t.destroy(),Ct("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",s),i.on("data",(function(t){var r=wt(t);r&&bt(r)&&Tt(e,r)&&(n=r[Rt],i.end())})).on("end",(function(){t.destroy(),r(n)})).on("error",s)};var wt=(ot=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s={},o=function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),s[Et[t]]=i},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),r=e.charAt(a),n==_t-1){o(n,i);break}a>=0&&":"==t&&"\\"!==r&&(o(n,i,a+1),i=a+2,n+=1)}return s=Object.keys(s).length===_t?s:null},ct.parseLine=ot),bt=(at=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<Et.length;r+=1){if(!(0,t[r])(e[Et[r]]||""))return!1}return!0},ct.isValidEntry=at),St=u;it=function(e,t){var r=ct.getFileName();St.stat(r,(function(n,i){if(n||!ct.usePgPass(i,r))return t(void 0);var s=St.createReadStream(r);ct.getPassword(e,s,t)}))};var At=ct.warnTo;it.warnTo=At;var Nt,Ot,Pt=!1;function It(e){this._types=e||Ot,this.text={},this.binary={}}function Dt(){return Pt||(Pt=!0,Nt={},Ot=je(),It.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},It.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},It.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},Nt=It),Nt}var kt,Mt=Dt(),xt=a,Lt=u;function qt(e){if("/"===e.charAt(0))return{host:(r=e.split(" "))[0],database:r[1]};var t=xt.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var n in r)Array.isArray(r[n])&&(r[n]=r[n][r[n].length-1]);var i=(t.auth||":").split(":");if(r.user=i[0],r.password=i.splice(1).join(":"),r.port=t.port,"socket:"==t.protocol)return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var s=t.pathname;if(!r.host&&s&&/^%2f/i.test(s)){var o=s.split("/");r.host=decodeURIComponent(o[0]),s=o.splice(1).join("/")}return s&&"/"===s.charAt(0)&&(s=s.slice(1)||null),r.database=s&&decodeURI(s),"true"!==r.ssl&&"1"!==r.ssl||(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=Lt.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=Lt.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=Lt.readFileSync(r.sslrootcert).toString()),r}kt=qt,qt.parse=qt;var Ft,jt,Bt,Wt,Ut,$t,Ht,Vt,Gt,Qt=!1;function zt(){return Qt||(Qt=!0,Ft={},jt=o,Bt=w,Wt=kt.parse,Ut=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||Bt[e]},$t=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Bt.ssl},Vt=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Gt=function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+Vt(n))},(Ht=function(e){(e="string"==typeof e?Wt(e):e||{}).connectionString&&(e=Object.assign({},e,Wt(e.connectionString))),this.user=Ut("user",e),this.database=Ut("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(Ut("port",e),10),this.host=Ut("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ut("password",e)}),this.binary=Ut("binary",e),this.ssl=void 0===e.ssl?$t():e.ssl,"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.client_encoding=Ut("client_encoding",e),this.replication=Ut("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ut("application_name",e,"PGAPPNAME"),this.fallback_application_name=Ut("fallback_application_name",e,!1),this.statement_timeout=Ut("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=Ut("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Ut("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}).prototype.getLibpqConnectionString=function(e){var t=[];Gt(t,this,"user"),Gt(t,this,"password"),Gt(t,this,"port"),Gt(t,this,"application_name"),Gt(t,this,"fallback_application_name"),Gt(t,this,"connect_timeout");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Gt(t,r,"sslmode"),Gt(t,r,"sslca"),Gt(t,r,"sslkey"),Gt(t,r,"sslcert"),Gt(t,r,"sslrootcert"),this.database&&t.push("dbname="+Vt(this.database)),this.replication&&t.push("replication="+Vt(this.replication)),this.host&&t.push("host="+Vt(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+Vt(this.client_encoding)),jt.lookup(this.host,(function(r,n){return r?e(r,null):(t.push("hostaddr="+Vt(n)),e(null,t.join(" ")))}))},Ft=Ht),Ft}var Kt=zt(),Xt={};const{EventEmitter:Yt}=y;var Jt={},Zt=je(),er=function(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)},tr=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;er.prototype.addCommandComplete=function(e){var t;(t=e.text?tr.exec(e.text):tr.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))},er.prototype._parseRowAsArray=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++){var i=e[r];t[r]=null!==i?this._parsers[r](i):null}return t},er.prototype.parseRow=function(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r],s=this.fields[r].name;t[s]=null!==i?this._parsers[r](i):null}return t},er.prototype.addRow=function(e){this.rows.push(e)},er.prototype.addFields=function(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=Zt.getTypeParser(r.dataTypeID,r.format||"text")}},Jt=er;const rr=Je();Xt=class extends Yt{constructor(e,t,r){super(),e=rr.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new Jt(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Jt(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.isPreparedStatement&&t.sync()}handleEmptyQuery(e){this.isPreparedStatement&&e.sync()}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}handleError(e,t){if(this.isPreparedStatement&&t.sync(),this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t},!0),e.flush()}prepare(e){if(this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types},!0),this.values)try{this.values=this.values.map(rr.prepareValue)}catch(t){return void this.handleError(t,e)}e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary},!0),e.describe({type:"P",name:this.portal||""},!0),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};var nr={},ir=s,sr=y.EventEmitter,or=v,ar={};Object.defineProperty(ar,"__esModule",{value:!0});var cr={};Object.defineProperty(cr,"__esModule",{value:!0});var ur={};Object.defineProperty(ur,"__esModule",{value:!0});var lr=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.alloc(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=Buffer.alloc(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;const t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}};ur.Writer=lr;const hr=new ur.Writer,dr=[],pr=Buffer.from([69,0,0,0,9,0,0,0,0,0]),fr=(e,t)=>{const r=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+r);return n[0]=e,n.writeInt32BE(r,1),n.write(t,5,"utf-8"),n[r]=0,n},mr=hr.addCString("P").flush(68),gr=hr.addCString("S").flush(68),vr=e=>Buffer.from([e,0,0,0,4]),yr=vr(72),Er=vr(83),_r=vr(88),Rr=vr(99);var Cr={startup:e=>{hr.addInt16(3).addInt16(0);for(const t of Object.keys(e))hr.addCString(t).addCString(e[t]);hr.addCString("client_encoding").addCString("UTF8");var t=hr.addCString("").flush(),r=t.length+4;return(new ur.Writer).addInt32(r).add(t).flush()},password:e=>hr.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSASLInitialResponseMessage:function(e,t){return hr.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),hr.flush(112)},sendSCRAMClientFinalMessage:function(e){return hr.addString(e).flush(112)},query:e=>hr.addCString(e).flush(81),parse:e=>{const t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));const r=e.types||dr;for(var n=r.length,i=hr.addCString(t).addCString(e.text).addInt16(n),s=0;s<n;s++)i.addInt32(r[s]);return hr.flush(80)},bind:(e={})=>{const t=e.portal||"",r=e.statement||"",n=e.binary||!1;for(var i=e.values||dr,s=i.length,o=!1,a=0;a<s;a++)o=o||i[a]instanceof Buffer;var c=hr.addCString(t).addCString(r);if(o)for(c.addInt16(s),a=0;a<s;a++)c.addInt16(i[a]instanceof Buffer?1:0);else c.addInt16(0);c.addInt16(s);for(var u=0;u<s;u++){var l=i[u];null==l?c.addInt32(-1):l instanceof Buffer?(c.addInt32(l.length),c.add(l)):(c.addInt32(Buffer.byteLength(l)),c.addString(l))}return n?(c.addInt16(1),c.addInt16(1)):c.addInt16(0),hr.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return pr;const t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(t,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(r,s.length-4),s},describe:e=>e.name?fr(68,`${e.type}${e.name||""}`):"P"===e.type?mr:gr,close:e=>{const t=`${e.type}${e.name||""}`;return fr(67,t)},flush:()=>yr,sync:()=>Er,end:()=>_r,copyData:e=>hr.add(e).flush(100),copyDone:()=>Rr,copyFail:e=>fr(102,e),cancel:(e,t)=>{const r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r}};cr.serialize=Cr;var Tr=cr.serialize;ar.serialize=Tr;var wr={},br=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.parseComplete={name:"parseComplete",length:5};Sr.bindComplete={name:"bindComplete",length:5};Sr.closeComplete={name:"closeComplete",length:5};Sr.noData={name:"noData",length:5};Sr.portalSuspended={name:"portalSuspended",length:5};Sr.replicationStart={name:"replicationStart",length:4};Sr.emptyQuery={name:"emptyQuery",length:4};Sr.copyDone={name:"copyDone",length:4};class Ar extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}}var Nr=Ar;Sr.DatabaseError=Nr;var Or=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};Sr.CopyDataMessage=Or;var Pr=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=new Array(n)}};Sr.CopyResponse=Pr;var Ir=class{constructor(e,t,r,n,i,s,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=s,this.format=o}};Sr.Field=Ir;var Dr=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};Sr.RowDescriptionMessage=Dr;var kr=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};Sr.ParameterStatusMessage=kr;var Mr=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};Sr.AuthenticationMD5Password=Mr;var xr=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};Sr.BackendKeyDataMessage=xr;var Lr=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};Sr.NotificationResponseMessage=Lr;var qr=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};Sr.ReadyForQueryMessage=qr;var Fr=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};Sr.CommandCompleteMessage=Fr;var jr=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};Sr.DataRowMessage=jr;var Br=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};Sr.NoticeMessage=Br;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});const Ur=Buffer.allocUnsafe(0);var $r=class{constructor(e=0){this.offset=e,this.buffer=Ur,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};Wr.BufferReader=$r;const Hr=br(i),Vr=Buffer.allocUnsafe(0);var Gr=class{constructor(e){var t,r;if(this.remainingBuffer=Vr,this.reader=new Wr.BufferReader,"binary"===(null===(t=e)||void 0===t?void 0:t.mode))throw new Error("Binary mode not supported yet");this.mode=(null===(r=e)||void 0===r?void 0:r.mode)||"text"}parse(e,t){let r=e;this.remainingBuffer.byteLength&&(r=Buffer.allocUnsafe(this.remainingBuffer.byteLength+e.byteLength),this.remainingBuffer.copy(r),e.copy(r,this.remainingBuffer.byteLength));let n=0;for(;n+5<=r.byteLength;){const e=r[n],i=r.readUInt32BE(n+1),s=1+i;if(!(s+n<=r.byteLength))break;t(this.handlePacket(n+5,e,i,r)),n+=s}n===r.byteLength?this.remainingBuffer=Vr:this.remainingBuffer=r.slice(n)}handlePacket(e,t,r,n){switch(t){case 50:return Sr.bindComplete;case 49:return Sr.parseComplete;case 51:return Sr.closeComplete;case 110:return Sr.noData;case 115:return Sr.portalSuspended;case 99:return Sr.copyDone;case 87:return Sr.replicationStart;case 73:return Sr.emptyQuery;case 68:return this.parseDataRowMessage(e,r,n);case 67:return this.parseCommandCompleteMessage(e,r,n);case 90:return this.parseReadyForQueryMessage(e,r,n);case 65:return this.parseNotificationMessage(e,r,n);case 82:return this.parseAuthenticationResponse(e,r,n);case 83:return this.parseParameterStatusMessage(e,r,n);case 75:return this.parseBackendKeyData(e,r,n);case 69:return this.parseErrorMessage(e,r,n,"error");case 78:return this.parseErrorMessage(e,r,n,"notice");case 84:return this.parseRowDescriptionMessage(e,r,n);case 71:return this.parseCopyInMessage(e,r,n);case 72:return this.parseCopyOutMessage(e,r,n);case 100:return this.parseCopyData(e,r,n);default:Hr.default.fail("unknown message code: "+t.toString(16))}}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.string(1);return new Sr.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring();return new Sr.CommandCompleteMessage(t,n)}parseCopyData(e,t,r){const n=r.slice(e,e+(t-4));return new Sr.CopyDataMessage(t,n)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,r,n){this.reader.setBuffer(e,r);const i=0!==this.reader.byte(),s=this.reader.int16(),o=new Sr.CopyResponse(t,n,i,s);for(let e=0;e<s;e++)o.columnTypes[e]=this.reader.int16();return o}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.cstring(),s=this.reader.cstring();return new Sr.NotificationResponseMessage(t,n,i,s)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Sr.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),s=this.reader.int32(),o=0===this.reader.int16()?"text":"binary";return new Sr.Field(e,t,r,n,i,s,o)}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new Sr.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring(),i=this.reader.cstring();return new Sr.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.int32();return new Sr.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i={name:"authenticationOk",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";const e=this.reader.bytes(4);return new Sr.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(t-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,t,r,n){this.reader.setBuffer(e,r);const i={};let s=this.reader.string(1);for(;"\0"!==s;)i[s]=this.reader.cstring(),s=this.reader.string(1);const o=i.M,a="notice"===n?new Sr.NoticeMessage(t,o):new Sr.DatabaseError(o,t,n);return a.severity=i.S,a.code=i.C,a.detail=i.D,a.hint=i.H,a.position=i.P,a.internalPosition=i.p,a.internalQuery=i.q,a.where=i.W,a.schema=i.s,a.table=i.t,a.column=i.c,a.dataType=i.d,a.constraint=i.n,a.file=i.F,a.line=i.L,a.routine=i.R,a}};wr.Parser=Gr;var Qr=function(e,t){const r=new wr.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))};ar.parse=Qr;const{parse:zr,serialize:Kr}=ar;var Xr=function(e){sr.call(this),e=e||{},this.stream=e.stream||new ir.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))};or.inherits(Xr,sr),Xr.prototype.connect=function(e,t){var r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",(function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")}));const i=function(e){(!r._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&r.emit("error",e)};if(this.stream.on("error",i),this.stream.on("close",(function(){r.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}var s=n;const o=Object.assign({socket:r.stream},r.ssl);0===ir.isIP(t)&&(o.servername=t),r.stream=s.connect(o),r.attachListeners(r.stream),r.stream.on("error",i),r.emit("sslconnect")}))},Xr.prototype.attachListeners=function(e){e.on("end",()=>{this.emit("end")}),zr(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})},Xr.prototype.requestSsl=function(){this.stream.write(Kr.requestSsl())},Xr.prototype.startup=function(e){this.stream.write(Kr.startup(e))},Xr.prototype.cancel=function(e,t){this._send(Kr.cancel(e,t))},Xr.prototype.password=function(e){this._send(Kr.password(e))},Xr.prototype.sendSASLInitialResponseMessage=function(e,t){this._send(Kr.sendSASLInitialResponseMessage(e,t))},Xr.prototype.sendSCRAMClientFinalMessage=function(e){this._send(Kr.sendSCRAMClientFinalMessage(e))},Xr.prototype._send=function(e){return!!this.stream.writable&&this.stream.write(e)},Xr.prototype.query=function(e){this._send(Kr.query(e))},Xr.prototype.parse=function(e){this._send(Kr.parse(e))},Xr.prototype.bind=function(e){this._send(Kr.bind(e))},Xr.prototype.execute=function(e){this._send(Kr.execute(e))};const Yr=Kr.flush();Xr.prototype.flush=function(){this.stream.writable&&this.stream.write(Yr)};const Jr=Kr.sync();Xr.prototype.sync=function(){this._ending=!0,this._send(Yr),this._send(Jr)};const Zr=Kr.end();Xr.prototype.end=function(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(Zr,()=>{this.stream.end()});this.stream.end()},Xr.prototype.close=function(e){this._send(Kr.close(e))},Xr.prototype.describe=function(e){this._send(Kr.describe(e))},Xr.prototype.sendCopyFromChunk=function(e){this._send(Kr.copyData(e))},Xr.prototype.endCopyFrom=function(){this._send(Kr.copyDone())},Xr.prototype.sendCopyFail=function(e){this._send(Kr.copyFail(e))},nr=Xr;var en=function(e){C.call(this),this.connectionParameters=new Kt(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||R.Promise,this._types=new Mt(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new nr({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||w.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this._connectionTimeoutMillis=t.connectionTimeoutMillis||0};T.inherits(en,C),en.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0},en.prototype._connect=function(e){var t,r,n=this,i=this.connection;if(this._connecting||this._connected){const t=new Error("Client has already been connected. You cannot reuse a client.");return void process.nextTick(()=>{e(t)})}function s(e){return function(t){"function"==typeof n.password?n._Promise.resolve().then(()=>n.password()).then(r=>{if(void 0!==r){if("string"!=typeof r)return void i.emit("error",new TypeError("Password must be a string"));n.connectionParameters.password=n.password=r}else n.connectionParameters.password=n.password=null;e(t)}).catch(e=>{i.emit("error",e)}):null!==n.password?e(t):it(n.connectionParameters,(function(r){void 0!==r&&(n.connectionParameters.password=n.password=r),e(t)}))}}this._connecting=!0,this._connectionTimeoutMillis>0&&(t=setTimeout(()=>{i._ending=!0,i.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",(function(){n.ssl?i.requestSsl():i.startup(n.getStartupConf())})),i.on("sslconnect",(function(){i.startup(n.getStartupConf())})),i.on("authenticationCleartextPassword",s((function(){i.password(n.password)}))),i.on("authenticationMD5Password",s((function(e){i.password(Ze.postgresMd5PasswordHash(n.user,n.password,e.salt))}))),i.on("authenticationSASL",s((function(e){r=et.startSession(e.mechanisms),i.sendSASLInitialResponseMessage(r.mechanism,r.response)}))),i.on("authenticationSASLContinue",(function(e){et.continueSession(r,n.password,e.data),i.sendSCRAMClientFinalMessage(r.response)})),i.on("authenticationSASLFinal",(function(e){et.finalizeSession(r,e.data),r=null})),i.once("backendKeyData",(function(e){n.processID=e.processID,n.secretKey=e.secretKey}));const o=r=>{if(!this._connectionError){if(this._connectionError=!0,clearTimeout(t),e)return e(r);this.emit("error",r)}},a=e=>{this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)},c=e=>{const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,i)):a(e)};i.on("error",o),i.on("errorMessage",o),i.once("readyForQuery",(function(){n._connecting=!1,n._connected=!0,n._attachListeners(i),i.removeListener("error",o),i.removeListener("errorMessage",o),i.on("error",a),i.on("errorMessage",c),clearTimeout(t),e&&(e(null,n),e=null),n.emit("connect")})),i.on("readyForQuery",(function(){var e=n.activeQuery;n.activeQuery=null,n.readyForQuery=!0,e&&e.handleReadyForQuery(i),n._pulseQueryQueue()})),i.once("end",()=>{const r=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(t),this._errorAllQueries(r),this._ending||(this._connecting&&!this._connectionError?e?e(r):a(r):this._connectionError||a(r)),process.nextTick(()=>{this.emit("end")})}),i.on("notice",(function(e){n.emit("notice",e)}))},en.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},en.prototype._attachListeners=function(e){const t=this;e.on("rowDescription",(function(e){t.activeQuery.handleRowDescription(e)})),e.on("dataRow",(function(e){t.activeQuery.handleDataRow(e)})),e.on("portalSuspended",(function(r){t.activeQuery.handlePortalSuspended(e)})),e.on("emptyQuery",(function(r){t.activeQuery.handleEmptyQuery(e)})),e.on("commandComplete",(function(r){t.activeQuery.handleCommandComplete(r,e)})),e.on("parseComplete",(function(r){t.activeQuery.name&&(e.parsedStatements[t.activeQuery.name]=t.activeQuery.text)})),e.on("copyInResponse",(function(e){t.activeQuery.handleCopyInResponse(t.connection)})),e.on("copyData",(function(e){t.activeQuery.handleCopyData(e,t.connection)})),e.on("notification",(function(e){t.emit("notification",e)}))},en.prototype.getStartupConf=function(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),t},en.prototype.cancel=function(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){r.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)},en.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},en.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)},en.prototype.escapeIdentifier=function(e){return'"'+e.replace(/"/g,'""')+'"'},en.prototype.escapeLiteral=function(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r},en.prototype._pulseQueryQueue=function(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))},en.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(s=this.connectionParameters.query_timeout,(n=new Xt(e,t,r)).callback||(i=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)},en.prototype.end=function(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)},en.Query=Xt,_=en;var tn;const rn=y.EventEmitter,nn=function(){},sn=(e,t)=>{const r=e.findIndex(t);return-1===r?void 0:e.splice(r,1)[0]};class on{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}}class an{constructor(e){this.callback=e}}function cn(e,t){if(t)return{callback:t,result:void 0};let r,n;return{callback:function(e,t){e?r(e):n(t)},result:new e((function(e,t){n=e,r=t}))}}tn=class extends rn{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||ro().Client,this.Promise=this.options.Promise||R.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const r=t.client,n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){const t=sn(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){const t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}const t=cn(this.Promise,e),r=t.result;if(this._clients.length>=this.options.max||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new an(t.callback)),r;const e=(e,r,n)=>{clearTimeout(i),t.callback(e,r,n)},n=new an(e),i=setTimeout(()=>{sn(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new an(t.callback)),r}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const r=function(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}(this,t);let n;this.log("checking client timeout");let i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(s=>{if(n&&clearTimeout(n),t.on("error",r),!s)return this.log("new client connected"),this._acquireClient(t,e,r,!0);this.log("client failed to connect",s),this._clients=this._clients.filter(e=>e!==t),i&&(s.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(s,void 0,nn)})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,nn);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return n=>{r&&function(){throw new Error("Release called on client which has already been released to the pool.")}(),r=!0,this._release(e,t,n)}}_release(e,t,r){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),void this._pulseQueue();let n;this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis)),this._idle.push(new on(e,t,n)),this._pulseQueue()}query(e,t,r){if("function"==typeof e){const t=cn(this.Promise,e);return setImmediate((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(r=t,t=void 0);const n=cn(this.Promise,r);return r=n.callback,this.connect((n,i)=>{if(n)return r(n);let s=!1;const o=e=>{s||(s=!0,i.release(e),r(e))};i.once("error",o),this.log("dispatching query"),i.query(e,t,(e,t)=>{if(this.log("query dispatched"),i.removeListener("error",o),!s)return s=!0,i.release(e),e?r(e):r(void 0,t)})}),n.result}end(e){if(this.log("ending"),this.ending){const t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=cn(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get totalCount(){return this._clients.length}};var un,ln,hn,dn,pn,fn,mn,gn,vn,yn,En,_n,Rn,Cn,Tn,wn,bn,Sn,An,Nn,On,Pn,In,Dn,kn,Mn,xn,Ln,qn,Fn,jn,Bn,Wn,Un,$n,Hn,Vn,Gn,Qn,zn,Kn,Xn,Yn,Jn,Zn,ei,ti,ri,ni,ii,si,oi,ai,ci,ui,li,hi,di,pi,fi,mi,gi,vi,yi,Ei,_i,Ri,Ci,Ti,wi,bi,Si,Ai,Ni,Oi,Pi,Ii,Di,ki,Mi,xi,Li=!1;function qi(e,t){if(e.length>fn)return null;if(!(t?gn[kn]:gn[Pn]).test(e))return null;try{return new Bi(e,t)}catch(e){return null}}function Fi(e,t){var r=qi(e,t);return r?r.version:null}function ji(e,t){var r=qi(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}function Bi(e,t){if(e instanceof Bi){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>fn)throw new TypeError("version is longer than "+fn+" characters");if(!(this instanceof Bi))return new Bi(e,t);pn("SemVer",e,t),this.loose=t;var r=e.trim().match(t?gn[kn]:gn[Pn]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>mn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mn||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){return/^[0-9]+$/.test(e)?+e:e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}function Wi(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new Bi(e,r).inc(t,n).version}catch(e){return null}}function Ui(e,t){if(ts(e,t))return null;var r=qi(e),n=qi(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i}function $i(e,t){var r=ui.test(e),n=ui.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function Hi(e,t){return $i(t,e)}function Vi(e,t){return new Bi(e,t).major}function Gi(e,t){return new Bi(e,t).minor}function Qi(e,t){return new Bi(e,t).patch}function zi(e,t,r){return new Bi(e,r).compare(t)}function Ki(e,t){return zi(e,t,!0)}function Xi(e,t,r){return zi(t,e,r)}function Yi(e,t){return e.sort((function(e,r){return ln.compare(e,r,t)}))}function Ji(e,t){return e.sort((function(e,r){return ln.rcompare(e,r,t)}))}function Zi(e,t,r){return zi(e,t,r)>0}function es(e,t,r){return zi(e,t,r)<0}function ts(e,t,r){return 0===zi(e,t,r)}function rs(e,t,r){return 0!==zi(e,t,r)}function ns(e,t,r){return zi(e,t,r)>=0}function is(e,t,r){return zi(e,t,r)<=0}function ss(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=ts(e,r,n);break;case"!=":i=rs(e,r,n);break;case">":i=Zi(e,r,n);break;case">=":i=ns(e,r,n);break;case"<":i=es(e,r,n);break;case"<=":i=is(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function os(e,t){if(e instanceof os){if(e.loose===t)return e;e=e.value}if(!(this instanceof os))return new os(e,t);pn("comparator",e,t),this.loose=t,this.parse(e),this.semver===Ai?this.value="":this.value=this.operator+this.semver.version,pn("comp",this)}function as(e,t){if(e instanceof as&&e.loose===t)return e;if(!(this instanceof as))return new as(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function cs(e,t){return new as(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}function us(e,t){return pn("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){pn("caret",e,t);var r=t?gn[zn]:gn[Qn];return e.replace(r,(function(t,r,n,i,s){var o;return pn("caret",e,t,r,n,i,s),ls(r)?o="":ls(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":ls(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":s?(pn("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),o="0"===r?"0"===n?">="+r+"."+n+"."+i+s+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+s+" <"+(+r+1)+".0.0"):(pn("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),pn("caret return",o),o}))}(e,t)})).join(" ")}(e,t),pn("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t?gn[Hn]:gn[$n];return e.replace(r,(function(t,r,n,i,s){var o;return pn("tilde",e,t,r,n,i,s),ls(r)?o="":ls(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":ls(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":s?(pn("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),o=">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",pn("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),pn("tildes",e),e=function(e,t){return pn("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t?gn[Bn]:gn[jn];return e.replace(r,(function(t,r,n,i,s,o){pn("xRange",e,t,r,n,i,s,o);var a=ls(n),c=a||ls(i),u=c||ls(s);return"="===r&&u&&(r=""),a?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(c&&(i=0),u&&(s=0),">"===r?(r=">=",c?(n=+n+1,i=0,s=0):u&&(i=+i+1,s=0)):"<="===r&&(r="<",c?n=+n+1:i=+i+1),t=r+n+"."+i+"."+s):c?t=">="+n+".0.0 <"+(+n+1)+".0.0":u&&(t=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0"),pn("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),pn("xrange",e),e=function(e,t){return pn("replaceStars",e,t),e.trim().replace(gn[ei],"")}(e,t),pn("stars",e),e}function ls(e){return!e||"x"===e.toLowerCase()||"*"===e}function hs(e,t,r,n,i,s,o,a,c,u,l,h,d){return((t=ls(r)?"":ls(n)?">="+r+".0.0":ls(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ls(c)?"":ls(u)?"<"+(+c+1)+".0.0":ls(l)?"<"+c+"."+(+u+1)+".0":h?"<="+c+"."+u+"."+l+"-"+h:"<="+a)).trim()}function ds(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++){if(pn(e[r].semver),e[r].semver===Ai)return!0;if(e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}}return!1}return!0}function ps(e,t,r){try{t=new as(t,r)}catch(e){return!1}return t.test(e)}function fs(e,t,r){return e.filter((function(e){return ps(e,t,r)})).sort((function(e,t){return Xi(e,t,r)}))[0]||null}function ms(e,t){try{return new as(e,t).range||"*"}catch(e){return null}}function gs(e,t,r){return ys(e,t,"<",r)}function vs(e,t,r){return ys(e,t,">",r)}function ys(e,t,r,n){var i,s,o,a,c;switch(e=new Bi(e,n),t=new as(t,n),r){case">":i=Zi,s=is,o=es,a=">",c=">=";break;case"<":i=es,s=ns,o=Zi,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ps(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],h=null,d=null;if(l.forEach((function(e){h=h||e,d=d||e,i(e.semver,h.semver,n)?h=e:o(e.semver,d.semver,n)&&(d=e)})),h.operator===a||h.operator===c)return!1;if((!d.operator||d.operator===a)&&s(e,d.semver))return!1;if(d.operator===c&&o(e,d.semver))return!1}return!0}function Es(){return Li||(Li=!0,function(){for((un={})==un&&(ln=un=Bi),pn="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},"2.0.0",un.SEMVER_SPEC_VERSION="2.0.0",fn=256,mn=Number.MAX_SAFE_INTEGER||9007199254740991,hn=[],gn=un.re=hn,dn=[],vn=un.src=dn,yn=0,En=yn++,vn[En]="0|[1-9]\\d*",_n=yn++,vn[_n]="[0-9]+",Rn=yn++,vn[Rn]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",Cn=yn++,vn[Cn]="("+vn[En]+")\\.("+vn[En]+")\\.("+vn[En]+")",Tn=yn++,vn[Tn]="("+vn[_n]+")\\.("+vn[_n]+")\\.("+vn[_n]+")",wn=yn++,vn[wn]="(?:"+vn[En]+"|"+vn[Rn]+")",bn=yn++,vn[bn]="(?:"+vn[_n]+"|"+vn[Rn]+")",Sn=yn++,vn[Sn]="(?:-("+vn[wn]+"(?:\\."+vn[wn]+")*))",An=yn++,vn[An]="(?:-?("+vn[bn]+"(?:\\."+vn[bn]+")*))",Nn=yn++,vn[Nn]="[0-9A-Za-z-]+",On=yn++,vn[On]="(?:\\+("+vn[Nn]+"(?:\\."+vn[Nn]+")*))",Pn=yn++,In="v?"+vn[Cn]+vn[Sn]+"?"+vn[On]+"?",vn[Pn]="^"+In+"$",Dn="[v=\\s]*"+vn[Tn]+vn[An]+"?"+vn[On]+"?",kn=yn++,vn[kn]="^"+Dn+"$",Mn=yn++,vn[Mn]="((?:<|>)?=?)",xn=yn++,vn[xn]=vn[_n]+"|x|X|\\*",Ln=yn++,vn[Ln]=vn[En]+"|x|X|\\*",qn=yn++,vn[qn]="[v=\\s]*("+vn[Ln]+")(?:\\.("+vn[Ln]+")(?:\\.("+vn[Ln]+")(?:"+vn[Sn]+")?"+vn[On]+"?)?)?",Fn=yn++,vn[Fn]="[v=\\s]*("+vn[xn]+")(?:\\.("+vn[xn]+")(?:\\.("+vn[xn]+")(?:"+vn[An]+")?"+vn[On]+"?)?)?",jn=yn++,vn[jn]="^"+vn[Mn]+"\\s*"+vn[qn]+"$",Bn=yn++,vn[Bn]="^"+vn[Mn]+"\\s*"+vn[Fn]+"$",Wn=yn++,vn[Wn]="(?:~>?)",Un=yn++,vn[Un]="(\\s*)"+vn[Wn]+"\\s+",gn[Un]=new RegExp(vn[Un],"g"),"$1~",$n=yn++,vn[$n]="^"+vn[Wn]+vn[qn]+"$",Hn=yn++,vn[Hn]="^"+vn[Wn]+vn[Fn]+"$",Vn=yn++,vn[Vn]="(?:\\^)",Gn=yn++,vn[Gn]="(\\s*)"+vn[Vn]+"\\s+",gn[Gn]=new RegExp(vn[Gn],"g"),"$1^",Qn=yn++,vn[Qn]="^"+vn[Vn]+vn[qn]+"$",zn=yn++,vn[zn]="^"+vn[Vn]+vn[Fn]+"$",Kn=yn++,vn[Kn]="^"+vn[Mn]+"\\s*("+Dn+")$|^$",Xn=yn++,vn[Xn]="^"+vn[Mn]+"\\s*("+In+")$|^$",Yn=yn++,vn[Yn]="(\\s*)"+vn[Mn]+"\\s*("+Dn+"|"+vn[qn]+")",gn[Yn]=new RegExp(vn[Yn],"g"),"$1$2$3",Jn=yn++,vn[Jn]="^\\s*("+vn[qn]+")\\s+-\\s+("+vn[qn]+")\\s*$",Zn=yn++,vn[Zn]="^\\s*("+vn[Fn]+")\\s+-\\s+("+vn[Fn]+")\\s*$",ei=yn++,vn[ei]="(<|>)?=?\\s*\\*",ti=0;ti<34;ti++)pn(ti,vn[ti]),gn[ti]||(gn[ti]=new RegExp(vn[ti]));ri=qi,un.parse=ri,ni=Fi,un.valid=ni,ii=ji,un.clean=ii,si=Bi,un.SemVer=si,Bi.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Bi.prototype.inspect=function(){return'<SemVer "'+this+'">'},Bi.prototype.toString=function(){return this.version},Bi.prototype.compare=function(e){return pn("SemVer.compare",this.version,this.loose,e),e instanceof Bi||(e=new Bi(e,this.loose)),this.compareMain(e)||this.comparePre(e)},Bi.prototype.compareMain=function(e){return e instanceof Bi||(e=new Bi(e,this.loose)),$i(this.major,e.major)||$i(this.minor,e.minor)||$i(this.patch,e.patch)},Bi.prototype.comparePre=function(e){if(e instanceof Bi||(e=new Bi(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(pn("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return $i(r,n)}while(++t)},Bi.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},oi=Wi,un.inc=oi,ai=Ui,un.diff=ai,ci=$i,un.compareIdentifiers=ci,ui=/^[0-9]+$/,li=Hi,un.rcompareIdentifiers=li,hi=Vi,un.major=hi,di=Gi,un.minor=di,pi=Qi,un.patch=pi,fi=zi,un.compare=fi,mi=Ki,un.compareLoose=mi,gi=Xi,un.rcompare=gi,vi=Yi,un.sort=vi,yi=Ji,un.rsort=yi,Ei=Zi,un.gt=Ei,_i=es,un.lt=_i,Ri=ts,un.eq=Ri,Ci=rs,un.neq=Ci,Ti=ns,un.gte=Ti,wi=is,un.lte=wi,bi=ss,un.cmp=bi,Si=os,un.Comparator=Si,Ai={},os.prototype.parse=function(e){var t=this.loose?gn[Kn]:gn[Xn],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new Bi(r[2],this.loose):this.semver=Ai},os.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},os.prototype.toString=function(){return this.value},os.prototype.test=function(e){return pn("Comparator.test",e,this.loose),this.semver===Ai||("string"==typeof e&&(e=new Bi(e,this.loose)),ss(e,this.operator,this.semver,this.loose))},Ni=as,un.Range=Ni,as.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},as.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},as.prototype.toString=function(){return this.range},as.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),pn("range",e,t);var r=t?gn[Zn]:gn[Jn];e=e.replace(r,hs),pn("hyphen replace",e),e=e.replace(gn[Yn],"$1$2$3"),pn("comparator trim",e,gn[Yn]),e=(e=(e=e.replace(gn[Un],"$1~")).replace(gn[Gn],"$1^")).split(/\s+/).join(" ");var n=t?gn[Kn]:gn[Xn],i=e.split(" ").map((function(e){return us(e,t)})).join(" ").split(/\s+/);return this.loose&&(i=i.filter((function(e){return!!e.match(n)}))),i=i.map((function(e){return new os(e,t)}))},Oi=cs,un.toComparators=Oi,as.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Bi(e,this.loose));for(var t=0;t<this.set.length;t++)if(ds(this.set[t],e))return!0;return!1},Pi=ps,un.satisfies=Pi,Ii=fs,un.maxSatisfying=Ii,Di=ms,un.validRange=Di,ki=gs,un.ltr=ki,Mi=vs,un.gtr=Mi,xi=ys,un.outside=xi,"function"==typeof define&&define.amd&&define(ln)}()),un}var _s,Rs=!1;function Cs(){return Rs||(Rs=!0,_s={},_s=JSON.parse('{"name":"pg","version":"8.2.1","description":"PostgreSQL client - pure javascript & libpq with the same API","keywords":["database","libpq","pg","postgre","postgres","postgresql","rdbms"],"homepage":"https://github.com/brianc/node-postgres","repository":{"type":"git","url":"git://github.com/brianc/node-postgres.git"},"author":"Brian Carlson <brian.m.carlson@gmail.com>","main":"./lib","dependencies":{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.2.3","pg-pool":"^3.2.1","pg-protocol":"^1.2.4","pg-types":"^2.1.0","pgpass":"1.x","semver":"4.3.2"},"devDependencies":{"async":"0.9.0","bluebird":"3.5.2","co":"4.6.0","pg-copy-streams":"0.3.0"},"minNativeVersion":"2.0.0","scripts":{"test":"make test-all"},"files":["lib","SPONSORS.md"],"license":"MIT","engines":{"node":">= 8.0.0"},"gitHead":"f3136a7d5d5498280924b3e06f47f8ce80dbe4e6"}')),_s}var Ts,ws,bs,Ss,As,Ns,Os=!1;function Ps(){return Os||(Os=!0,Ts={},ws=y.EventEmitter,bs=v,Ss=Je(),As=Ts=function(e,t,r){ws.call(this),e=Ss.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))},bs.inherits(As,ws),Ns={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"},As.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t)e[Ns[r]||r]=t[r];this.callback?this.callback(e):this.emit("error",e),this.state="error"},As.prototype.then=function(e,t){return this._getPromise().then(e,t)},As.prototype.catch=function(e){return this._getPromise().catch(e)},As.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this))),this._promise},As.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(r,n,i){if(e.native.arrayMode=!1,setImmediate((function(){t.emit("_done")})),r)return t.handleError(r);t._emitRowEvents&&(i.length>1?n.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,i[r])})}):n.forEach((function(e){t.emit("row",e,i)}))),t.state="end",t.emit("end",i),t.callback&&t.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(Ss.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(e)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,(function(i){return i?r(i):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error("Query values must be an array");return r(e)}var i=this.values.map(Ss.prepareValue);e.native.query(this.text,i,r)}else e.native.query(this.text,r)}),Ts}var Is,Ds,ks,Ms,xs,Ls,qs,Fs,js,Bs,Ws,Us,$s=!1;function Hs(){return $s||($s=!0,Is={},Ds=Qs(),ks=Dt(),Ms=Es(),xs=Cs(),Ls=i,qs=y.EventEmitter,Fs=v,js=zt(),Bs="Version >= "+xs.minNativeVersion+" of pg-native required.",Ls(Ms.gte(Ds.version,xs.minNativeVersion),Bs),Ws=Ps(),(Us=Is=function(e){qs.call(this),e=e||{},this._Promise=e.Promise||R.Promise,this._types=new ks(e.types),this.native=new Ds({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new js(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}}).Query=Ws,Fs.inherits(Us,qs),Us.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},Us.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(r,n){if(r)return e(r);t.native.connect(n,(function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},Us.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},Us.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(e.callback=t);else if(s=this.connectionParameters.query_timeout,!(n=new Ws(e,t,r)).callback){let e,t;i=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)},Us.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,r){e=e=>e?r(e):t()}))),this.native.end((function(){r._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{r.emit("end"),e&&e()})})),t},Us.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},Us.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var r=this;t.once("_done",(function(){r._pulseQueryQueue()}))}else e||this.emit("drain")}},Us.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},Us.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},Us.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}),Is}var Vs,Gs=!1;function Qs(){return Gs||(Gs=!0,Vs={},Vs=Hs()),Vs}var zs,Ks,Xs,Ys,Js,Zs,eo,to=!1;function ro(){return to||(to=!0,zs={},Ks=_,Xs=w,Ys=nr,Js=tn,Zs=e=>class extends Js{constructor(t){super(t,e)}},eo=function(e){this.defaults=Xs,this.Client=e,this.Query=this.Client.Query,this.Pool=Zs(this.Client),this._pools=[],this.Connection=Ys,this.types=je()},void 0!==process.env.NODE_PG_FORCE_NATIVE?zs=new eo(Qs()):(zs=new eo(Ks),Object.defineProperty(zs,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new eo(Qs())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e;console.error(e.message)}return Object.defineProperty(zs,"native",{value:e}),e}}))),zs}ro();var no={};Object.defineProperty(no,"__esModule",{value:!0});var io=(e,...t)=>{function r(r={}){return e.reduce((e,n,i)=>{const s=t[i];return e+=n.replace(/\r?\n\s+/g," "),void 0!==s&&(e+="function"!=typeof s?s:s(r)),e},"").trim()}return r.raw=e.reduce((e,r,n)=>{const i=t[n];return e+=r.replace(/\r?\n\s+/g," "),void 0!==i&&(e+="${"+i.toString()+"}"),e},"").trim(),r};no.default=io;const so=e=>/[^a-z0-9_]/.test(e.label||e)?`"${e.label||e}"`:e.label||e;function oo(e){let t=[],r="string"==typeof e?{label:e}:e;return r.database&&t.push(so(r.database)),r.schema&&t.push(so(r.schema)),t.push(so(r.label)),t.join(".")}var ao;const co={CONNECTION:"connection",CONNECTED_CONNECTION:"connectedConnection",COLUMN:"connection.column",FUNCTION:"connection.function",SCHEMA:"connection.schema",RESOURCE_GROUP:"connection.resource_group",DATABASE:"connection.database",TABLE:"connection.table",VIEW:"connection.view",MATERIALIZED_VIEW:"connection.materializedView",NO_CHILD:"NO_CHILD",KEYWORDS:"KEYWORDS"};Object.freeze(co),ao={ContextValue:co};var uo=E(no);const lo=uo`
SELECT * FROM INFORMATION_SCHEMA.COLUMNS
WHERE
  TABLE_NAME = '${e=>e.label}'
  AND TABLE_CATALOG = '${e=>e.database}'
  AND TABLE_SCHEMA = '${e=>e.schema}'`,ho=uo`
SELECT
  C.COLUMN_NAME AS label,
  '${ao.ContextValue.COLUMN}' as type,
  C.TABLE_NAME AS table,
  C.DATA_TYPE AS "dataType",
  UPPER(C.DATA_TYPE || (
    CASE WHEN C.CHARACTER_MAXIMUM_LENGTH > 0 THEN (
      '(' || C.CHARACTER_MAXIMUM_LENGTH || ')'
    ) ELSE '' END
  )) AS "detail",
  C.CHARACTER_MAXIMUM_LENGTH::INT AS size,
  C.TABLE_CATALOG AS database,
  C.TABLE_SCHEMA AS schema,
  C.COLUMN_DEFAULT AS "defaultValue",
  C.IS_NULLABLE AS "isNullable",
  (CASE WHEN LOWER(TC.constraint_type) = 'primary key' THEN TRUE ELSE FALSE END) as "isPk",
  (CASE WHEN LOWER(TC.constraint_type) = 'foreign key' THEN TRUE ELSE FALSE END) as "isFk"
FROM
  INFORMATION_SCHEMA.COLUMNS C
LEFT JOIN information_schema.key_column_usage KC ON KC.table_name = C.table_name
  AND KC.table_schema = C.table_schema
  AND KC.column_name = C.column_name
LEFT JOIN information_schema.table_constraints TC ON KC.table_name = TC.table_name
  AND KC.table_schema = TC.table_schema
  AND KC.constraint_name = TC.constraint_name
JOIN INFORMATION_SCHEMA.TABLES AS T ON C.TABLE_NAME = T.TABLE_NAME
  AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
  AND C.TABLE_CATALOG = T.TABLE_CATALOG
WHERE
  C.TABLE_SCHEMA = '${e=>e.schema}'
  AND C.TABLE_NAME = '${e=>e.label}'
  AND C.TABLE_CATALOG = '${e=>e.database}'
ORDER BY
  C.TABLE_NAME,
  C.ORDINAL_POSITION
`,po=uo`
SELECT *
FROM ${e=>oo(e.table)}
LIMIT ${e=>e.limit||50}
OFFSET ${e=>e.offset||0};
`,fo=uo`
SELECT count(1) AS total
FROM ${e=>oo(e.table)};
`,mo=uo`
SELECT
  '${ao.ContextValue.FUNCTION}' as type,
  f.proname AS name,
  f.proname AS label,
  quote_ident(f.proname) || '(' || oidvectortypes(f.proargtypes)::TEXT || ')' AS detail,
  n.nspname AS schema,
  current_database() AS database,
  quote_ident(n.nspname) || '.' || quote_ident(f.proname) AS signature,
  format_type(f.prorettype, null) AS "resultType",
  oidvectortypes(f.proargtypes) AS args,
  proargnames AS "argsNames",
  f.prosrc AS source,
  'function' as "iconName",
  '${ao.ContextValue.NO_CHILD}' as "childType"
FROM
  pg_catalog.pg_proc AS f
INNER JOIN pg_catalog.pg_namespace AS n on n.oid = f.pronamespace
WHERE
  n.nspname = '${e=>e.schema}'
ORDER BY name
;`,go=(e,t="BASE TABLE")=>uo`
SELECT
  T.TABLE_NAME AS label,
  '${e}' as type,
  T.TABLE_SCHEMA AS schema,
  T.TABLE_CATALOG AS database,
  ${e===ao.ContextValue.VIEW?"TRUE":"FALSE"} AS isView
FROM INFORMATION_SCHEMA.TABLES AS T
WHERE
  T.TABLE_SCHEMA = '${e=>e.schema}'
  AND T.TABLE_CATALOG = '${e=>e.database}'
  AND T.TABLE_TYPE = '${t}'
ORDER BY
  T.TABLE_NAME;
`,vo=uo`
SELECT
  T.TABLE_NAME AS label,
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN '${ao.ContextValue.TABLE}' ELSE '${ao.ContextValue.VIEW}' END) as type,
  T.TABLE_SCHEMA AS schema,
  T.TABLE_CATALOG AS database,
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN FALSE ELSE TRUE END) AS "isView",
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN 'table' ELSE 'view' END) AS description,
  ('"' || T.TABLE_CATALOG || '"."' || T.TABLE_SCHEMA || '"."' || T.TABLE_NAME || '"') as detail
FROM INFORMATION_SCHEMA.TABLES AS T
WHERE
  T.TABLE_SCHEMA !~ '^pg_'
  AND T.TABLE_SCHEMA <> 'information_schema'
  ${e=>e.search?`AND (\n    (T.TABLE_CATALOG || '.' || T.TABLE_SCHEMA || '.' || T.TABLE_NAME) ILIKE '%${e.search}%'\n    OR ('"' || T.TABLE_CATALOG || '"."' || T.TABLE_SCHEMA || '"."' || T.TABLE_NAME || '"') ILIKE '%${e.search}%'\n    OR T.TABLE_NAME ILIKE '%${e.search}%'\n  )`:""}
ORDER BY
  T.TABLE_NAME
LIMIT ${e=>e.limit||100};
`,yo=uo`
SELECT
  C.COLUMN_NAME AS label,
  '${ao.ContextValue.COLUMN}' as type,
  C.TABLE_NAME AS table,
  C.DATA_TYPE AS "dataType",
  C.CHARACTER_MAXIMUM_LENGTH::INT AS size,
  C.TABLE_CATALOG AS database,
  C.TABLE_SCHEMA AS schema,
  C.COLUMN_DEFAULT AS defaultValue,
  C.IS_NULLABLE AS isNullable,
  (CASE WHEN LOWER(TC.constraint_type) = 'primary key' THEN TRUE ELSE FALSE END) as "isPk",
  (CASE WHEN LOWER(TC.constraint_type) = 'foreign key' THEN TRUE ELSE FALSE END) as "isFk"
FROM
  INFORMATION_SCHEMA.COLUMNS C
LEFT JOIN information_schema.key_column_usage KC ON KC.table_name = C.table_name
  AND KC.table_schema = C.table_schema
  AND KC.column_name = C.column_name
LEFT JOIN information_schema.table_constraints TC ON KC.table_name = TC.table_name
  AND KC.table_schema = TC.table_schema
  AND KC.constraint_name = TC.constraint_name
JOIN INFORMATION_SCHEMA.TABLES AS T ON C.TABLE_NAME = T.TABLE_NAME
  AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
  AND C.TABLE_CATALOG = T.TABLE_CATALOG
WHERE
  C.TABLE_SCHEMA !~ '^pg_'
  AND C.TABLE_SCHEMA <> 'information_schema'
  ${e=>e.tables.filter(e=>!!e.label).length?`AND LOWER(C.TABLE_NAME) IN (${e.tables.filter(e=>!!e.label).map(e=>`'${e.label}'`.toLowerCase()).join(", ")})`:""}
  ${e=>e.search?`AND (\n      (C.TABLE_NAME || '.' || C.COLUMN_NAME) ILIKE '%${e.search}%'\n      OR C.COLUMN_NAME ILIKE '%${e.search}%'\n    )`:""}
ORDER BY
  C.TABLE_NAME,
  C.ORDINAL_POSITION
LIMIT ${e=>e.limit||100}
`,Eo=go(ao.ContextValue.TABLE),_o=go(ao.ContextValue.VIEW,"VIEW"),Ro=uo`
SELECT
  '${ao.ContextValue.MATERIALIZED_VIEW}' as type,
  (current_database())::information_schema.sql_identifier AS database,
  (nc.nspname)::information_schema.sql_identifier AS schema,
  (c.relname)::information_schema.sql_identifier AS label,
  'view' AS "iconName",
  '${ao.ContextValue.NO_CHILD}' as "childType"
FROM pg_namespace nc,
  pg_class c
WHERE
  nc.nspname = '${e=>e.schema}'
  AND (
    (c.relnamespace = nc.oid)
    AND (c.relkind = 'm'::"char")
    AND (NOT pg_is_other_temp_schema(nc.oid))
    AND (
      pg_has_role(c.relowner, 'USAGE'::text)
      OR has_table_privilege(
        c.oid,
        'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'::text
      )
      OR has_any_column_privilege(
        c.oid,
        'SELECT, INSERT, UPDATE, REFERENCES'::text
      )
    )
  );
`;var Co={describeTable:lo,countRecords:fo,fetchColumns:ho,fetchRecords:po,fetchTables:Eo,fetchViews:_o,fetchFunctions:mo,fetchDatabases:uo`
SELECT
  db.*,
  db.datname as "label",
  db.datname as "database",
  '${ao.ContextValue.DATABASE}' as "type",
  'database' as "detail"
FROM pg_catalog.pg_database db
WHERE
  datallowconn
  AND NOT datistemplate
  AND db.datname = CURRENT_DATABASE()
ORDER BY
  db.datname;
`,fetchSchemas:uo`
SELECT
  schema_name AS label,
  schema_name AS schema,
  '${ao.ContextValue.SCHEMA}' as "type",
  'group-by-ref-type' as "iconId",
  catalog_name as database
FROM information_schema.schemata
WHERE
  schema_name !~ '^pg_'
  AND schema_name <> 'information_schema'
  AND catalog_name = '${e=>e.database}'
`,fetchMaterializedViews:Ro,searchTables:vo,searchColumns:yo},To={},wo=To&&To.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),bo=To&&To.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),So=To&&To.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&wo(t,e,r);return bo(t,e),t},Ao=To&&To.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},No=To&&To.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(To,"__esModule",{value:!0});var Oo={},Po=Oo&&Oo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oo,"__esModule",{value:!0});var Io=void 0;Oo.ElectronNotSupportedError=Io;var Do={};Object.defineProperty(Do,"__esModule",{value:!0});var ko=void 0;Do.NotifyResponseError=ko;var Mo,xo,Lo,qo,Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});var jo,Bo={};function Wo(e){for(var t in e)Bo.hasOwnProperty(t)||(Bo[t]=e[t])}Object.defineProperty(Bo,"__esModule",{value:!0});var Uo,$o,Ho,Vo,Go,Qo,zo={};function Ko(e){for(var t in e)zo.hasOwnProperty(t)||(zo[t]=e[t])}Object.defineProperty(zo,"__esModule",{value:!0});var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});var Yo=function(e){return!0===e||!1===e};function Jo(e){return"string"==typeof e||e instanceof String}Xo.boolean=Yo;var Zo=Jo;Xo.string=Zo;var ea=function(e){return"number"==typeof e||e instanceof Number};Xo.number=ea;var ta=function(e){return e instanceof Error};Xo.error=ta;var ra=function(e){return"function"==typeof e};function na(e){return Array.isArray(e)}Xo.func=ra;var ia=na;Xo.array=ia;var sa=function(e){return na(e)&&e.every(e=>Jo(e))};Xo.stringArray=sa;var oa,aa,ca,ua={};Object.defineProperty(ua,"__esModule",{value:!0}),(ca=aa=ua.ErrorCodes||(oa={},ua.ErrorCodes=oa)).ParseError=-32700,ca.InvalidRequest=-32600,ca.MethodNotFound=-32601,ca.InvalidParams=-32602,ca.InternalError=-32603,ca.serverErrorStart=-32099,ca.serverErrorEnd=-32e3,ca.ServerNotInitialized=-32002,ca.UnknownErrorCode=-32001,ca.RequestCancelled=-32800,ca.ContentModified=-32801,ca.MessageWriteError=1,ca.MessageReadError=2;class la extends Error{constructor(e,t,r){super(t),this.code=Xo.number(e)?e:aa.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,la.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}var ha=la;ua.ResponseError=ha;class da{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}var pa=da;ua.AbstractMessageType=pa;var fa=class extends da{constructor(e){super(e,0)}};ua.RequestType0=fa;var ma=class extends da{constructor(e){super(e,1)}};ua.RequestType=ma;var ga=class extends da{constructor(e){super(e,1)}};ua.RequestType1=ga;var va=class extends da{constructor(e){super(e,2)}};ua.RequestType2=va;var ya=class extends da{constructor(e){super(e,3)}};ua.RequestType3=ya;var Ea=class extends da{constructor(e){super(e,4)}};ua.RequestType4=Ea;var _a=class extends da{constructor(e){super(e,5)}};ua.RequestType5=_a;var Ra=class extends da{constructor(e){super(e,6)}};ua.RequestType6=Ra;var Ca=class extends da{constructor(e){super(e,7)}};ua.RequestType7=Ca;var Ta=class extends da{constructor(e){super(e,8)}};ua.RequestType8=Ta;var wa=class extends da{constructor(e){super(e,9)}};ua.RequestType9=wa;var ba=class extends da{constructor(e){super(e,1),this._=void 0}};ua.NotificationType=ba;var Sa=class extends da{constructor(e){super(e,0)}};ua.NotificationType0=Sa;var Aa=class extends da{constructor(e){super(e,1)}};ua.NotificationType1=Aa;var Na=class extends da{constructor(e){super(e,2)}};ua.NotificationType2=Na;var Oa=class extends da{constructor(e){super(e,3)}};ua.NotificationType3=Oa;var Pa=class extends da{constructor(e){super(e,4)}};ua.NotificationType4=Pa;var Ia=class extends da{constructor(e){super(e,5)}};ua.NotificationType5=Ia;var Da=class extends da{constructor(e){super(e,6)}};ua.NotificationType6=Da;var ka=class extends da{constructor(e){super(e,7)}};ua.NotificationType7=ka;var Ma=class extends da{constructor(e){super(e,8)}};ua.NotificationType8=Ma;var xa=class extends da{constructor(e){super(e,9)}};ua.NotificationType9=xa;var La=function(e){let t=e;return t&&Xo.string(t.method)&&(Xo.string(t.id)||Xo.number(t.id))};ua.isRequestMessage=La;var qa=function(e){let t=e;return t&&Xo.string(t.method)&&void 0===e.id};ua.isNotificationMessage=qa;var Fa=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(Xo.string(t.id)||Xo.number(t.id)||null===t.id)};ua.isResponseMessage=Fa;var ja=ua.RequestType;zo.RequestType=ja;var Ba=ua.RequestType0;zo.RequestType0=Ba;var Wa=ua.RequestType1;zo.RequestType1=Wa;var Ua=ua.RequestType2;zo.RequestType2=Ua;var $a=ua.RequestType3;zo.RequestType3=$a;var Ha=ua.RequestType4;zo.RequestType4=Ha;var Va=ua.RequestType5;zo.RequestType5=Va;var Ga=ua.RequestType6;zo.RequestType6=Ga;var Qa=ua.RequestType7;zo.RequestType7=Qa;var za=ua.RequestType8;zo.RequestType8=za;var Ka=ua.RequestType9;zo.RequestType9=Ka;var Xa=ua.ResponseError;zo.ResponseError=Xa;var Ya=ua.ErrorCodes;zo.ErrorCodes=Ya;var Ja=ua.NotificationType;zo.NotificationType=Ja;var Za=ua.NotificationType0;zo.NotificationType0=Za;var ec=ua.NotificationType1;zo.NotificationType1=ec;var tc=ua.NotificationType2;zo.NotificationType2=tc;var rc=ua.NotificationType3;zo.NotificationType3=rc;var nc=ua.NotificationType4;zo.NotificationType4=nc;var ic=ua.NotificationType5;zo.NotificationType5=ic;var sc=ua.NotificationType6;zo.NotificationType6=sc;var oc=ua.NotificationType7;zo.NotificationType7=oc;var ac=ua.NotificationType8;zo.NotificationType8=ac;var cc=ua.NotificationType9;zo.NotificationType9=cc;var uc,lc={};Object.defineProperty(lc,"__esModule",{value:!0});var hc,dc,pc={};Object.defineProperty(pc,"__esModule",{value:!0}),(pc.Disposable||(hc={},pc.Disposable=hc)).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(pc.Event||(dc={},pc.Event=dc));class fc{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var r=!1,n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0),i=0,s=r.length;i<s;i++)try{t.push(r[i].apply(n[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class mc{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{let n;return this._callbacks||(this._callbacks=new fc),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),n={dispose:()=>{this._callbacks.remove(e,t),n.dispose=mc._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}var gc=mc;pc.Emitter=gc,mc._noop=function(){};let vc=Buffer.from("\r","ascii")[0],yc=Buffer.from("\n","ascii")[0];class Ec{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}append(e){var t=e;if("string"==typeof e){var r=e,n=Buffer.byteLength(r,this.encoding);(t=Buffer.allocUnsafe(n)).write(r,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=8192*(Math.ceil((this.index+t.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==vc||this.buffer[t+1]!==yc||this.buffer[t+2]!==vc||this.buffer[t+3]!==yc);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach(t=>{let r=t.indexOf(":");if(-1===r)throw new Error("Message header must separate key and value using :");let n=t.substr(0,r),i=t.substr(r+1).trim();e[n]=i});let r=t+4;return this.buffer=this.buffer.slice(r),this.index=this.index-r,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),r=e;return this.buffer.copy(this.buffer,0,r),this.index=this.index-r,t}get numberOfBytes(){return this.index}}(lc.MessageReader||(uc={},lc.MessageReader=uc)).is=function(e){let t=e;return t&&Xo.func(t.listen)&&Xo.func(t.dispose)&&Xo.func(t.onError)&&Xo.func(t.onClose)&&Xo.func(t.onPartialMessage)};class _c{constructor(){this.errorEmitter=new pc.Emitter,this.closeEmitter=new pc.Emitter,this.partialMessageEmitter=new pc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(Xo.string(e.message)?e.message:"unknown"))}}var Rc=_c;lc.AbstractMessageReader=Rc;class Cc extends _c{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new Ec(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let r=parseInt(t);if(isNaN(r))throw new Error("Content-Length value must be a number.");this.nextMessageLength=r}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var r=JSON.parse(t);this.callback(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}var Tc=Cc;lc.StreamMessageReader=Tc;var wc=class extends _c{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};lc.IPCMessageReader=wc;var bc=class extends Cc{constructor(e,t="utf-8"){super(e,t)}};lc.SocketMessageReader=bc;var Sc=lc.MessageReader;zo.MessageReader=Sc;var Ac=lc.StreamMessageReader;zo.StreamMessageReader=Ac;var Nc=lc.IPCMessageReader;zo.IPCMessageReader=Nc;var Oc=lc.SocketMessageReader;zo.SocketMessageReader=Oc;var Pc,Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});(Ic.MessageWriter||(Pc={},Ic.MessageWriter=Pc)).is=function(e){let t=e;return t&&Xo.func(t.dispose)&&Xo.func(t.onClose)&&Xo.func(t.onError)&&Xo.func(t.write)};class Dc{constructor(){this.errorEmitter=new pc.Emitter,this.closeEmitter=new pc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(Xo.string(e.message)?e.message:"unknown"))}}var kc=Dc;Ic.AbstractMessageWriter=kc;var Mc=class extends Dc{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};Ic.StreamMessageWriter=Mc;var xc=class extends Dc{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};Ic.IPCMessageWriter=xc;var Lc=class extends Dc{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(r.join(""),"ascii",r=>{r&&this.handleError(r,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(r){this.handleError(r,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}};Ic.SocketMessageWriter=Lc;var qc=Ic.MessageWriter;zo.MessageWriter=qc;var Fc=Ic.StreamMessageWriter;zo.StreamMessageWriter=Fc;var jc=Ic.IPCMessageWriter;zo.IPCMessageWriter=jc;var Bc=Ic.SocketMessageWriter;zo.SocketMessageWriter=Bc;var Wc=pc.Disposable;zo.Disposable=Wc;var Uc=pc.Event;zo.Event=Uc;var $c=pc.Emitter;zo.Emitter=$c;var Hc,Vc,Gc,Qc={};Object.defineProperty(Qc,"__esModule",{value:!0}),(Gc=Vc=Qc.CancellationToken||(Hc={},Qc.CancellationToken=Hc)).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:pc.Event.None}),Gc.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:pc.Event.None}),Gc.is=function(e){let t=e;return t&&(t===Gc.None||t===Gc.Cancelled||Xo.boolean(t.isCancellationRequested)&&!!t.onCancellationRequested)};const zc=Object.freeze((function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}));class Kc{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?zc:(this._emitter||(this._emitter=new pc.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}var Xc=class{get token(){return this._token||(this._token=new Kc),this._token}cancel(){this._token?this._token.cancel():this._token=Vc.Cancelled}dispose(){this._token?this._token instanceof Kc&&this._token.dispose():this._token=Vc.None}};Qc.CancellationTokenSource=Xc;var Yc=Qc.CancellationTokenSource;zo.CancellationTokenSource=Yc;var Jc=Qc.CancellationToken;zo.CancellationToken=Jc;var Zc,eu,tu,ru={};Object.defineProperty(ru,"__esModule",{value:!0}),(tu=eu=ru.Touch||(Zc={},ru.Touch=Zc)).None=0,tu.First=1,tu.Last=2;var nu=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=eu.None){let n=this._map.get(e);if(n)n.value=t,r!==eu.None&&this.touch(n,r);else{switch(n={key:e,value:t,next:void 0,previous:void 0},r){case eu.None:this.addItemLast(n);break;case eu.First:this.addItemFirst(n);break;case eu.Last:default:this.addItemLast(n)}this._map.set(e,n),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}forEachReverse(e,t){let r=this._tail;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===eu.First||t===eu.Last)if(t===eu.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===eu.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}};ru.LinkedMap=nu;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});const su=h,ou=r,au=m,cu=s;var uu=function(){const e=au.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:su.join(ou.tmpdir(),`vscode-${e}.sock`)};iu.generateRandomPipeName=uu;var lu=function(e,t="utf-8"){let r,n=new Promise((e,t)=>{r=e});return new Promise((i,s)=>{let o=cu.createServer(e=>{o.close(),r([new lc.SocketMessageReader(e,t),new Ic.SocketMessageWriter(e,t)])});o.on("error",s),o.listen(e,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})};iu.createClientPipeTransport=lu;var hu=function(e,t="utf-8"){const r=cu.createConnection(e);return[new lc.SocketMessageReader(r,t),new Ic.SocketMessageWriter(r,t)]};iu.createServerPipeTransport=hu,Ko(iu);var du={};Object.defineProperty(du,"__esModule",{value:!0});const pu=s;var fu=function(e,t="utf-8"){let r,n=new Promise((e,t)=>{r=e});return new Promise((i,s)=>{let o=pu.createServer(e=>{o.close(),r([new lc.SocketMessageReader(e,t),new Ic.SocketMessageWriter(e,t)])});o.on("error",s),o.listen(e,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})};du.createClientSocketTransport=fu;var mu,gu,vu=function(e,t="utf-8"){const r=pu.createConnection(e,"127.0.0.1");return[new lc.SocketMessageReader(r,t),new Ic.SocketMessageWriter(r,t)]};du.createServerSocketTransport=vu,Ko(du),(mu||(mu={})).type=new ua.NotificationType("$/cancelRequest"),(gu||(gu={})).type=new ua.NotificationType("$/progress");var yu=class{constructor(){}};zo.ProgressType=yu;var Eu,_u,Ru,Cu,Tu,wu,bu,Su,Au=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});zo.NullLogger=Au,(_u=Eu=zo.Trace||(Uo={},zo.Trace=Uo))[_u.Off=0]="Off",_u[_u.Messages=1]="Messages",_u[_u.Verbose=2]="Verbose",function(e){e.fromString=function(t){if(!Xo.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(Eu=zo.Trace||(Uo={},zo.Trace=Uo)),(Cu=zo.TraceFormat||($o={},zo.TraceFormat=$o)).Text="text",Cu.JSON="json",function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(Ru=zo.TraceFormat||($o={},zo.TraceFormat=$o)),(Tu=zo.SetTraceNotification||(Ho={},zo.SetTraceNotification=Ho)).type=new ua.NotificationType("$/setTraceNotification"),(wu=zo.LogTraceNotification||(Vo={},zo.LogTraceNotification=Vo)).type=new ua.NotificationType("$/logTraceNotification"),(Su=bu=zo.ConnectionErrors||(Go={},zo.ConnectionErrors=Go))[Su.Closed=1]="Closed",Su[Su.Disposed=2]="Disposed",Su[Su.AlreadyListening=3]="AlreadyListening";class Nu extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,Nu.prototype)}}var Ou,Pu,Iu=Nu;function Du(e,t,r,n){let i=0,s=0,o=0;let a,c,u=void 0,l=Object.create(null),h=void 0,d=Object.create(null),p=new Map,f=new ru.LinkedMap,m=Object.create(null),g=Object.create(null),v=Eu.Off,y=Ru.Text,E=Ou.New,_=new pc.Emitter,R=new pc.Emitter,C=new pc.Emitter,T=new pc.Emitter,w=new pc.Emitter;function b(e){return"req-"+e.toString()}function S(e,t){var r;ua.isRequestMessage(t)?e.set(b(t.id),t):ua.isResponseMessage(t)?e.set(null===(r=t.id)?"res-unknown-"+(++o).toString():"res-"+r.toString(),t):e.set("not-"+(++s).toString(),t)}function A(e){}function N(){return E===Ou.Listening}function O(){return E===Ou.Closed}function P(){return E===Ou.Disposed}function I(){E!==Ou.New&&E!==Ou.Listening||(E=Ou.Closed,R.fire(void 0))}function D(){a||0===f.size||(a=setImmediate(()=>{a=void 0,function(){if(0===f.size)return;let e=f.shift();try{ua.isRequestMessage(e)?function(e){if(P())return;function r(r,n,i){let s={jsonrpc:"2.0",id:e.id};r instanceof ua.ResponseError?s.error=r.toJson():s.result=void 0===r?null:r,M(s,n,i),t.write(s)}function n(r,n,i){let s={jsonrpc:"2.0",id:e.id,error:r.toJson()};M(s,n,i),t.write(s)}!function(e){if(v===Eu.Off||!c)return;if(y===Ru.Text){let t=void 0;v===Eu.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),c.log(`Received request '${e.method} - (${e.id})'.`,t)}else x("receive-request",e)}(e);let i,s,o=l[e.method];o&&(i=o.type,s=o.handler);let a=Date.now();if(s||u){let o=new Qc.CancellationTokenSource,c=String(e.id);g[c]=o;try{let l;l=void 0===e.params||void 0!==i&&0===i.numberOfParams?s?s(o.token):u(e.method,o.token):Xo.array(e.params)&&(void 0===i||i.numberOfParams>1)?s?s(...e.params,o.token):u(e.method,...e.params,o.token):s?s(e.params,o.token):u(e.method,e.params,o.token);let h=l;l?h.then?h.then(t=>{delete g[c],r(t,e.method,a)},t=>{delete g[c],t instanceof ua.ResponseError?n(t,e.method,a):t&&Xo.string(t.message)?n(new ua.ResponseError(ua.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a):n(new ua.ResponseError(ua.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}):(delete g[c],r(l,e.method,a)):(delete g[c],function(r,n,i){void 0===r&&(r=null);let s={jsonrpc:"2.0",id:e.id,result:r};M(s,n,i),t.write(s)}(l,e.method,a))}catch(t){delete g[c],t instanceof ua.ResponseError?r(t,e.method,a):t&&Xo.string(t.message)?n(new ua.ResponseError(ua.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a):n(new ua.ResponseError(ua.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}}else n(new ua.ResponseError(ua.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,a)}(e):ua.isNotificationMessage(e)?function(e){if(P())return;let t,n=void 0;if(e.method===mu.type.method)t=e=>{let t=e.id,r=g[String(t)];r&&r.cancel()};else{let r=d[e.method];r&&(t=r.handler,n=r.type)}if(t||h)try{!function(e){if(v===Eu.Off||!c||e.method===wu.type.method)return;if(y===Ru.Text){let t=void 0;v===Eu.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),c.log(`Received notification '${e.method}'.`,t)}else x("receive-notification",e)}(e),void 0===e.params||void 0!==n&&0===n.numberOfParams?t?t():h(e.method):Xo.array(e.params)&&(void 0===n||n.numberOfParams>1)?t?t(...e.params):h(e.method,...e.params):t?t(e.params):h(e.method,e.params)}catch(t){t.message?r.error(`Notification handler '${e.method}' failed with message: ${t.message}`):r.error(`Notification handler '${e.method}' failed unexpectedly.`)}else C.fire(e)}(e):ua.isResponseMessage(e)?function(e){if(P())return;if(null===e.id)e.error?r.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):r.error("Received response message without id. No further error information provided.");else{let t=String(e.id),n=m[t];if(function(e,t){if(v===Eu.Off||!c)return;if(y===Ru.Text){let r=void 0;if(v===Eu.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";c.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else c.log(`Received response ${e.id} without active response promise.`,r)}else x("receive-response",e)}(e,n),n){delete m[t];try{if(e.error){let t=e.error;n.reject(new ua.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?r.error(`Response handler '${n.method}' failed with message: ${e.message}`):r.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));let t=e;if(Xo.string(t.id)||Xo.number(t.id)){let e=String(t.id),r=m[e];r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{D()}}()}))}e.onClose(I),e.onError((function(e){_.fire([e,void 0,void 0])})),t.onClose(I),t.onError((function(e){_.fire(e)}));let k=e=>{try{if(ua.isNotificationMessage(e)&&e.method===mu.type.method){let r=b(e.params.id),i=f.get(r);if(ua.isRequestMessage(i)){let s=n&&n.cancelUndispatched?n.cancelUndispatched(i,A):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return f.delete(r),s.id=i.id,M(s,e.method,Date.now()),void t.write(s)}}S(f,e)}finally{D()}};function M(e,t,r){if(v!==Eu.Off&&c)if(y===Ru.Text){let n=void 0;v===Eu.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),c.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else x("send-response",e)}function x(e,t){if(!c||v===Eu.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};c.log(r)}function L(){if(O())throw new Nu(bu.Closed,"Connection is closed.");if(P())throw new Nu(bu.Disposed,"Connection is disposed.")}function q(e){return void 0===e?null:e}function F(e,t){let r,n=e.numberOfParams;switch(n){case 0:r=null;break;case 1:r=q(t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(q(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}let j={sendNotification:(e,...r)=>{let n,i;if(L(),Xo.string(e))switch(n=e,r.length){case 0:i=null;break;case 1:i=r[0];break;default:i=r}else n=e.method,i=F(e,r);let s={jsonrpc:"2.0",method:n,params:i};!function(e){if(v!==Eu.Off&&c)if(y===Ru.Text){let t=void 0;v===Eu.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),c.log(`Sending notification '${e.method}'.`,t)}else x("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{L(),Xo.func(e)?h=e:t&&(Xo.string(e)?d[e]={type:void 0,handler:t}:d[e.method]={type:e,handler:t})},onProgress:(e,t,r)=>{if(p.has(t))throw new Error(`Progress handler for token ${t} already registered`);return p.set(t,r),{dispose:()=>{p.delete(t)}}},sendProgress:(e,t,r)=>{j.sendNotification(gu.type,{token:t,value:r})},onUnhandledProgress:T.event,sendRequest:(e,...r)=>{let n,s;L(),function(){if(!N())throw new Error("Call listen() first.")}();let o=void 0;if(Xo.string(e))switch(n=e,r.length){case 0:s=null;break;case 1:Qc.CancellationToken.is(r[0])?(s=null,o=r[0]):s=q(r[0]);break;default:const e=r.length-1;Qc.CancellationToken.is(r[e])?(o=r[e],s=2===r.length?q(r[0]):r.slice(0,e).map(e=>q(e))):s=r.map(e=>q(e))}else{n=e.method,s=F(e,r);let t=e.numberOfParams;o=Qc.CancellationToken.is(r[t])?r[t]:void 0}let a=i++,u=new Promise((e,r)=>{let i={jsonrpc:"2.0",id:a,method:n,params:s},o={method:n,timerStart:Date.now(),resolve:e,reject:r};!function(e){if(v!==Eu.Off&&c)if(y===Ru.Text){let t=void 0;v===Eu.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),c.log(`Sending request '${e.method} - (${e.id})'.`,t)}else x("send-request",e)}(i);try{t.write(i)}catch(e){o.reject(new ua.ResponseError(ua.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),o=null}o&&(m[String(a)]=o)});return o&&o.onCancellationRequested(()=>{j.sendNotification(mu.type,{id:a})}),u},onRequest:(e,t)=>{L(),Xo.func(e)?u=e:t&&(Xo.string(e)?l[e]={type:void 0,handler:t}:l[e.method]={type:e,handler:t})},trace:(e,t,r)=>{let n=!1,i=Ru.Text;void 0!==r&&(Xo.boolean(r)?n=r:(n=r.sendNotification||!1,i=r.traceFormat||Ru.Text)),v=e,y=i,c=v===Eu.Off?void 0:t,!n||O()||P()||j.sendNotification(Tu.type,{value:Eu.toString(e)})},onError:_.event,onClose:R.event,onUnhandledNotification:C.event,onDispose:w.event,dispose:()=>{if(P())return;E=Ou.Disposed,w.fire(void 0);let r=new Error("Connection got disposed.");Object.keys(m).forEach(e=>{m[e].reject(r)}),m=Object.create(null),g=Object.create(null),f=new ru.LinkedMap,Xo.func(t.dispose)&&t.dispose(),Xo.func(e.dispose)&&e.dispose()},listen:()=>{L(),function(){if(N())throw new Nu(bu.AlreadyListening,"Connection is already listening")}(),E=Ou.Listening,e.listen(k)},inspect:()=>{console.log("inspect")}};return j.onNotification(wu.type,e=>{v!==Eu.Off&&c&&c.log(e.message,v===Eu.Verbose?e.verbose:void 0)}),j.onNotification(gu.type,e=>{const t=p.get(e.token);t?t(e.value):T.fire(e)}),j}zo.ConnectionError=Iu,(zo.ConnectionStrategy||(Qo={},zo.ConnectionStrategy=Qo)).is=function(e){let t=e;return t&&Xo.func(t.cancelUndispatched)},(Pu=Ou||(Ou={}))[Pu.New=1]="New",Pu[Pu.Listening=2]="Listening",Pu[Pu.Closed=3]="Closed",Pu[Pu.Disposed=4]="Disposed";var ku=function(e,t,r,n){var i;return r||(r=zo.NullLogger),Du(void 0!==(i=e).listen&&void 0===i.read?e:new lc.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(t)?t:new Ic.StreamMessageWriter(t),r,n)};zo.createMessageConnection=ku;var Mu=zo.ErrorCodes;Bo.ErrorCodes=Mu;var xu=zo.ResponseError;Bo.ResponseError=xu;var Lu=zo.CancellationToken;Bo.CancellationToken=Lu;var qu=zo.CancellationTokenSource;Bo.CancellationTokenSource=qu;var Fu=zo.Disposable;Bo.Disposable=Fu;var ju=zo.Event;Bo.Event=ju;var Bu=zo.Emitter;Bo.Emitter=Bu;var Wu=zo.Trace;Bo.Trace=Wu;var Uu=zo.TraceFormat;Bo.TraceFormat=Uu;var $u=zo.SetTraceNotification;Bo.SetTraceNotification=$u;var Hu=zo.LogTraceNotification;Bo.LogTraceNotification=Hu;var Vu=zo.RequestType;Bo.RequestType=Vu;var Gu=zo.RequestType0;Bo.RequestType0=Gu;var Qu=zo.NotificationType;Bo.NotificationType=Qu;var zu=zo.NotificationType0;Bo.NotificationType0=zu;var Ku=zo.MessageReader;Bo.MessageReader=Ku;var Xu=zo.MessageWriter;Bo.MessageWriter=Xu;var Yu=zo.ConnectionStrategy;Bo.ConnectionStrategy=Yu;var Ju=zo.StreamMessageReader;Bo.StreamMessageReader=Ju;var Zu=zo.StreamMessageWriter;Bo.StreamMessageWriter=Zu;var el=zo.IPCMessageReader;Bo.IPCMessageReader=el;var tl=zo.IPCMessageWriter;Bo.IPCMessageWriter=tl;var rl=zo.createClientPipeTransport;Bo.createClientPipeTransport=rl;var nl=zo.createServerPipeTransport;Bo.createServerPipeTransport=nl;var il=zo.generateRandomPipeName;Bo.generateRandomPipeName=il;var sl=zo.createClientSocketTransport;Bo.createClientSocketTransport=sl;var ol=zo.createServerSocketTransport;Bo.createServerSocketTransport=ol;var al=zo.ProgressType;Bo.ProgressType=al;var cl,ul,ll,hl,dl,pl,fl,ml,gl,vl,yl,El,_l,Rl,Cl,Tl,wl,bl,Sl,Al,Nl,Ol,Pl,Il,Dl,kl,Ml,xl,Ll,ql,Fl,jl,Bl,Wl,Ul,$l,Hl,Vl,Gl,Ql,zl,Kl,Xl,Yl,Jl,Zl,eh,th,rh,nh,ih,sh,oh,ah,ch,uh,lh,hh,dh,ph,fh,mh,gh,vh,yh,Eh,_h,Rh,Ch,Th,wh,bh,Sh,Ah,Nh,Oh,Ph,Ih,Dh,kh,Mh,xh,Lh,qh,Fh,jh,Bh,Wh,Uh={};Uh.Position=nh,(ih=nh||(cl=nh={},Uh.Position=nh,cl)).create=function(e,t){return{line:e,character:t}},ih.is=function(e){var t=e;return qd.objectLiteral(t)&&qd.number(t.line)&&qd.number(t.character)},Uh.Range=sh,(oh=sh||(ul=sh={},Uh.Range=sh,ul)).create=function(e,t,r,n){if(qd.number(e)&&qd.number(t)&&qd.number(r)&&qd.number(n))return{start:nh.create(e,t),end:nh.create(r,n)};if(nh.is(e)&&nh.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+r+", "+n+"]")},oh.is=function(e){var t=e;return qd.objectLiteral(t)&&nh.is(t.start)&&nh.is(t.end)},Uh.Location=ah,(ch=ah||(ll=ah={},Uh.Location=ah,ll)).create=function(e,t){return{uri:e,range:t}},ch.is=function(e){var t=e;return qd.defined(t)&&sh.is(t.range)&&(qd.string(t.uri)||qd.undefined(t.uri))},Uh.LocationLink=uh,(lh=uh||(hl=uh={},Uh.LocationLink=uh,hl)).create=function(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}},lh.is=function(e){var t=e;return qd.defined(t)&&sh.is(t.targetRange)&&qd.string(t.targetUri)&&(sh.is(t.targetSelectionRange)||qd.undefined(t.targetSelectionRange))&&(sh.is(t.originSelectionRange)||qd.undefined(t.originSelectionRange))},Uh.Color=hh,(dh=hh||(dl=hh={},Uh.Color=hh,dl)).create=function(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}},dh.is=function(e){var t=e;return qd.number(t.red)&&qd.number(t.green)&&qd.number(t.blue)&&qd.number(t.alpha)},Uh.ColorInformation=ph,(fh=ph||(pl=ph={},Uh.ColorInformation=ph,pl)).create=function(e,t){return{range:e,color:t}},fh.is=function(e){var t=e;return sh.is(t.range)&&hh.is(t.color)},Uh.ColorPresentation=mh,(gh=mh||(fl=mh={},Uh.ColorPresentation=mh,fl)).create=function(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}},gh.is=function(e){var t=e;return qd.string(t.label)&&(qd.undefined(t.textEdit)||Ih.is(t))&&(qd.undefined(t.additionalTextEdits)||qd.typedArray(t.additionalTextEdits,Ih.is))},Uh.FoldingRangeKind=vh,(yh=vh||(ml=vh={},Uh.FoldingRangeKind=vh,ml)).Comment="comment",yh.Imports="imports",yh.Region="region",Uh.FoldingRange=Eh,(_h=Eh||(gl=Eh={},Uh.FoldingRange=Eh,gl)).create=function(e,t,r,n,i){var s={startLine:e,endLine:t};return qd.defined(r)&&(s.startCharacter=r),qd.defined(n)&&(s.endCharacter=n),qd.defined(i)&&(s.kind=i),s},_h.is=function(e){var t=e;return qd.number(t.startLine)&&qd.number(t.startLine)&&(qd.undefined(t.startCharacter)||qd.number(t.startCharacter))&&(qd.undefined(t.endCharacter)||qd.number(t.endCharacter))&&(qd.undefined(t.kind)||qd.string(t.kind))},Uh.DiagnosticRelatedInformation=Rh,(Ch=Rh||(vl=Rh={},Uh.DiagnosticRelatedInformation=Rh,vl)).create=function(e,t){return{location:e,message:t}},Ch.is=function(e){var t=e;return qd.defined(t)&&ah.is(t.location)&&qd.string(t.message)},Uh.DiagnosticSeverity=Th,(wh=Th||(yl=Th={},Uh.DiagnosticSeverity=Th,yl)).Error=1,wh.Warning=2,wh.Information=3,wh.Hint=4,Uh.DiagnosticTag=bh,(Sh=bh||(El=bh={},Uh.DiagnosticTag=bh,El)).Unnecessary=1,Sh.Deprecated=2,Uh.Diagnostic=Ah,(Nh=Ah||(_l=Ah={},Uh.Diagnostic=Ah,_l)).create=function(e,t,r,n,i,s){var o={range:e,message:t};return qd.defined(r)&&(o.severity=r),qd.defined(n)&&(o.code=n),qd.defined(i)&&(o.source=i),qd.defined(s)&&(o.relatedInformation=s),o},Nh.is=function(e){var t=e;return qd.defined(t)&&sh.is(t.range)&&qd.string(t.message)&&(qd.number(t.severity)||qd.undefined(t.severity))&&(qd.number(t.code)||qd.string(t.code)||qd.undefined(t.code))&&(qd.string(t.source)||qd.undefined(t.source))&&(qd.undefined(t.relatedInformation)||qd.typedArray(t.relatedInformation,Rh.is))},Uh.Command=Oh,(Ph=Oh||(Rl=Oh={},Uh.Command=Oh,Rl)).create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={title:e,command:t};return qd.defined(r)&&r.length>0&&(i.arguments=r),i},Ph.is=function(e){var t=e;return qd.defined(t)&&qd.string(t.title)&&qd.string(t.command)},Uh.TextEdit=Ih,(Dh=Ih||(Cl=Ih={},Uh.TextEdit=Ih,Cl)).replace=function(e,t){return{range:e,newText:t}},Dh.insert=function(e,t){return{range:{start:e,end:e},newText:t}},Dh.del=function(e){return{range:e,newText:""}},Dh.is=function(e){var t=e;return qd.objectLiteral(t)&&qd.string(t.newText)&&sh.is(t.range)},Uh.TextDocumentEdit=kh,(Mh=kh||(Tl=kh={},Uh.TextDocumentEdit=kh,Tl)).create=function(e,t){return{textDocument:e,edits:t}},Mh.is=function(e){var t=e;return qd.defined(t)&&Vh.is(t.textDocument)&&Array.isArray(t.edits)},Uh.CreateFile=xh,(Lh=xh||(wl=xh={},Uh.CreateFile=xh,wl)).create=function(e,t){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),r},Lh.is=function(e){var t=e;return t&&"create"===t.kind&&qd.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||qd.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||qd.boolean(t.options.ignoreIfExists)))},Uh.RenameFile=qh,(Fh=qh||(bl=qh={},Uh.RenameFile=qh,bl)).create=function(e,t,r){var n={kind:"rename",oldUri:e,newUri:t};return void 0===r||void 0===r.overwrite&&void 0===r.ignoreIfExists||(n.options=r),n},Fh.is=function(e){var t=e;return t&&"rename"===t.kind&&qd.string(t.oldUri)&&qd.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||qd.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||qd.boolean(t.options.ignoreIfExists)))},Uh.DeleteFile=jh,(Bh=jh||(Sl=jh={},Uh.DeleteFile=jh,Sl)).create=function(e,t){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),r},Bh.is=function(e){var t=e;return t&&"delete"===t.kind&&qd.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||qd.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||qd.boolean(t.options.ignoreIfNotExists)))},Uh.WorkspaceEdit=Wh,(Wh||(Al=Wh={},Uh.WorkspaceEdit=Wh,Al)).is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return qd.string(e.kind)?xh.is(e)||qh.is(e)||jh.is(e):kh.is(e)})))};var $h,Hh,Vh,Gh,Qh,zh,Kh,Xh,Yh,Jh,Zh,ed,td,rd,nd,id,sd,od,ad,cd,ud,ld,hd,dd,pd,fd,md,gd,vd,yd,Ed,_d,Rd,Cd,Td,wd,bd,Sd,Ad,Nd,Od,Pd,Id,Dd,kd=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(Ih.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(Ih.replace(e,t))},e.prototype.delete=function(e){this.edits.push(Ih.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Md=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(kh.is(e)){var r=new kd(e.edits);t._textEditChanges[e.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach((function(r){var n=new kd(e.changes[r]);t._textEditChanges[r]=n})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(Vh.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(n=this._textEditChanges[t.uri])){var r={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(r),n=new kd(i),this._textEditChanges[t.uri]=n}return n}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var n;if(!(n=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,n=new kd(i),this._textEditChanges[e]=n}return n},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(xh.create(e,t))},e.prototype.renameFile=function(e,t,r){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(qh.create(e,t,r))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(jh.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();Uh.WorkspaceChange=Md,Uh.TextDocumentIdentifier=$h,(Hh=$h||(Nl=$h={},Uh.TextDocumentIdentifier=$h,Nl)).create=function(e){return{uri:e}},Hh.is=function(e){var t=e;return qd.defined(t)&&qd.string(t.uri)},Uh.VersionedTextDocumentIdentifier=Vh,(Gh=Vh||(Ol=Vh={},Uh.VersionedTextDocumentIdentifier=Vh,Ol)).create=function(e,t){return{uri:e,version:t}},Gh.is=function(e){var t=e;return qd.defined(t)&&qd.string(t.uri)&&(null===t.version||qd.number(t.version))},Uh.TextDocumentItem=Qh,(zh=Qh||(Pl=Qh={},Uh.TextDocumentItem=Qh,Pl)).create=function(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}},zh.is=function(e){var t=e;return qd.defined(t)&&qd.string(t.uri)&&qd.string(t.languageId)&&qd.number(t.version)&&qd.string(t.text)},Uh.MarkupKind=Kh,(Xh=Kh||(Il=Kh={},Uh.MarkupKind=Kh,Il)).PlainText="plaintext",Xh.Markdown="markdown",function(e){e.is=function(t){var r=t;return r===e.PlainText||r===e.Markdown}}(Kh||(Dl=Kh={},Uh.MarkupKind=Kh,Dl)),Uh.MarkupContent=Yh,(Yh||(kl=Yh={},Uh.MarkupContent=Yh,kl)).is=function(e){var t=e;return qd.objectLiteral(e)&&Kh.is(t.kind)&&qd.string(t.value)},Uh.CompletionItemKind=Jh,(Zh=Jh||(Ml=Jh={},Uh.CompletionItemKind=Jh,Ml)).Text=1,Zh.Method=2,Zh.Function=3,Zh.Constructor=4,Zh.Field=5,Zh.Variable=6,Zh.Class=7,Zh.Interface=8,Zh.Module=9,Zh.Property=10,Zh.Unit=11,Zh.Value=12,Zh.Enum=13,Zh.Keyword=14,Zh.Snippet=15,Zh.Color=16,Zh.File=17,Zh.Reference=18,Zh.Folder=19,Zh.EnumMember=20,Zh.Constant=21,Zh.Struct=22,Zh.Event=23,Zh.Operator=24,Zh.TypeParameter=25,Uh.InsertTextFormat=ed,(td=ed||(xl=ed={},Uh.InsertTextFormat=ed,xl)).PlainText=1,td.Snippet=2,Uh.CompletionItemTag=rd,(rd||(Ll=rd={},Uh.CompletionItemTag=rd,Ll)).Deprecated=1,Uh.CompletionItem=nd,(nd||(ql=nd={},Uh.CompletionItem=nd,ql)).create=function(e){return{label:e}},Uh.CompletionList=id,(id||(Fl=id={},Uh.CompletionList=id,Fl)).create=function(e,t){return{items:e||[],isIncomplete:!!t}},Uh.MarkedString=sd,(od=sd||(jl=sd={},Uh.MarkedString=sd,jl)).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},od.is=function(e){var t=e;return qd.string(t)||qd.objectLiteral(t)&&qd.string(t.language)&&qd.string(t.value)},Uh.Hover=ad,(ad||(Bl=ad={},Uh.Hover=ad,Bl)).is=function(e){var t=e;return!!t&&qd.objectLiteral(t)&&(Yh.is(t.contents)||sd.is(t.contents)||qd.typedArray(t.contents,sd.is))&&(void 0===e.range||sh.is(e.range))},Uh.ParameterInformation=cd,(cd||(Wl=cd={},Uh.ParameterInformation=cd,Wl)).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},Uh.SignatureInformation=ud,(ud||(Ul=ud={},Uh.SignatureInformation=ud,Ul)).create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={label:e};return qd.defined(t)&&(i.documentation=t),qd.defined(r)?i.parameters=r:i.parameters=[],i},Uh.DocumentHighlightKind=ld,(hd=ld||($l=ld={},Uh.DocumentHighlightKind=ld,$l)).Text=1,hd.Read=2,hd.Write=3,Uh.DocumentHighlight=dd,(dd||(Hl=dd={},Uh.DocumentHighlight=dd,Hl)).create=function(e,t){var r={range:e};return qd.number(t)&&(r.kind=t),r},Uh.SymbolKind=pd,(fd=pd||(Vl=pd={},Uh.SymbolKind=pd,Vl)).File=1,fd.Module=2,fd.Namespace=3,fd.Package=4,fd.Class=5,fd.Method=6,fd.Property=7,fd.Field=8,fd.Constructor=9,fd.Enum=10,fd.Interface=11,fd.Function=12,fd.Variable=13,fd.Constant=14,fd.String=15,fd.Number=16,fd.Boolean=17,fd.Array=18,fd.Object=19,fd.Key=20,fd.Null=21,fd.EnumMember=22,fd.Struct=23,fd.Event=24,fd.Operator=25,fd.TypeParameter=26,Uh.SymbolTag=md,(md||(Gl=md={},Uh.SymbolTag=md,Gl)).Deprecated=1,Uh.SymbolInformation=gd,(gd||(Ql=gd={},Uh.SymbolInformation=gd,Ql)).create=function(e,t,r,n,i){var s={name:e,kind:t,location:{uri:n,range:r}};return i&&(s.containerName=i),s},Uh.DocumentSymbol=vd,(yd=vd||(zl=vd={},Uh.DocumentSymbol=vd,zl)).create=function(e,t,r,n,i,s){var o={name:e,detail:t,kind:r,range:n,selectionRange:i};return void 0!==s&&(o.children=s),o},yd.is=function(e){var t=e;return t&&qd.string(t.name)&&qd.number(t.kind)&&sh.is(t.range)&&sh.is(t.selectionRange)&&(void 0===t.detail||qd.string(t.detail))&&(void 0===t.deprecated||qd.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))},Uh.CodeActionKind=Ed,(_d=Ed||(Kl=Ed={},Uh.CodeActionKind=Ed,Kl)).Empty="",_d.QuickFix="quickfix",_d.Refactor="refactor",_d.RefactorExtract="refactor.extract",_d.RefactorInline="refactor.inline",_d.RefactorRewrite="refactor.rewrite",_d.Source="source",_d.SourceOrganizeImports="source.organizeImports",_d.SourceFixAll="source.fixAll",Uh.CodeActionContext=Rd,(Cd=Rd||(Xl=Rd={},Uh.CodeActionContext=Rd,Xl)).create=function(e,t){var r={diagnostics:e};return null!=t&&(r.only=t),r},Cd.is=function(e){var t=e;return qd.defined(t)&&qd.typedArray(t.diagnostics,Ah.is)&&(void 0===t.only||qd.typedArray(t.only,qd.string))},Uh.CodeAction=Td,(wd=Td||(Yl=Td={},Uh.CodeAction=Td,Yl)).create=function(e,t,r){var n={title:e};return Oh.is(t)?n.command=t:n.edit=t,void 0!==r&&(n.kind=r),n},wd.is=function(e){var t=e;return t&&qd.string(t.title)&&(void 0===t.diagnostics||qd.typedArray(t.diagnostics,Ah.is))&&(void 0===t.kind||qd.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||Oh.is(t.command))&&(void 0===t.isPreferred||qd.boolean(t.isPreferred))&&(void 0===t.edit||Wh.is(t.edit))},Uh.CodeLens=bd,(Sd=bd||(Jl=bd={},Uh.CodeLens=bd,Jl)).create=function(e,t){var r={range:e};return qd.defined(t)&&(r.data=t),r},Sd.is=function(e){var t=e;return qd.defined(t)&&sh.is(t.range)&&(qd.undefined(t.command)||Oh.is(t.command))},Uh.FormattingOptions=Ad,(Nd=Ad||(Zl=Ad={},Uh.FormattingOptions=Ad,Zl)).create=function(e,t){return{tabSize:e,insertSpaces:t}},Nd.is=function(e){var t=e;return qd.defined(t)&&qd.number(t.tabSize)&&qd.boolean(t.insertSpaces)},Uh.DocumentLink=Od,(Pd=Od||(eh=Od={},Uh.DocumentLink=Od,eh)).create=function(e,t,r){return{range:e,target:t,data:r}},Pd.is=function(e){var t=e;return qd.defined(t)&&sh.is(t.range)&&(qd.undefined(t.target)||qd.string(t.target))},Uh.SelectionRange=Id,(Dd=Id||(th=Id={},Uh.SelectionRange=Id,th)).create=function(e,t){return{range:e,parent:t}},Dd.is=function(e){var t=e;return void 0!==t&&sh.is(t.range)&&(void 0===t.parent||Dd.is(t.parent))};var xd,Ld;Uh.EOL=["\n","\r\n","\r"],Uh.TextDocument=xd,(Ld=xd||(rh=xd={},Uh.TextDocument=xd,rh)).create=function(e,t,r,n){return new Bd(e,t,r,n)},Ld.is=function(e){var t=e;return!!(qd.defined(t)&&qd.string(t.uri)&&(qd.undefined(t.languageId)||qd.string(t.languageId))&&qd.number(t.lineCount)&&qd.func(t.getText)&&qd.func(t.positionAt)&&qd.func(t.offsetAt))},Ld.applyEdits=function(e,t){for(var r=e.getText(),n=function e(t,r){if(t.length<=1)return t;var n=t.length/2|0,i=t.slice(0,n),s=t.slice(n);e(i,r),e(s,r);for(var o=0,a=0,c=0;o<i.length&&a<s.length;){var u=r(i[o],s[a]);t[c++]=u<=0?i[o++]:s[a++]}for(;o<i.length;)t[c++]=i[o++];for(;a<s.length;)t[c++]=s[a++];return t}(t,(function(e,t){var r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),i=r.length,s=n.length-1;s>=0;s--){var o=n[s],a=e.offsetAt(o.range.start),c=e.offsetAt(o.range.end);if(!(c<=i))throw new Error("Overlapping edit");r=r.substring(0,a)+o.newText+r.substring(c,r.length),i=a}return r};var qd,Fd,jd,Bd=function(){function e(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,r=!0,n=0;n<t.length;n++){r&&(e.push(n),r=!1);var i=t.charAt(n);r="\r"===i||"\n"===i,"\r"===i&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return nh.create(0,e);for(;r<n;){var i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}var s=r-1;return nh.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var r=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();Fd=qd||(qd={}),jd=Object.prototype.toString,Fd.defined=function(e){return void 0!==e},Fd.undefined=function(e){return void 0===e},Fd.boolean=function(e){return!0===e||!1===e},Fd.string=function(e){return"[object String]"===jd.call(e)},Fd.number=function(e){return"[object Number]"===jd.call(e)},Fd.func=function(e){return"[object Function]"===jd.call(e)},Fd.objectLiteral=function(e){return null!==e&&"object"==typeof e},Fd.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Wo(Uh);var Wd,Ud,$d,Hd,Vd,Gd,Qd,zd,Kd,Xd,Yd,Jd,Zd,ep,tp,rp,np,ip,sp,op,ap,cp,up,lp,hp,dp,pp,fp,mp,gp,vp,yp,Ep,_p,Rp,Cp,Tp,wp,bp,Sp,Ap,Np,Op,Pp,Ip,Dp,kp,Mp,xp,Lp,qp,Fp,jp,Bp,Wp,Up={};Object.defineProperty(Up,"__esModule",{value:!0});var $p={};Object.defineProperty($p,"__esModule",{value:!0});var Hp=function(e){return!0===e||!1===e};function Vp(e){return"string"==typeof e||e instanceof String}$p.boolean=Hp;var Gp=Vp;$p.string=Gp;var Qp=function(e){return"number"==typeof e||e instanceof Number};$p.number=Qp;var zp=function(e){return e instanceof Error};$p.error=zp;var Kp=function(e){return"function"==typeof e};function Xp(e){return Array.isArray(e)}$p.func=Kp;var Yp=Xp;$p.array=Yp;var Jp=function(e){return Xp(e)&&e.every(e=>Vp(e))};$p.stringArray=Jp;var Zp=function(e,t){return Array.isArray(e)&&e.every(t)};$p.typedArray=Zp;var ef=function(e){return null!==e&&"object"==typeof e};$p.objectLiteral=ef;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});class rf extends zo.RequestType0{constructor(e){super(e)}}var nf=rf;tf.ProtocolRequestType0=nf;class sf extends zo.RequestType{constructor(e){super(e)}}var of=sf;tf.ProtocolRequestType=of;class af extends zo.NotificationType{constructor(e){super(e)}}var cf=af;tf.ProtocolNotificationType=cf;class uf extends zo.NotificationType0{constructor(e){super(e)}}var lf=uf;tf.ProtocolNotificationType0=lf;var hf,df={};var pf;Object.defineProperty(df,"__esModule",{value:!0}),(pf=df.ImplementationRequest||(hf={},df.ImplementationRequest=hf)).method="textDocument/implementation",pf.type=new tf.ProtocolRequestType(pf.method),pf.resultType=new zo.ProgressType;var ff=df.ImplementationRequest;Up.ImplementationRequest=ff;var mf,gf={};var vf;Object.defineProperty(gf,"__esModule",{value:!0}),(vf=gf.TypeDefinitionRequest||(mf={},gf.TypeDefinitionRequest=mf)).method="textDocument/typeDefinition",vf.type=new tf.ProtocolRequestType(vf.method),vf.resultType=new zo.ProgressType;var yf=gf.TypeDefinitionRequest;Up.TypeDefinitionRequest=yf;var Ef,_f,Rf={};Object.defineProperty(Rf,"__esModule",{value:!0}),(Rf.WorkspaceFoldersRequest||(Ef={},Rf.WorkspaceFoldersRequest=Ef)).type=new tf.ProtocolRequestType0("workspace/workspaceFolders"),(Rf.DidChangeWorkspaceFoldersNotification||(_f={},Rf.DidChangeWorkspaceFoldersNotification=_f)).type=new tf.ProtocolNotificationType("workspace/didChangeWorkspaceFolders");var Cf=Rf.WorkspaceFoldersRequest;Up.WorkspaceFoldersRequest=Cf;var Tf=Rf.DidChangeWorkspaceFoldersNotification;Up.DidChangeWorkspaceFoldersNotification=Tf;var wf,bf={};Object.defineProperty(bf,"__esModule",{value:!0}),(bf.ConfigurationRequest||(wf={},bf.ConfigurationRequest=wf)).type=new tf.ProtocolRequestType("workspace/configuration");var Sf=bf.ConfigurationRequest;Up.ConfigurationRequest=Sf;var Af,Nf,Of,Pf={};Object.defineProperty(Pf,"__esModule",{value:!0}),(Of=Pf.DocumentColorRequest||(Af={},Pf.DocumentColorRequest=Af)).method="textDocument/documentColor",Of.type=new tf.ProtocolRequestType(Of.method),Of.resultType=new zo.ProgressType,(Pf.ColorPresentationRequest||(Nf={},Pf.ColorPresentationRequest=Nf)).type=new tf.ProtocolRequestType("textDocument/colorPresentation");var If=Pf.DocumentColorRequest;Up.DocumentColorRequest=If;var Df=Pf.ColorPresentationRequest;Up.ColorPresentationRequest=Df;var kf,Mf,xf,Lf={};Object.defineProperty(Lf,"__esModule",{value:!0}),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(Lf.FoldingRangeKind||(kf={},Lf.FoldingRangeKind=kf)),(xf=Lf.FoldingRangeRequest||(Mf={},Lf.FoldingRangeRequest=Mf)).method="textDocument/foldingRange",xf.type=new tf.ProtocolRequestType(xf.method),xf.resultType=new zo.ProgressType;var qf=Lf.FoldingRangeRequest;Up.FoldingRangeRequest=qf;var Ff,jf={};var Bf;Object.defineProperty(jf,"__esModule",{value:!0}),(Bf=jf.DeclarationRequest||(Ff={},jf.DeclarationRequest=Ff)).method="textDocument/declaration",Bf.type=new tf.ProtocolRequestType(Bf.method),Bf.resultType=new zo.ProgressType;var Wf=jf.DeclarationRequest;Up.DeclarationRequest=Wf;var Uf,$f,Hf={};Object.defineProperty(Hf,"__esModule",{value:!0}),($f=Hf.SelectionRangeRequest||(Uf={},Hf.SelectionRangeRequest=Uf)).method="textDocument/selectionRange",$f.type=new tf.ProtocolRequestType($f.method),$f.resultType=new zo.ProgressType;var Vf=Hf.SelectionRangeRequest;Up.SelectionRangeRequest=Vf;var Gf,Qf,zf,Kf={};Object.defineProperty(Kf,"__esModule",{value:!0}),(Kf.WorkDoneProgress||(Gf={},Kf.WorkDoneProgress=Gf)).type=new zo.ProgressType,(Kf.WorkDoneProgressCreateRequest||(Qf={},Kf.WorkDoneProgressCreateRequest=Qf)).type=new tf.ProtocolRequestType("window/workDoneProgress/create"),(Kf.WorkDoneProgressCancelNotification||(zf={},Kf.WorkDoneProgressCancelNotification=zf)).type=new tf.ProtocolNotificationType("window/workDoneProgress/cancel");var Xf=Kf.WorkDoneProgress;Up.WorkDoneProgress=Xf;var Yf=Kf.WorkDoneProgressCreateRequest;Up.WorkDoneProgressCreateRequest=Yf;var Jf=Kf.WorkDoneProgressCancelNotification;var Zf,em,tm,rm,nm,im,sm,om,am,cm,um,lm,hm,dm,pm,fm,mm,gm,vm,ym,Em,_m,Rm,Cm,Tm,wm,bm,Sm,Am,Nm,Om,Pm,Im,Dm,km;Up.WorkDoneProgressCancelNotification=Jf,(Zf=Up.DocumentFilter||(Wd={},Up.DocumentFilter=Wd)).is=function(e){const t=e;return $p.string(t.language)||$p.string(t.scheme)||$p.string(t.pattern)},(em=Up.DocumentSelector||(Ud={},Up.DocumentSelector=Ud)).is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!$p.string(t)&&!Zf.is(t))return!1;return!0},(Up.RegistrationRequest||($d={},Up.RegistrationRequest=$d)).type=new tf.ProtocolRequestType("client/registerCapability"),(Up.UnregistrationRequest||(Hd={},Up.UnregistrationRequest=Hd)).type=new tf.ProtocolRequestType("client/unregisterCapability"),(tm=Up.ResourceOperationKind||(Vd={},Up.ResourceOperationKind=Vd)).Create="create",tm.Rename="rename",tm.Delete="delete",(rm=Up.FailureHandlingKind||(Gd={},Up.FailureHandlingKind=Gd)).Abort="abort",rm.Transactional="transactional",rm.TextOnlyTransactional="textOnlyTransactional",rm.Undo="undo",(Up.StaticRegistrationOptions||(Qd={},Up.StaticRegistrationOptions=Qd)).hasId=function(e){const t=e;return t&&$p.string(t.id)&&t.id.length>0},(Up.TextDocumentRegistrationOptions||(zd={},Up.TextDocumentRegistrationOptions=zd)).is=function(e){const t=e;return t&&(null===t.documentSelector||em.is(t.documentSelector))},(nm=Up.WorkDoneProgressOptions||(Kd={},Up.WorkDoneProgressOptions=Kd)).is=function(e){const t=e;return $p.objectLiteral(t)&&(void 0===t.workDoneProgress||$p.boolean(t.workDoneProgress))},nm.hasWorkDoneProgress=function(e){const t=e;return t&&$p.boolean(t.workDoneProgress)},(Up.InitializeRequest||(Xd={},Up.InitializeRequest=Xd)).type=new tf.ProtocolRequestType("initialize"),(Up.InitializeError||(Yd={},Up.InitializeError=Yd)).unknownProtocolVersion=1,(Up.InitializedNotification||(Jd={},Up.InitializedNotification=Jd)).type=new tf.ProtocolNotificationType("initialized"),(Up.ShutdownRequest||(Zd={},Up.ShutdownRequest=Zd)).type=new tf.ProtocolRequestType0("shutdown"),(Up.ExitNotification||(ep={},Up.ExitNotification=ep)).type=new tf.ProtocolNotificationType0("exit"),(Up.DidChangeConfigurationNotification||(tp={},Up.DidChangeConfigurationNotification=tp)).type=new tf.ProtocolNotificationType("workspace/didChangeConfiguration"),(im=Up.MessageType||(rp={},Up.MessageType=rp)).Error=1,im.Warning=2,im.Info=3,im.Log=4,(Up.ShowMessageNotification||(np={},Up.ShowMessageNotification=np)).type=new tf.ProtocolNotificationType("window/showMessage"),(Up.ShowMessageRequest||(ip={},Up.ShowMessageRequest=ip)).type=new tf.ProtocolRequestType("window/showMessageRequest"),(Up.LogMessageNotification||(sp={},Up.LogMessageNotification=sp)).type=new tf.ProtocolNotificationType("window/logMessage"),(Up.TelemetryEventNotification||(op={},Up.TelemetryEventNotification=op)).type=new tf.ProtocolNotificationType("telemetry/event"),(sm=Up.TextDocumentSyncKind||(ap={},Up.TextDocumentSyncKind=ap)).None=0,sm.Full=1,sm.Incremental=2,(om=Up.DidOpenTextDocumentNotification||(cp={},Up.DidOpenTextDocumentNotification=cp)).method="textDocument/didOpen",om.type=new tf.ProtocolNotificationType(om.method),(am=Up.DidChangeTextDocumentNotification||(up={},Up.DidChangeTextDocumentNotification=up)).method="textDocument/didChange",am.type=new tf.ProtocolNotificationType(am.method),(cm=Up.DidCloseTextDocumentNotification||(lp={},Up.DidCloseTextDocumentNotification=lp)).method="textDocument/didClose",cm.type=new tf.ProtocolNotificationType(cm.method),(um=Up.DidSaveTextDocumentNotification||(hp={},Up.DidSaveTextDocumentNotification=hp)).method="textDocument/didSave",um.type=new tf.ProtocolNotificationType(um.method),(lm=Up.TextDocumentSaveReason||(dp={},Up.TextDocumentSaveReason=dp)).Manual=1,lm.AfterDelay=2,lm.FocusOut=3,(hm=Up.WillSaveTextDocumentNotification||(pp={},Up.WillSaveTextDocumentNotification=pp)).method="textDocument/willSave",hm.type=new tf.ProtocolNotificationType(hm.method),(dm=Up.WillSaveTextDocumentWaitUntilRequest||(fp={},Up.WillSaveTextDocumentWaitUntilRequest=fp)).method="textDocument/willSaveWaitUntil",dm.type=new tf.ProtocolRequestType(dm.method),(Up.DidChangeWatchedFilesNotification||(mp={},Up.DidChangeWatchedFilesNotification=mp)).type=new tf.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(pm=Up.FileChangeType||(gp={},Up.FileChangeType=gp)).Created=1,pm.Changed=2,pm.Deleted=3,(fm=Up.WatchKind||(vp={},Up.WatchKind=vp)).Create=1,fm.Change=2,fm.Delete=4,(Up.PublishDiagnosticsNotification||(yp={},Up.PublishDiagnosticsNotification=yp)).type=new tf.ProtocolNotificationType("textDocument/publishDiagnostics"),(mm=Up.CompletionTriggerKind||(Ep={},Up.CompletionTriggerKind=Ep)).Invoked=1,mm.TriggerCharacter=2,mm.TriggerForIncompleteCompletions=3,(gm=Up.CompletionRequest||(_p={},Up.CompletionRequest=_p)).method="textDocument/completion",gm.type=new tf.ProtocolRequestType(gm.method),gm.resultType=new zo.ProgressType,(vm=Up.CompletionResolveRequest||(Rp={},Up.CompletionResolveRequest=Rp)).method="completionItem/resolve",vm.type=new tf.ProtocolRequestType(vm.method),(ym=Up.HoverRequest||(Cp={},Up.HoverRequest=Cp)).method="textDocument/hover",ym.type=new tf.ProtocolRequestType(ym.method),(Em=Up.SignatureHelpTriggerKind||(Tp={},Up.SignatureHelpTriggerKind=Tp)).Invoked=1,Em.TriggerCharacter=2,Em.ContentChange=3,(_m=Up.SignatureHelpRequest||(wp={},Up.SignatureHelpRequest=wp)).method="textDocument/signatureHelp",_m.type=new tf.ProtocolRequestType(_m.method),(Rm=Up.DefinitionRequest||(bp={},Up.DefinitionRequest=bp)).method="textDocument/definition",Rm.type=new tf.ProtocolRequestType(Rm.method),Rm.resultType=new zo.ProgressType,(Cm=Up.ReferencesRequest||(Sp={},Up.ReferencesRequest=Sp)).method="textDocument/references",Cm.type=new tf.ProtocolRequestType(Cm.method),Cm.resultType=new zo.ProgressType,(Tm=Up.DocumentHighlightRequest||(Ap={},Up.DocumentHighlightRequest=Ap)).method="textDocument/documentHighlight",Tm.type=new tf.ProtocolRequestType(Tm.method),Tm.resultType=new zo.ProgressType,(wm=Up.DocumentSymbolRequest||(Np={},Up.DocumentSymbolRequest=Np)).method="textDocument/documentSymbol",wm.type=new tf.ProtocolRequestType(wm.method),wm.resultType=new zo.ProgressType,(bm=Up.CodeActionRequest||(Op={},Up.CodeActionRequest=Op)).method="textDocument/codeAction",bm.type=new tf.ProtocolRequestType(bm.method),bm.resultType=new zo.ProgressType,(Sm=Up.WorkspaceSymbolRequest||(Pp={},Up.WorkspaceSymbolRequest=Pp)).method="workspace/symbol",Sm.type=new tf.ProtocolRequestType(Sm.method),Sm.resultType=new zo.ProgressType,(Am=Up.CodeLensRequest||(Ip={},Up.CodeLensRequest=Ip)).type=new tf.ProtocolRequestType("textDocument/codeLens"),Am.resultType=new zo.ProgressType,(Up.CodeLensResolveRequest||(Dp={},Up.CodeLensResolveRequest=Dp)).type=new tf.ProtocolRequestType("codeLens/resolve"),(Nm=Up.DocumentLinkRequest||(kp={},Up.DocumentLinkRequest=kp)).method="textDocument/documentLink",Nm.type=new tf.ProtocolRequestType(Nm.method),Nm.resultType=new zo.ProgressType,(Up.DocumentLinkResolveRequest||(Mp={},Up.DocumentLinkResolveRequest=Mp)).type=new tf.ProtocolRequestType("documentLink/resolve"),(Om=Up.DocumentFormattingRequest||(xp={},Up.DocumentFormattingRequest=xp)).method="textDocument/formatting",Om.type=new tf.ProtocolRequestType(Om.method),(Pm=Up.DocumentRangeFormattingRequest||(Lp={},Up.DocumentRangeFormattingRequest=Lp)).method="textDocument/rangeFormatting",Pm.type=new tf.ProtocolRequestType(Pm.method),(Im=Up.DocumentOnTypeFormattingRequest||(qp={},Up.DocumentOnTypeFormattingRequest=qp)).method="textDocument/onTypeFormatting",Im.type=new tf.ProtocolRequestType(Im.method),(Dm=Up.RenameRequest||(Fp={},Up.RenameRequest=Fp)).method="textDocument/rename",Dm.type=new tf.ProtocolRequestType(Dm.method),(km=Up.PrepareRenameRequest||(jp={},Up.PrepareRenameRequest=jp)).method="textDocument/prepareRename",km.type=new tf.ProtocolRequestType(km.method),(Up.ExecuteCommandRequest||(Bp={},Up.ExecuteCommandRequest=Bp)).type=new tf.ProtocolRequestType("workspace/executeCommand"),(Up.ApplyWorkspaceEditRequest||(Wp={},Up.ApplyWorkspaceEditRequest=Wp)).type=new tf.ProtocolRequestType("workspace/applyEdit"),Wo(Up);var Mm,xm,Lm,qm,Fm,jm,Bm={};Object.defineProperty(Bm,"__esModule",{value:!0}),(qm=Bm.CallHierarchyPrepareRequest||(Mm={},Bm.CallHierarchyPrepareRequest=Mm)).method="textDocument/prepareCallHierarchy",qm.type=new tf.ProtocolRequestType(qm.method),(Fm=Bm.CallHierarchyIncomingCallsRequest||(xm={},Bm.CallHierarchyIncomingCallsRequest=xm)).method="callHierarchy/incomingCalls",Fm.type=new tf.ProtocolRequestType(Fm.method),(jm=Bm.CallHierarchyOutgoingCallsRequest||(Lm={},Bm.CallHierarchyOutgoingCallsRequest=Lm)).method="callHierarchy/outgoingCalls",jm.type=new tf.ProtocolRequestType(jm.method);var Wm,Um,$m,Hm,Vm,Gm,Qm,zm,Km,Xm,Ym,Jm={};Object.defineProperty(Jm,"__esModule",{value:!0}),(Qm=Jm.SemanticTokenTypes||(Wm={},Jm.SemanticTokenTypes=Wm)).comment="comment",Qm.keyword="keyword",Qm.string="string",Qm.number="number",Qm.regexp="regexp",Qm.operator="operator",Qm.namespace="namespace",Qm.type="type",Qm.struct="struct",Qm.class="class",Qm.interface="interface",Qm.enum="enum",Qm.typeParameter="typeParameter",Qm.function="function",Qm.member="member",Qm.property="property",Qm.macro="macro",Qm.variable="variable",Qm.parameter="parameter",Qm.label="label",(zm=Jm.SemanticTokenModifiers||(Um={},Jm.SemanticTokenModifiers=Um)).documentation="documentation",zm.declaration="declaration",zm.definition="definition",zm.reference="reference",zm.static="static",zm.abstract="abstract",zm.deprecated="deprecated",zm.async="async",zm.volatile="volatile",zm.readonly="readonly",(Jm.SemanticTokens||($m={},Jm.SemanticTokens=$m)).is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(Km=Jm.SemanticTokensRequest||(Hm={},Jm.SemanticTokensRequest=Hm)).method="textDocument/semanticTokens",Km.type=new tf.ProtocolRequestType(Km.method),(Xm=Jm.SemanticTokensEditsRequest||(Vm={},Jm.SemanticTokensEditsRequest=Vm)).method="textDocument/semanticTokens/edits",Xm.type=new tf.ProtocolRequestType(Xm.method),(Ym=Jm.SemanticTokensRangeRequest||(Gm={},Jm.SemanticTokensRangeRequest=Gm)).method="textDocument/semanticTokens/range",Ym.type=new tf.ProtocolRequestType(Ym.method),function(e){let t,r,n,i,s,o;!function(e){e.method=Bm.CallHierarchyPrepareRequest.method,e.type=Bm.CallHierarchyPrepareRequest.type}(t=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(e){e.method=Bm.CallHierarchyIncomingCallsRequest.method,e.type=Bm.CallHierarchyIncomingCallsRequest.type}(r=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(e){e.method=Bm.CallHierarchyOutgoingCallsRequest.method,e.type=Bm.CallHierarchyOutgoingCallsRequest.type}(n=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})),e.SemanticTokenTypes=Jm.SemanticTokenTypes,e.SemanticTokenModifiers=Jm.SemanticTokenModifiers,e.SemanticTokens=Jm.SemanticTokens,function(e){e.method=Jm.SemanticTokensRequest.method,e.type=Jm.SemanticTokensRequest.type}(i=e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(e){e.method=Jm.SemanticTokensEditsRequest.method,e.type=Jm.SemanticTokensEditsRequest.type}(s=e.SemanticTokensEditsRequest||(e.SemanticTokensEditsRequest={})),function(e){e.method=Jm.SemanticTokensRangeRequest.method,e.type=Jm.SemanticTokensRangeRequest.type}(o=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={}))}(Bo.Proposed||(jo={},Bo.Proposed=jo));var Zm=function(e,t,r,n){return zo.createMessageConnection(e,t,r,n)};Bo.createProtocolConnection=Zm;var eg=Bo.Event;Fo.Event=eg;var tg={};Object.defineProperty(tg,"__esModule",{value:!0});var rg={};Object.defineProperty(rg,"__esModule",{value:!0});var ng=function(e){return!0===e||!1===e};function ig(e){return"string"==typeof e||e instanceof String}rg.boolean=ng;var sg=ig;rg.string=sg;var og=function(e){return"number"==typeof e||e instanceof Number};rg.number=og;var ag=function(e){return e instanceof Error};function cg(e){return"function"==typeof e}rg.error=ag;var ug=cg;function lg(e){return Array.isArray(e)}rg.func=ug;var hg=lg;rg.array=hg;var dg=function(e){return lg(e)&&e.every(e=>ig(e))};rg.stringArray=dg;var pg=function(e,t){return Array.isArray(e)&&e.every(t)};rg.typedArray=pg;var fg=function(e){return e&&cg(e.then)};rg.thenable=fg;tg.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?rg.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Bo.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}};var mg={};Object.defineProperty(mg,"__esModule",{value:!0});mg.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Bo.Emitter,this.connection.onNotification(Bo.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(Bo.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(Bo.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};var gg={};Object.defineProperty(gg,"__esModule",{value:!0});var vg={};Object.defineProperty(vg,"__esModule",{value:!0});class yg{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class Eg extends yg{constructor(){super([Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),"-",Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),"-","4",Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),"-",Eg._oneOf(Eg._timeHighBits),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),"-",Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex(),Eg._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Eg._oneOf(Eg._chars)}}Eg._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],Eg._timeHighBits=["8","9","a","b"];var _g=new yg("00000000-0000-0000-0000-000000000000");function Rg(){return new Eg}vg.empty=_g;var Cg=Rg;vg.v4=Cg;const Tg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function wg(e){return Tg.test(e)}var bg=wg;vg.isUUID=bg;var Sg=function(e){if(!wg(e))throw new Error("invalid uuid");return new yg(e)};vg.parse=Sg;var Ag=function(){return Rg().asHex()};vg.generateUuid=Ag;class Ng{constructor(e,t){this._connection=e,this._token=t,Ng.Instances.set(this._token,this),this._source=new Bo.CancellationTokenSource}get token(){return this._source.token}begin(e,t,r,n){let i={kind:"begin",title:e,percentage:t,message:r,cancellable:n};this._connection.sendProgress(Bo.WorkDoneProgress.type,this._token,i)}report(e,t){let r={kind:"report"};"number"==typeof e?(r.percentage=e,void 0!==t&&(r.message=t)):r.message=e,this._connection.sendProgress(Bo.WorkDoneProgress.type,this._token,r)}done(){Ng.Instances.delete(this._token),this._source.dispose(),this._connection.sendProgress(Bo.WorkDoneProgress.type,this._token,{kind:"end"})}cancel(){this._source.cancel()}}Ng.Instances=new Map;class Og{constructor(){this._source=new Bo.CancellationTokenSource}get token(){return this._source.token}begin(){}report(){}done(){}}var Pg=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new Og;const r=t.workDoneToken;return delete t.workDoneToken,new Ng(e,r)};gg.attachWorkDone=Pg;var Ig;gg.ProgressFeature=e=>class extends e{initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(Bo.WorkDoneProgressCancelNotification.type,e=>{let t=Ng.Instances.get(e.token);void 0!==t&&t.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new Og:new Ng(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=vg.generateUuid();return this.connection.sendRequest(Bo.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Ng(this.connection,e))}return Promise.resolve(new Og)}},(Ig||(Ig={})).type=new Bo.ProgressType;class Dg{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Ig.type,this._token,e)}}var kg=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const r=t.partialResultToken;return delete t.partialResultToken,new Dg(e,r)};gg.attachPartialResult=kg,function(e){for(var t in e)Fo.hasOwnProperty(t)||(Fo[t]=e[t])}(Bo);var Mg,xg={};Object.defineProperty(xg,"__esModule",{value:!0});const Lg=a,qg=h,Fg=u,jg=t;var Bg=function(e){let t=Lg.parse(e);if("file:"!==t.protocol||!t.path)return;let r=t.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if("win32"===process.platform&&r.length>1){let e=r[0],t=r[1];0===e.length&&t.length>1&&":"===t[1]&&r.shift()}return qg.normalize(r.join("/"))};function Wg(){return"win32"===process.platform}function Ug(e,t,r,n){const i=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,o)=>{let a=process.env,c=Object.create(null);Object.keys(a).forEach(e=>c[e]=a[e]),t&&Fg.existsSync(t)&&(c.NODE_PATH?c.NODE_PATH=t+qg.delimiter+c.NODE_PATH:c.NODE_PATH=t,n&&n("NODE_PATH value is: "+c.NODE_PATH)),c.ELECTRON_RUN_AS_NODE="1";try{let t=jg.fork("",[],{cwd:r,env:c,execArgv:["-e",i]});if(void 0===t.pid)return void o(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",e=>{o(e)}),t.on("message",r=>{"r"===r.c&&(t.send({c:"e"}),r.s?s(r.r):o(new Error("Failed to resolve module: "+e)))});let n={c:"rs",a:e};t.send(n)}catch(e){o(e)}})}xg.uriToFilePath=Bg;var $g=Ug;function Hg(e){let t="npm";const r=Object.create(null);Object.keys(process.env).forEach(e=>r[e]=process.env[e]),r.NO_UPDATE_NOTIFIER="true";const n={encoding:"utf8",env:r};Wg()&&(t="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let r=jg.spawnSync(t,["config","get","prefix"],n).stdout;if(!r)return void(e&&e("'npm config get prefix' didn't return a value."));let s=r.trim();return e&&e("'npm config get prefix' value is: "+s),s.length>0?Wg()?qg.join(s,"node_modules"):qg.join(s,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",i)}}xg.resolve=$g;var Vg=Hg;xg.resolveGlobalNodePath=Vg;var Gg,Qg=function(e){let t="yarn",r={encoding:"utf8"};Wg()&&(t="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=jg.spawnSync(t,["global","dir","--json"],r),s=i.stdout;if(!s)return void(e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr)));let o=s.trim().split(/\r?\n/);for(let e of o)try{let t=JSON.parse(e);if("log"===t.type)return qg.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",n)}};xg.resolveGlobalYarnPath=Qg,function(e){let t=void 0;function r(){return void 0!==t||(t="win32"!==process.platform&&(!Fg.existsSync(__filename.toUpperCase())||!Fg.existsSync(__filename.toLowerCase()))),t}e.isCaseSensitive=r,e.isParent=function(e,t){return r()?0===qg.normalize(t).indexOf(qg.normalize(e)):0===qg.normalize(t).toLowerCase().indexOf(qg.normalize(e).toLowerCase())}}(Gg=xg.FileSystem||(Mg={},xg.FileSystem=Mg));var zg,Kg=function(e,t,r,n){return r?(qg.isAbsolute(r)||(r=qg.join(e,r)),Ug(t,r,r,n).then(e=>Gg.isParent(r,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,r=>Ug(t,Hg(n),e,n))):Ug(t,Hg(n),e,n)};xg.resolveModulePath=Kg,(zg=Fo.Files||(Mo={},Fo.Files=Mo)).uriToFilePath=xg.uriToFilePath,zg.resolveGlobalNodePath=xg.resolveGlobalNodePath,zg.resolveGlobalYarnPath=xg.resolveGlobalYarnPath,zg.resolve=xg.resolve,zg.resolveModulePath=xg.resolveModulePath;let Xg=!1,Yg=void 0;function Jg(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(Yg=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(Xg?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if("--clientProcessId"===r&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=r.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();var Zg=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new Bo.Emitter,this._onDidOpen=new Bo.Emitter,this._onDidClose=new Bo.Emitter,this._onDidSave=new Bo.Emitter,this._onWillSave=new Bo.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=Bo.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,r=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=r;let n=Object.freeze({document:r});this._onDidOpen.fire(n),this._onDidChangeContent.fire(n)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,r=e.contentChanges;if(0===r.length)return;let n=this._documents[t.uri];const{version:i}=t;if(null==i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);n=this._configuration.update(n,r,i),this._documents[t.uri]=n,this._onDidChangeContent.fire(Object.freeze({document:n}))}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let r=this._documents[e.textDocument.uri];return r&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:r,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};Fo.TextDocuments=Zg;var ev=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};Fo.ErrorMessageTracker=ev;class tv{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(Bo.MessageType.Error,e)}warn(e){this.send(Bo.MessageType.Warning,e)}info(e){this.send(Bo.MessageType.Info,e)}log(e){this.send(Bo.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(Bo.LogMessageNotification.type,{type:e,message:t})}}const rv=gg.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:Bo.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(Bo.ShowMessageRequest.type,r).then(Jg)}showWarningMessage(e,...t){let r={type:Bo.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(Bo.ShowMessageRequest.type,r).then(Jg)}showInformationMessage(e,...t){let r={type:Bo.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(Bo.ShowMessageRequest.type,r).then(Jg)}});(Fo.BulkRegistration||(xo={},Fo.BulkRegistration=xo)).create=function(){return new nv};class nv{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const r=rg.string(e)?e:e.method;if(this._registered.has(r))throw new Error(r+" is already added to this registration");const n=vg.generateUuid();this._registrations.push({id:n,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}}(Fo.BulkUnregistration||(Lo={},Fo.BulkUnregistration=Lo)).create=function(){return new iv(void 0,[])};class iv{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(Bo.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=rg.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let n={unregisterations:[r]};return this._connection.sendRequest(Bo.UnregistrationRequest.type,n).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${r.id} failed.`)}),!0}}class sv{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof nv?this.registerMany(e):e instanceof iv?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){const n=rg.string(t)?t:t.method,i=vg.generateUuid();let s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(Bo.RegistrationRequest.type,s).then(t=>(e.add({id:i,method:n}),e),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}registerSingle2(e,t){const r=rg.string(e)?e:e.method,n=vg.generateUuid();let i={registrations:[{id:n,method:r,registerOptions:t||{}}]};return this._connection.sendRequest(Bo.RegistrationRequest.type,i).then(e=>Bo.Disposable.create(()=>{this.unregisterSingle(n,r)}),e=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(Bo.UnregistrationRequest.type,r).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(Bo.RegistrationRequest.type,t).then(()=>new iv(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const ov=mg.WorkspaceFoldersFeature(tg.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(r=e)&&r.edit?e:{edit:e};var r;return this._connection.sendRequest(Bo.ApplyWorkspaceEditRequest.type,t)}}));class av{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(Bo.TelemetryEventNotification.type,e)}}class cv{constructor(){this._trace=Bo.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==Bo.Trace.Off&&this._connection.sendNotification(Bo.LogTraceNotification.type,{message:e,verbose:this._trace===Bo.Trace.Verbose?t:void 0})}}class uv{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return gg.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return gg.attachPartialResult(this.connection,t)}}var lv=uv;function hv(e,t){return function(r){return t(e(r))}}Fo.LanguagesImpl=lv;var dv=hv;function pv(e,t){return function(r){return t(e(r))}}Fo.combineConsoleFeatures=dv;var fv=pv;function mv(e,t){return function(r){return t(e(r))}}Fo.combineTelemetryFeatures=fv;var gv=mv;function vv(e,t){return function(r){return t(e(r))}}Fo.combineTracerFeatures=gv;var yv=vv;function Ev(e,t){return function(r){return t(e(r))}}Fo.combineClientFeatures=yv;var _v=Ev;function Rv(e,t){return function(r){return t(e(r))}}Fo.combineWindowFeatures=_v;var Cv=Rv;function Tv(e,t){return function(r){return t(e(r))}}Fo.combineWorkspaceFeatures=Cv;var wv=Tv;Fo.combineLanguagesFeatures=wv;var bv=function(e,t){function r(e,t,r){return e&&t?r(e,t):e||t}return{__brand:"features",console:r(e.console,t.console,hv),tracer:r(e.tracer,t.tracer,mv),telemetry:r(e.telemetry,t.telemetry,pv),client:r(e.client,t.client,vv),window:r(e.window,t.window,Ev),workspace:r(e.workspace,t.workspace,Rv)}};Fo.combineFeatures=bv;var Sv=function(e,t,r,n){let i,s,o,a;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=r,r=n),Bo.ConnectionStrategy.is(e)?a=e:(s=e,o=t,a=r),function(e,t,r,n){if(!e&&!t&&process.argv.length>2){let r=void 0,n=void 0,s=process.argv.slice(2);for(let o=0;o<s.length;o++){let a=s[o];if("--node-ipc"===a){e=new Bo.IPCMessageReader(process),t=new Bo.IPCMessageWriter(process);break}if("--stdio"===a){e=process.stdin,t=process.stdout;break}if("--socket"===a){r=parseInt(s[o+1]);break}if("--pipe"===a){n=s[o+1];break}var i=a.split("=");if("--socket"===i[0]){r=parseInt(i[1]);break}if("--pipe"===i[0]){n=i[1];break}}if(r){let n=Bo.createServerSocketTransport(r);e=n[0],t=n[1]}else if(n){let r=Bo.createServerPipeTransport(n);e=r[0],t=r[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+s);if(!t)throw new Error("Connection output stream is not set. "+s);if(rg.func(e.read)&&rg.func(e.on)){let t=e;t.on("end",()=>{process.exit(Xg?0:1)}),t.on("close",()=>{process.exit(Xg?0:1)})}const o=n&&n.console?new(n.console(tv)):new tv,a=Bo.createProtocolConnection(e,t,o,r);o.rawAttach(a);const c=n&&n.tracer?new(n.tracer(cv)):new cv,u=n&&n.telemetry?new(n.telemetry(av)):new av,l=n&&n.client?new(n.client(sv)):new sv,h=n&&n.window?new(n.window(rv)):new rv,d=n&&n.workspace?new(n.workspace(ov)):new ov,p=n&&n.languages?new(n.languages(uv)):new uv,f=[o,c,u,l,h,d,p];function m(e){return e instanceof Promise?e:rg.thenable(e)?new Promise((t,r)=>{e.then(e=>t(e),e=>r(e))}):Promise.resolve(e)}let g=void 0,v=void 0,y=void 0,E={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(rg.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const r=rg.string(e)?e:e.method;1===arguments.length?a.sendNotification(r):a.sendNotification(r,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>v=e,onInitialized:e=>a.onNotification(Bo.InitializedNotification.type,e),onShutdown:e=>g=e,onExit:e=>y=e,get console(){return o},get telemetry(){return u},get tracer(){return c},get client(){return l},get window(){return h},get workspace(){return d},get languages(){return p},onDidChangeConfiguration:e=>a.onNotification(Bo.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(Bo.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(Bo.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(Bo.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(Bo.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(Bo.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(Bo.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(Bo.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(Bo.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(Bo.HoverRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),onCompletion:e=>a.onRequest(Bo.CompletionRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onCompletionResolve:e=>a.onRequest(Bo.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(Bo.SignatureHelpRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),onDeclaration:e=>a.onRequest(Bo.DeclarationRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onDefinition:e=>a.onRequest(Bo.DefinitionRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onTypeDefinition:e=>a.onRequest(Bo.TypeDefinitionRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onImplementation:e=>a.onRequest(Bo.ImplementationRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onReferences:e=>a.onRequest(Bo.ReferencesRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onDocumentHighlight:e=>a.onRequest(Bo.DocumentHighlightRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onDocumentSymbol:e=>a.onRequest(Bo.DocumentSymbolRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onWorkspaceSymbol:e=>a.onRequest(Bo.WorkspaceSymbolRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onCodeAction:e=>a.onRequest(Bo.CodeActionRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onCodeLens:e=>a.onRequest(Bo.CodeLensRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onCodeLensResolve:e=>a.onRequest(Bo.CodeLensResolveRequest.type,(t,r)=>e(t,r)),onDocumentFormatting:e=>a.onRequest(Bo.DocumentFormattingRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),onDocumentRangeFormatting:e=>a.onRequest(Bo.DocumentRangeFormattingRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),onDocumentOnTypeFormatting:e=>a.onRequest(Bo.DocumentOnTypeFormattingRequest.type,(t,r)=>e(t,r)),onRenameRequest:e=>a.onRequest(Bo.RenameRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),onPrepareRename:e=>a.onRequest(Bo.PrepareRenameRequest.type,(t,r)=>e(t,r)),onDocumentLinks:e=>a.onRequest(Bo.DocumentLinkRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onDocumentLinkResolve:e=>a.onRequest(Bo.DocumentLinkResolveRequest.type,(t,r)=>e(t,r)),onDocumentColor:e=>a.onRequest(Bo.DocumentColorRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onColorPresentation:e=>a.onRequest(Bo.ColorPresentationRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onFoldingRanges:e=>a.onRequest(Bo.FoldingRangeRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onSelectionRanges:e=>a.onRequest(Bo.SelectionRangeRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),gg.attachPartialResult(a,t))),onExecuteCommand:e=>a.onRequest(Bo.ExecuteCommandRequest.type,(t,r)=>e(t,r,gg.attachWorkDone(a,t),void 0)),dispose:()=>a.dispose()};for(let e of f)e.attach(E);return a.onRequest(Bo.InitializeRequest.type,e=>{const t=e.processId;rg.number(t)&&void 0===Yg&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(Xg?0:1)}},3e3),rg.string(e.trace)&&(c.trace=Bo.Trace.fromString(e.trace));for(let t of f)t.initialize(e.capabilities);if(v){return m(v(e,(new Bo.CancellationTokenSource).token,gg.attachWorkDone(a,e),void 0)).then(e=>{if(e instanceof Bo.ResponseError)return e;let t=e;t||(t={capabilities:{}});let r=t.capabilities;r||(r={},t.capabilities=r),void 0===r.textDocumentSync||null===r.textDocumentSync?r.textDocumentSync=rg.number(E.__textDocumentSync)?E.__textDocumentSync:Bo.TextDocumentSyncKind.None:rg.number(r.textDocumentSync)||rg.number(r.textDocumentSync.change)||(r.textDocumentSync.change=rg.number(E.__textDocumentSync)?E.__textDocumentSync:Bo.TextDocumentSyncKind.None);for(let e of f)e.fillServerCapabilities(r);return t})}{let e={capabilities:{textDocumentSync:Bo.TextDocumentSyncKind.None}};for(let t of f)t.fillServerCapabilities(e.capabilities);return e}}),a.onRequest(Bo.ShutdownRequest.type,()=>(Xg=!0,g?g((new Bo.CancellationTokenSource).token):void 0)),a.onNotification(Bo.ExitNotification.type,()=>{try{y&&y()}finally{Xg?process.exit(0):process.exit(1)}}),a.onNotification(Bo.SetTraceNotification.type,e=>{c.trace=Bo.Trace.fromString(e.value)}),E}(s,o,a,i)};Fo.createConnection=Sv;var Av={};Object.defineProperty(Av,"__esModule",{value:!0});Av.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(Bo.Proposed.CallHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))},onIncomingCalls:e=>{const t=Bo.Proposed.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onOutgoingCalls:e=>{const t=Bo.Proposed.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=Bo.Proposed.SemanticTokensRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onEdits:e=>{const t=Bo.Proposed.SemanticTokensEditsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onRange:e=>{const t=Bo.Proposed.SemanticTokensRangeRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};var Ov,Pv=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,r,n,i){let s=e,o=t;this._dataLen>0&&(s-=this._prevLine,0===s&&(o-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=o,this._data[this._dataLen++]=r,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let r=0;for(;r<t&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<t&&r<e){let n=0;for(;n<t&&n<e&&this._prevData[e-1-n]===this._data[t-1-n];)n++;const i=this._data.slice(r,t-n);return{resultId:this.id,edits:[{start:r,deleteCount:e-n-r,data:i}]}}return r<t?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}return this.build()}};Nv.SemanticTokensBuilder=Pv,(Ov=Fo.ProposedFeatures||(qo={},Fo.ProposedFeatures=qo)).all={__brand:"features",languages:Tv(Av.CallHierarchyFeature,Nv.SemanticTokensFeature)},Ov.SemanticTokensBuilder=Nv.SemanticTokensBuilder;class Iv extends Fo.ResponseError{constructor(e,t,r){super(e,t,r)}}ko=Iv,Do.NotifyResponseError=ko;var Dv=Iv;Do.default=Dv;const kv=Po(Do);var Mv={};Object.defineProperty(Mv,"__esModule",{value:!0});var xv=(Lv=void 0,Mv.ElectronNotSupportedNotification=Lv);Mv.MissingModuleNotification=xv;var Lv="Core/electronNotSupported";Mv.ElectronNotSupportedNotification=Lv,xv="Core/missingModule",Mv.MissingModuleNotification=xv;class qv extends kv.default{constructor(e="Electron is not supported. You should enable 'sqltools.useNodeRuntime' and have NodeJS installed to continue."){super(1001,e,{notification:Mv.ElectronNotSupportedNotification,dontNotify:!0})}}Io=qv,Oo.ElectronNotSupportedError=Io;var Fv=qv;Oo.default=Fv;const jv=No(Oo);var Bv={},Wv=Bv&&Bv.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bv,"__esModule",{value:!0});var Uv=void 0;Bv.MissingModuleError=Uv;const $v=Wv(Do);class Hv extends $v.default{constructor(e,t,r=!1){super(1e3,`Missing module "${e.map((t,r)=>`${t.name}@${t.version||"latest"}${r===e.length-2?" and ":r===e.length-1?"":", "}`).join("")}". Need to ${r?"upgrade":"install"}.`,{notification:Mv.MissingModuleNotification,dontNotify:!0,args:{conn:t,action:r?"upgrade":"install",deps:e}})}}Uv=Hv,Bv.MissingModuleError=Uv;var Vv=Hv;Bv.default=Vv;const Gv=No(Bv);var Qv={},zv=Qv&&Qv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),Kv=Qv&&Qv.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xv=Qv&&Qv.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&zv(t,e,r);return Kv(t,e),t},Yv=Qv&&Qv.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qv,"__esModule",{value:!0});var Jv=void 0;Qv.sqltoolsResolve=Jv;var Zv={},ey=Zv&&Zv.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zv,"__esModule",{value:!0}),process.env.DEBUG_HIDE_DATE="1";var ty,ry,ny,iy,sy,oy,ay,cy=!1;function uy(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}function ly(){ty={},oy=7*(sy=24*(iy=60*(ny=60*(ry=1e3)))),ay=365.25*sy,ty=function(e,t){t=t||{};var r,n,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*ay;case"weeks":case"week":case"w":return r*oy;case"days":case"day":case"d":return r*sy;case"hours":case"hour":case"hrs":case"hr":case"h":return r*iy;case"minutes":case"minute":case"mins":case"min":case"m":return r*ny;case"seconds":case"second":case"secs":case"sec":case"s":return r*ry;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===i&&isFinite(e))return t.long?(r=e,(n=Math.abs(r))>=sy?uy(r,n,sy,"day"):n>=iy?uy(r,n,iy,"hour"):n>=ny?uy(r,n,ny,"minute"):n>=ry?uy(r,n,ry,"second"):r+" ms"):function(e){var t=Math.abs(e);return t>=sy?Math.round(e/sy)+"d":t>=iy?Math.round(e/iy)+"h":t>=ny?Math.round(e/ny)+"m":t>=ry?Math.round(e/ry)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}var hy,dy=!1;function py(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let s;function o(...e){if(!o.enabled)return;const t=o,n=Number(new Date),i=n-(s||n);t.diff=i,t.prev=s,t.curr=n,s=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;a++;const s=r.formatters[i];if("function"==typeof s){const r=e[a];n=s.call(t,r),e.splice(a,1),a--}return n}),r.formatArgs.call(t,e);(t.log||r.log).apply(t,e)}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=n,o.extend=i,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function n(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(s),...r.skips.map(s).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=(cy||(cy=!0,ly()),ty),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}function fy(){return dy||(dy=!0,hy={},hy=py),hy}var my,gy,vy,yy,Ey,_y,Ry,Cy,Ty=!1;function wy(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function by(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+my.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))}),e.splice(n,0,t)}function Sy(...e){return"object"==typeof console&&console.log&&console.log(...e)}function Ay(e){try{e?my.storage.setItem("debug",e):my.storage.removeItem("debug")}catch(e){}}function Ny(){let e;try{e=my.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}function Oy(){(my={}).log=Sy,gy=by,my.formatArgs=gy,vy=Ay,my.save=vy,yy=Ny,my.load=yy,Ey=wy,my.useColors=Ey,_y=function(){try{return localStorage}catch(e){}}(),my.storage=_y,Ry=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],my.colors=Ry,my=fy()(my),({formatters:Cy}=my),Cy.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}var Py,Iy=!1;function Dy(){return Iy||(Iy=!0,Py={},Py=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)}),Py}var ky,My,xy,Ly,qy,Fy=!1;function jy(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(0===qy)return 0;if(xy("color=16m")||xy("color=full")||xy("color=truecolor"))return 3;if(xy("color=256"))return 2;if(e&&!e.isTTY&&void 0===qy)return 0;const t=qy||0;if("dumb"===Ly.TERM)return t;if("win32"===process.platform){const e=My.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in Ly)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in Ly)||"codeship"===Ly.CI_NAME?1:t;if("TEAMCITY_VERSION"in Ly)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ly.TEAMCITY_VERSION)?1:0;if("truecolor"===Ly.COLORTERM)return 3;if("TERM_PROGRAM"in Ly){const e=parseInt((Ly.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ly.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ly.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ly.TERM)||"COLORTERM"in Ly?1:t}(e))}function By(){return Fy||(Fy=!0,ky={},My=r,xy=Dy(),({env:Ly}=process),xy("no-color")||xy("no-colors")||xy("color=false")||xy("color=never")?qy=0:(xy("color")||xy("colors")||xy("color=true")||xy("color=always"))&&(qy=1),"FORCE_COLOR"in Ly&&(qy=!0===Ly.FORCE_COLOR||"true"===Ly.FORCE_COLOR?1:!1===Ly.FORCE_COLOR||"false"===Ly.FORCE_COLOR?0:0===Ly.FORCE_COLOR.length?1:Math.min(parseInt(Ly.FORCE_COLOR,10),3)),ky={supportsColor:jy,stdout:jy(process.stdout),stderr:jy(process.stderr)}),ky}var Wy,Uy,$y,Hy,Vy,Gy,Qy,zy,Ky,Xy,Yy,Jy=!1;function Zy(){return"colors"in Wy.inspectOpts?Boolean(Wy.inspectOpts.colors):Uy.isatty(process.stderr.fd)}function eE(e){const{namespace:t,useColors:r}=this;if(r){const r=this.color,n="[3"+(r<8?r:"8;5;"+r),i=`  ${n};1m${t} [0m`;e[0]=i+e[0].split("\n").join("\n"+i),e.push(n+"m+"+Wy.humanize(this.diff)+"[0m")}else e[0]=function(){if(Wy.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+t+" "+e[0]}function tE(...e){return process.stderr.write($y.format(...e)+"\n")}function rE(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function nE(){return process.env.DEBUG}function iE(e){e.inspectOpts={};const t=Object.keys(Wy.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Wy.inspectOpts[t[r]]}var sE={};"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?(Ty||(Ty=!0,Oy()),sE=my):(Jy||(Jy=!0,function(){Uy=e,$y=v,(Wy={}).init=iE,Hy=tE,Wy.log=Hy,Vy=eE,Wy.formatArgs=Vy,Gy=rE,Wy.save=Gy,Qy=nE,Wy.load=Qy,zy=Zy,Wy.useColors=zy,Ky=[6,2,3,4,5,1],Wy.colors=Ky;try{const e=By();e&&(e.stderr||e).level>=2&&(Ky=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221],Wy.colors=Ky)}catch(e){}Xy=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),Wy.inspectOpts=Xy,Wy=fy()(Wy),({formatters:Yy}=Wy),Yy.o=function(e){return this.inspectOpts.colors=this.useColors,$y.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},Yy.O=function(e){return this.inspectOpts.colors=this.useColors,$y.inspect(e,this.inspectOpts)}}()),sE=Wy);const oE=ey(sE);oE.default.enable("development"===process.env.NODE_ENV?"*,-babel*":"*,-babel*,-*:debug,-*:*:debug,-*:*:*:debug,-*:*:*:*:debug,-*:*:*:*:*:debug"),oE.default.formatArgs=function(e){e[0]=`['${this.namespace}'] ${e[0]}`},oE.default.log=console.log.bind(console);var aE=oE.default("driver");Zv.default=aE;const cE=Yv(Zv);var uE={};const lE=h,hE=r,dE=hE.homedir(),pE=hE.tmpdir(),{env:fE}=process,mE=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected string, got "+typeof e);return(t=Object.assign({suffix:"nodejs"},t)).suffix&&(e+="-"+t.suffix),"darwin"===process.platform?(e=>{const t=lE.join(dE,"Library");return{data:lE.join(t,"Application Support",e),config:lE.join(t,"Preferences",e),cache:lE.join(t,"Caches",e),log:lE.join(t,"Logs",e),temp:lE.join(pE,e)}})(e):"win32"===process.platform?(e=>{const t=fE.APPDATA||lE.join(dE,"AppData","Roaming"),r=fE.LOCALAPPDATA||lE.join(dE,"AppData","Local");return{data:lE.join(r,e,"Data"),config:lE.join(t,e,"Config"),cache:lE.join(r,e,"Cache"),log:lE.join(r,e,"Log"),temp:lE.join(pE,e)}})(e):(e=>{const t=lE.basename(dE);return{data:lE.join(fE.XDG_DATA_HOME||lE.join(dE,".local","share"),e),config:lE.join(fE.XDG_CONFIG_HOME||lE.join(dE,".config"),e),cache:lE.join(fE.XDG_CACHE_HOME||lE.join(dE,".cache"),e),log:lE.join(fE.XDG_STATE_HOME||lE.join(dE,".local","state"),e),temp:lE.join(pE,t,e)}})(e)};(uE=mE).default=mE;const gE=Yv(uE),vE=Yv(h),yE=Yv(u);var EE,_E,RE={},CE=u,TE=h;_E=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var t=(new Error).stack;return Error.prepareStackTrace=e,t[2].getFileName()};var wE,bE,SE,AE,NE,OE,PE,IE,DE,kE,ME=h,xE=!1;function LE(){bE={},SE="win32"===process.platform,AE=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,NE=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,(OE={}).parse=function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,r,n,i,s,o=(t=e,r=AE.exec(t),n=(r[1]||"")+(r[2]||""),i=r[3]||"",s=NE.exec(i),[n,s[1],s[2],s[3]]);if(!o||4!==o.length)throw new TypeError("Invalid path '"+e+"'");return{root:o[0],dir:o[0]+o[1].slice(0,-1),base:o[2],ext:o[3],name:o[2].slice(0,o[2].length-o[3].length)}},PE=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,(IE={}).parse=function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,r=(t=e,PE.exec(t).slice(1));if(!r||4!==r.length)throw new TypeError("Invalid path '"+e+"'");return r[1]=r[1]||"",r[2]=r[2]||"",r[3]=r[3]||"",{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}},bE=SE?OE.parse:IE.parse,DE=IE.parse,bE.posix=DE,kE=OE.parse,bE.win32=kE}var qE=ME.parse||(xE||(xE=!0,LE()),bE),FE=function(e,t){var r="/";/^([A-Za-z]:)/.test(e)?r="":/^\\\\/.test(e)&&(r="\\\\");for(var n=[e],i=qE(e);i.dir!==n[n.length-1];)n.push(i.dir),i=qE(i.dir);return n.reduce((function(e,n){return e.concat(t.map((function(e){return ME.resolve(r,n,e)})))}),[])};wE=function(e,t,r){var n=t&&t.moduleDirectory?[].concat(t.moduleDirectory):["node_modules"];if(t&&"function"==typeof t.paths)return t.paths(r,e,(function(){return FE(e,n)}),t);var i=FE(e,n);return t&&t.paths?i.concat(t.paths):i};var jE;jE=function(e,t){return t||{}};var BE,WE,UE=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function $E(e){for(var t=e.split(" "),r=t.length>1?t[0]:"=",n=(t.length>1?t[1]:t[0]).split("."),i=0;i<3;++i){var s=Number(UE[i]||0),o=Number(n[i]||0);if(s!==o)return"<"===r?s<o:">="===r&&s>=o}return">="===r}function HE(e){var t=e.split(/ ?&& ?/);if(0===t.length)return!1;for(var r=0;r<t.length;++r)if(!$E(t[r]))return!1;return!0}function VE(e){if("boolean"==typeof e)return e;if(e&&"object"==typeof e){for(var t=0;t<e.length;++t)if(HE(e[t]))return!0;return!1}return HE(e)}var GE;GE=JSON.parse('{"assert":true,"async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"dns":true,"domain":true,"events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"string_decoder":true,"sys":true,"timers":true,"_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}');var QE={};for(var zE in GE)Object.prototype.hasOwnProperty.call(GE,zE)&&(QE[zE]=VE(GE[zE]));WE=QE,BE=function(e){return Object.prototype.hasOwnProperty.call(WE,e)};var KE=CE.realpath&&"function"==typeof CE.realpath.native?CE.realpath.native:CE.realpath,XE=function(e,t){CE.stat(e,(function(e,r){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,r.isFile()||r.isFIFO())}))},YE=function(e,t){CE.stat(e,(function(e,r){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,r.isDirectory())}))},JE=function(e,t){KE(e,(function(r,n){r&&"ENOENT"!==r.code?t(r):t(null,r?e:n)}))},ZE=function(e,t,r,n){r&&!1===r.preserveSymlinks?e(t,n):n(null,t)};(EE=function(e,t,r){var n=r,i=t;if("function"==typeof t&&(n=i,i={}),"string"!=typeof e){var s=new TypeError("Path must be a string.");return process.nextTick((function(){n(s)}))}var o=(i=jE(0,i)).isFile||XE,a=i.isDirectory||YE,c=i.readFile||CE.readFile,u=i.realpath||JE,l=i.packageIterator,h=i.extensions||[".js"],d=i.basedir||TE.dirname(_E()),p=i.filename||d;i.paths=i.paths||[];var f,m=TE.resolve(d);function g(t,r,s){t?n(t):r?n(null,r,s):y(f,(function(t,r,s){if(t)n(t);else if(r)ZE(u,r,i,(function(e,t){e?n(e):n(null,t,s)}));else{var o=new Error("Cannot find module '"+e+"' from '"+p+"'");o.code="MODULE_NOT_FOUND",n(o)}}))}function v(e,t,r){var n=t,s=r;"function"==typeof n&&(s=n,n=void 0),function e(t,r,n){if(0===t.length)return s(null,void 0,n);var a=r+t[0],l=n;l?d(null,l):function e(t,r){if(""===t||"/"===t)return r(null);if("win32"===process.platform&&/^\w:[/\\]*$/.test(t))return r(null);if(/[/\\]node_modules[/\\]*$/.test(t))return r(null);ZE(u,t,i,(function(n,s){if(n)return e(TE.dirname(t),r);var a=TE.join(s,"package.json");o(a,(function(n,s){if(!s)return e(TE.dirname(t),r);c(a,(function(e,n){e&&r(e);try{var s=JSON.parse(n)}catch(e){}s&&i.packageFilter&&(s=i.packageFilter(s,a)),r(null,s,t)}))}))}))}(TE.dirname(a),d);function d(n,c,u){if(l=c,n)return s(n);if(u&&l&&i.pathFilter){var d=TE.relative(u,a),f=d.slice(0,d.length-t[0].length),m=i.pathFilter(l,r,f);if(m)return e([""].concat(h.slice()),TE.resolve(u,m),l)}o(a,p)}function p(n,i){return n?s(n):i?s(null,a,l):void e(t.slice(1),r,l)}}([""].concat(h),e,n)}function y(e,t,r){var n=r,s=t;"function"==typeof s&&(n=s,s=i.package),ZE(u,e,i,(function(t,r){if(t)return n(t);var a=TE.join(r,"package.json");o(a,(function(t,r){return t?n(t):r?void c(a,(function(t,r){if(t)return n(t);try{var s=JSON.parse(r)}catch(e){}if(s&&i.packageFilter&&(s=i.packageFilter(s,a)),s&&s.main){if("string"!=typeof s.main){var o=new TypeError("package “"+s.name+"” `main` must be a string");return o.code="INVALID_PACKAGE_MAIN",n(o)}return"."!==s.main&&"./"!==s.main||(s.main="index"),void v(TE.resolve(e,s.main),s,(function(t,r,i){return t?n(t):r?n(null,r,i):i?void y(TE.resolve(e,i.main),i,(function(t,r,i){return t?n(t):r?n(null,r,i):void v(TE.join(e,"index"),i,n)})):v(TE.join(e,"index"),i,n)}))}v(TE.join(e,"/index"),s,n)})):v(TE.join(e,"index"),s,n)}))}))}ZE(u,m,i,(function(t,r){t?n(t):function(t){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))f=TE.resolve(t,e),"."!==e&&".."!==e&&"/"!==e.slice(-1)||(f+="/"),/\/$/.test(e)&&f===t?y(f,i.package,g):v(f,i.package,g);else{if(BE(e))return n(null,e);!function(e,t,r){var n=function(){return function(e,t,r){for(var n=wE(t,r,e),i=0;i<n.length;i++)n[i]=TE.join(n[i],e);return n}(e,t,i)};!function e(t,r){if(0===r.length)return t(null,void 0);var n=r[0];function s(s,a){return s?t(s):a?void v(n,i.package,o):e(t,r.slice(1))}function o(e,r,s){return e?t(e):r?t(null,r,s):void y(n,i.package,c)}function c(n,i,s){return n?t(n):i?t(null,i,s):void e(t,r.slice(1))}a(TE.dirname(n),s)}(r,l?l(e,t,n,i):n())}(e,t,(function(t,r,s){if(t)n(t);else{if(r)return ZE(u,r,i,(function(e,t){e?n(e):n(null,t,s)}));var o=new Error("Cannot find module '"+e+"' from '"+p+"'");o.code="MODULE_NOT_FOUND",n(o)}}))}}(r)}))}).core=WE,EE.isCore=BE;var e_=u,t_=h,r_=e_.realpathSync&&"function"==typeof e_.realpathSync.native?e_.realpathSync.native:e_.realpathSync,n_=function(e){try{var t=e_.statSync(e)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return t.isFile()||t.isFIFO()},i_=function(e){try{var t=e_.statSync(e)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return t.isDirectory()},s_=function(e){try{return r_(e)}catch(e){if("ENOENT"!==e.code)throw e}return e},o_=function(e,t,r){return r&&!1===r.preserveSymlinks?e(t):t};EE.sync=function(e,t){if("string"!=typeof e)throw new TypeError("Path must be a string.");var r=jE(0,t),n=r.isFile||n_,i=r.readFileSync||e_.readFileSync,s=r.isDirectory||i_,o=r.realpathSync||s_,a=r.packageIterator,c=r.extensions||[".js"],u=r.basedir||t_.dirname(_E()),l=r.filename||u;r.paths=r.paths||[];var h=o_(o,t_.resolve(u),r);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e)){var d=t_.resolve(h,e);"."!==e&&".."!==e&&"/"!==e.slice(-1)||(d+="/");var p=g(d)||v(d);if(p)return o_(o,p,r)}else{if(BE(e))return e;var f=function(e,t){for(var n=function(){return function(e,t,r){for(var n=wE(t,r,e),i=0;i<n.length;i++)n[i]=t_.join(n[i],e);return n}(e,t,r)},i=a?a(e,t,n,r):n(),o=0;o<i.length;o++){var c=i[o];if(s(t_.dirname(c))){var u=g(c);if(u)return u;var l=v(c);if(l)return l}}}(e,h);if(f)return o_(o,f,r)}var m=new Error("Cannot find module '"+e+"' from '"+l+"'");throw m.code="MODULE_NOT_FOUND",m;function g(e){var t=function e(t){if(""===t||"/"===t)return;if("win32"===process.platform&&/^\w:[/\\]*$/.test(t))return;if(/[/\\]node_modules[/\\]*$/.test(t))return;var s=t_.join(o_(o,t,r),"package.json");if(!n(s))return e(t_.dirname(t));var a=i(s);try{var c=JSON.parse(a)}catch(e){}c&&r.packageFilter&&(c=r.packageFilter(c,t));return{pkg:c,dir:t}}(t_.dirname(e));if(t&&t.dir&&t.pkg&&r.pathFilter){var s=t_.relative(t.dir,e),a=r.pathFilter(t.pkg,e,s);a&&(e=t_.resolve(t.dir,a))}if(n(e))return e;for(var u=0;u<c.length;u++){var l=e+c[u];if(n(l))return l}}function v(e){var t=t_.join(o_(o,e,r),"/package.json");if(n(t)){try{var s=i(t,"UTF8"),a=JSON.parse(s)}catch(e){}if(a&&r.packageFilter&&(a=r.packageFilter(a,e)),a&&a.main){if("string"!=typeof a.main){var c=new TypeError("package “"+a.name+"” `main` must be a string");throw c.code="INVALID_PACKAGE_MAIN",c}"."!==a.main&&"./"!==a.main||(a.main="index");try{var u=g(t_.resolve(e,a.main));if(u)return u;var l=v(t_.resolve(e,a.main));if(l)return l}catch(e){}}}return g(t_.join(e,"/index"))}},RE=EE;var a_={};const c_=u,u_=h,{promisify:l_}=v;var h_,d_,p_,f_,m_,g_={};h_=g_=O_,m_="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){};g_.SEMVER_SPEC_VERSION="2.0.0";var v_=Number.MAX_SAFE_INTEGER||9007199254740991,y_=(d_=[],g_.re=d_),E_=(p_=[],g_.src=p_),__=(f_={},g_.tokens=f_),R_=0;function C_(e){__[e]=R_++}C_("NUMERICIDENTIFIER"),E_[__.NUMERICIDENTIFIER]="0|[1-9]\\d*",C_("NUMERICIDENTIFIERLOOSE"),E_[__.NUMERICIDENTIFIERLOOSE]="[0-9]+",C_("NONNUMERICIDENTIFIER"),E_[__.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",C_("MAINVERSION"),E_[__.MAINVERSION]="("+E_[__.NUMERICIDENTIFIER]+")\\.("+E_[__.NUMERICIDENTIFIER]+")\\.("+E_[__.NUMERICIDENTIFIER]+")",C_("MAINVERSIONLOOSE"),E_[__.MAINVERSIONLOOSE]="("+E_[__.NUMERICIDENTIFIERLOOSE]+")\\.("+E_[__.NUMERICIDENTIFIERLOOSE]+")\\.("+E_[__.NUMERICIDENTIFIERLOOSE]+")",C_("PRERELEASEIDENTIFIER"),E_[__.PRERELEASEIDENTIFIER]="(?:"+E_[__.NUMERICIDENTIFIER]+"|"+E_[__.NONNUMERICIDENTIFIER]+")",C_("PRERELEASEIDENTIFIERLOOSE"),E_[__.PRERELEASEIDENTIFIERLOOSE]="(?:"+E_[__.NUMERICIDENTIFIERLOOSE]+"|"+E_[__.NONNUMERICIDENTIFIER]+")",C_("PRERELEASE"),E_[__.PRERELEASE]="(?:-("+E_[__.PRERELEASEIDENTIFIER]+"(?:\\."+E_[__.PRERELEASEIDENTIFIER]+")*))",C_("PRERELEASELOOSE"),E_[__.PRERELEASELOOSE]="(?:-?("+E_[__.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+E_[__.PRERELEASEIDENTIFIERLOOSE]+")*))",C_("BUILDIDENTIFIER"),E_[__.BUILDIDENTIFIER]="[0-9A-Za-z-]+",C_("BUILD"),E_[__.BUILD]="(?:\\+("+E_[__.BUILDIDENTIFIER]+"(?:\\."+E_[__.BUILDIDENTIFIER]+")*))",C_("FULL"),C_("FULLPLAIN"),E_[__.FULLPLAIN]="v?"+E_[__.MAINVERSION]+E_[__.PRERELEASE]+"?"+E_[__.BUILD]+"?",E_[__.FULL]="^"+E_[__.FULLPLAIN]+"$",C_("LOOSEPLAIN"),E_[__.LOOSEPLAIN]="[v=\\s]*"+E_[__.MAINVERSIONLOOSE]+E_[__.PRERELEASELOOSE]+"?"+E_[__.BUILD]+"?",C_("LOOSE"),E_[__.LOOSE]="^"+E_[__.LOOSEPLAIN]+"$",C_("GTLT"),E_[__.GTLT]="((?:<|>)?=?)",C_("XRANGEIDENTIFIERLOOSE"),E_[__.XRANGEIDENTIFIERLOOSE]=E_[__.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",C_("XRANGEIDENTIFIER"),E_[__.XRANGEIDENTIFIER]=E_[__.NUMERICIDENTIFIER]+"|x|X|\\*",C_("XRANGEPLAIN"),E_[__.XRANGEPLAIN]="[v=\\s]*("+E_[__.XRANGEIDENTIFIER]+")(?:\\.("+E_[__.XRANGEIDENTIFIER]+")(?:\\.("+E_[__.XRANGEIDENTIFIER]+")(?:"+E_[__.PRERELEASE]+")?"+E_[__.BUILD]+"?)?)?",C_("XRANGEPLAINLOOSE"),E_[__.XRANGEPLAINLOOSE]="[v=\\s]*("+E_[__.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+E_[__.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+E_[__.XRANGEIDENTIFIERLOOSE]+")(?:"+E_[__.PRERELEASELOOSE]+")?"+E_[__.BUILD]+"?)?)?",C_("XRANGE"),E_[__.XRANGE]="^"+E_[__.GTLT]+"\\s*"+E_[__.XRANGEPLAIN]+"$",C_("XRANGELOOSE"),E_[__.XRANGELOOSE]="^"+E_[__.GTLT]+"\\s*"+E_[__.XRANGEPLAINLOOSE]+"$",C_("COERCE"),E_[__.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",C_("COERCERTL"),y_[__.COERCERTL]=new RegExp(E_[__.COERCE],"g"),C_("LONETILDE"),E_[__.LONETILDE]="(?:~>?)",C_("TILDETRIM"),E_[__.TILDETRIM]="(\\s*)"+E_[__.LONETILDE]+"\\s+",y_[__.TILDETRIM]=new RegExp(E_[__.TILDETRIM],"g");C_("TILDE"),E_[__.TILDE]="^"+E_[__.LONETILDE]+E_[__.XRANGEPLAIN]+"$",C_("TILDELOOSE"),E_[__.TILDELOOSE]="^"+E_[__.LONETILDE]+E_[__.XRANGEPLAINLOOSE]+"$",C_("LONECARET"),E_[__.LONECARET]="(?:\\^)",C_("CARETTRIM"),E_[__.CARETTRIM]="(\\s*)"+E_[__.LONECARET]+"\\s+",y_[__.CARETTRIM]=new RegExp(E_[__.CARETTRIM],"g");C_("CARET"),E_[__.CARET]="^"+E_[__.LONECARET]+E_[__.XRANGEPLAIN]+"$",C_("CARETLOOSE"),E_[__.CARETLOOSE]="^"+E_[__.LONECARET]+E_[__.XRANGEPLAINLOOSE]+"$",C_("COMPARATORLOOSE"),E_[__.COMPARATORLOOSE]="^"+E_[__.GTLT]+"\\s*("+E_[__.LOOSEPLAIN]+")$|^$",C_("COMPARATOR"),E_[__.COMPARATOR]="^"+E_[__.GTLT]+"\\s*("+E_[__.FULLPLAIN]+")$|^$",C_("COMPARATORTRIM"),E_[__.COMPARATORTRIM]="(\\s*)"+E_[__.GTLT]+"\\s*("+E_[__.LOOSEPLAIN]+"|"+E_[__.XRANGEPLAIN]+")",y_[__.COMPARATORTRIM]=new RegExp(E_[__.COMPARATORTRIM],"g");C_("HYPHENRANGE"),E_[__.HYPHENRANGE]="^\\s*("+E_[__.XRANGEPLAIN]+")\\s+-\\s+("+E_[__.XRANGEPLAIN]+")\\s*$",C_("HYPHENRANGELOOSE"),E_[__.HYPHENRANGELOOSE]="^\\s*("+E_[__.XRANGEPLAINLOOSE]+")\\s+-\\s+("+E_[__.XRANGEPLAINLOOSE]+")\\s*$",C_("STAR"),E_[__.STAR]="(<|>)?=?\\s*\\*";for(var T_=0;T_<R_;T_++)m_(T_,E_[T_]),y_[T_]||(y_[T_]=new RegExp(E_[T_]));var w_=b_;function b_(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof O_)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?y_[__.LOOSE]:y_[__.FULL]).test(e))return null;try{return new O_(e,t)}catch(e){return null}}g_.parse=w_;var S_=function(e,t){var r=b_(e,t);return r?r.version:null};g_.valid=S_;var A_=function(e,t){var r=b_(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};g_.clean=A_;var N_=O_;function O_(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof O_){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof O_))return new O_(e,t);m_("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?y_[__.LOOSE]:y_[__.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>v_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>v_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>v_||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<v_)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}g_.SemVer=N_,O_.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},O_.prototype.toString=function(){return this.version},O_.prototype.compare=function(e){return m_("SemVer.compare",this.version,this.options,e),e instanceof O_||(e=new O_(e,this.options)),this.compareMain(e)||this.comparePre(e)},O_.prototype.compareMain=function(e){return e instanceof O_||(e=new O_(e,this.options)),M_(this.major,e.major)||M_(this.minor,e.minor)||M_(this.patch,e.patch)},O_.prototype.comparePre=function(e){if(e instanceof O_||(e=new O_(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(m_("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return M_(r,n)}while(++t)},O_.prototype.compareBuild=function(e){e instanceof O_||(e=new O_(e,this.options));var t=0;do{var r=this.build[t],n=e.build[t];if(m_("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return M_(r,n)}while(++t)},O_.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};var P_=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new O_(e,r).inc(t,n).version}catch(e){return null}};g_.inc=P_;var I_=function(e,t){if(Y_(e,t))return null;var r=b_(e),n=b_(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if(("major"===o||"minor"===o||"patch"===o)&&r[o]!==n[o])return i+o;return s};g_.diff=I_;var D_=M_;g_.compareIdentifiers=D_;var k_=/^[0-9]+$/;function M_(e,t){var r=k_.test(e),n=k_.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}var x_=function(e,t){return M_(t,e)};g_.rcompareIdentifiers=x_;var L_=function(e,t){return new O_(e,t).major};g_.major=L_;var q_=function(e,t){return new O_(e,t).minor};g_.minor=q_;var F_=function(e,t){return new O_(e,t).patch};g_.patch=F_;var j_=B_;function B_(e,t,r){return new O_(e,r).compare(new O_(t,r))}g_.compare=j_;var W_=function(e,t){return B_(e,t,!0)};g_.compareLoose=W_;var U_=function(e,t,r){var n=new O_(e,r),i=new O_(t,r);return n.compare(i)||n.compareBuild(i)};g_.compareBuild=U_;var $_=function(e,t,r){return B_(t,e,r)};g_.rcompare=$_;var H_=function(e,t){return e.sort((function(e,r){return h_.compareBuild(e,r,t)}))};g_.sort=H_;var V_=function(e,t){return e.sort((function(e,r){return h_.compareBuild(r,e,t)}))};g_.rsort=V_;var G_=Q_;function Q_(e,t,r){return B_(e,t,r)>0}g_.gt=G_;var z_=K_;function K_(e,t,r){return B_(e,t,r)<0}g_.lt=z_;var X_=Y_;function Y_(e,t,r){return 0===B_(e,t,r)}g_.eq=X_;var J_=Z_;function Z_(e,t,r){return 0!==B_(e,t,r)}g_.neq=J_;var eR=tR;function tR(e,t,r){return B_(e,t,r)>=0}g_.gte=eR;var rR=nR;function nR(e,t,r){return B_(e,t,r)<=0}g_.lte=rR;var iR=sR;function sR(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Y_(e,r,n);case"!=":return Z_(e,r,n);case">":return Q_(e,r,n);case">=":return tR(e,r,n);case"<":return K_(e,r,n);case"<=":return nR(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}g_.cmp=iR;var oR=aR;function aR(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof aR){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof aR))return new aR(e,t);m_("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===cR?this.value="":this.value=this.operator+this.semver.version,m_("comp",this)}g_.Comparator=oR;var cR={};aR.prototype.parse=function(e){var t=this.options.loose?y_[__.COMPARATORLOOSE]:y_[__.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new O_(r[2],this.options.loose):this.semver=cR},aR.prototype.toString=function(){return this.value},aR.prototype.test=function(e){if(m_("Comparator.test",e,this.options.loose),this.semver===cR||e===cR)return!0;if("string"==typeof e)try{e=new O_(e,this.options)}catch(e){return!1}return sR(e,this.operator,this.semver,this.options)},aR.prototype.intersects=function(e,t){if(!(e instanceof aR))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new lR(e.value,t),vR(this.value,r,t));if(""===e.operator)return""===e.value||(r=new lR(this.value,t),vR(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=sR(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=sR(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||s&&o||a||c};var uR=lR;function lR(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof lR)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new lR(e.raw,t);if(e instanceof aR)return new lR(e.value,t);if(!(this instanceof lR))return new lR(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function hR(e,t){for(var r=!0,n=e.slice(),i=n.pop();r&&n.length;)r=n.every((function(e){return i.intersects(e,t)})),i=n.pop();return r}g_.Range=uR,lR.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},lR.prototype.toString=function(){return this.range},lR.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?y_[__.HYPHENRANGELOOSE]:y_[__.HYPHENRANGE];e=e.replace(r,fR),m_("hyphen replace",e),e=e.replace(y_[__.COMPARATORTRIM],"$1$2$3"),m_("comparator trim",e,y_[__.COMPARATORTRIM]),e=(e=(e=e.replace(y_[__.TILDETRIM],"$1~")).replace(y_[__.CARETTRIM],"$1^")).split(/\s+/).join(" ");var n=t?y_[__.COMPARATORLOOSE]:y_[__.COMPARATOR],i=e.split(" ").map((function(e){return function(e,t){return m_("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){m_("caret",e,t);var r=t.loose?y_[__.CARETLOOSE]:y_[__.CARET];return e.replace(r,(function(t,r,n,i,s){var o;return m_("caret",e,t,r,n,i,s),pR(r)?o="":pR(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":pR(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":s?(m_("replaceCaret pr",s),o="0"===r?"0"===n?">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+"-"+s+" <"+(+r+1)+".0.0"):(m_("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),m_("caret return",o),o}))}(e,t)})).join(" ")}(e,t),m_("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?y_[__.TILDELOOSE]:y_[__.TILDE];return e.replace(r,(function(t,r,n,i,s){var o;return m_("tilde",e,t,r,n,i,s),pR(r)?o="":pR(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":pR(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":s?(m_("replaceTilde pr",s),o=">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",m_("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),m_("tildes",e),e=function(e,t){return m_("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?y_[__.XRANGELOOSE]:y_[__.XRANGE];return e.replace(r,(function(r,n,i,s,o,a){m_("xRange",e,r,n,i,s,o,a);var c=pR(i),u=c||pR(s),l=u||pR(o),h=l;return"="===n&&h&&(n=""),a=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(s=0),o=0,">"===n?(n=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),r=n+i+"."+s+"."+o+a):u?r=">="+i+".0.0"+a+" <"+(+i+1)+".0.0"+a:l&&(r=">="+i+"."+s+".0"+a+" <"+i+"."+(+s+1)+".0"+a),m_("xRange return",r),r}))}(e,t)})).join(" ")}(e,t),m_("xrange",e),e=function(e,t){return m_("replaceStars",e,t),e.trim().replace(y_[__.STAR],"")}(e,t),m_("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter((function(e){return!!e.match(n)}))),i=i.map((function(e){return new aR(e,this.options)}),this)},lR.prototype.intersects=function(e,t){if(!(e instanceof lR))throw new TypeError("a Range is required");return this.set.some((function(r){return hR(r,t)&&e.set.some((function(e){return hR(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))};var dR=function(e,t){return new lR(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))};function pR(e){return!e||"x"===e.toLowerCase()||"*"===e}function fR(e,t,r,n,i,s,o,a,c,u,l,h,d){return((t=pR(r)?"":pR(n)?">="+r+".0.0":pR(i)?">="+r+"."+n+".0":">="+t)+" "+(a=pR(c)?"":pR(u)?"<"+(+c+1)+".0.0":pR(l)?"<"+c+"."+(+u+1)+".0":h?"<="+c+"."+u+"."+l+"-"+h:"<="+a)).trim()}function mR(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(m_(e[n].semver),e[n].semver!==cR&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}g_.toComparators=dR,lR.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new O_(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(mR(this.set[t],e,this.options))return!0;return!1};var gR=vR;function vR(e,t,r){try{t=new lR(t,r)}catch(e){return!1}return t.test(e)}g_.satisfies=gR;var yR=function(e,t,r){var n=null,i=null;try{var s=new lR(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&-1!==i.compare(e)||(i=new O_(n=e,r)))})),n};g_.maxSatisfying=yR;var ER=function(e,t,r){var n=null,i=null;try{var s=new lR(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&1!==i.compare(e)||(i=new O_(n=e,r)))})),n};g_.minSatisfying=ER;var _R=function(e,t){e=new lR(e,t);var r=new O_("0.0.0");if(e.test(r))return r;if(r=new O_("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new O_(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Q_(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null};g_.minVersion=_R;var RR=function(e,t){try{return new lR(e,t).range||"*"}catch(e){return null}};g_.validRange=RR;var CR=function(e,t,r){return bR(e,t,"<",r)};g_.ltr=CR;var TR=function(e,t,r){return bR(e,t,">",r)};g_.gtr=TR;var wR=bR;function bR(e,t,r,n){var i,s,o,a,c;switch(e=new O_(e,n),t=new lR(t,n),r){case">":i=Q_,s=nR,o=K_,a=">",c=">=";break;case"<":i=K_,s=tR,o=Q_,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vR(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],h=null,d=null;if(l.forEach((function(e){e.semver===cR&&(e=new aR(">=0.0.0")),h=h||e,d=d||e,i(e.semver,h.semver,n)?h=e:o(e.semver,d.semver,n)&&(d=e)})),h.operator===a||h.operator===c)return!1;if((!d.operator||d.operator===a)&&s(e,d.semver))return!1;if(d.operator===c&&o(e,d.semver))return!1}return!0}g_.outside=wR;var SR=function(e,t){var r=b_(e,t);return r&&r.prerelease.length?r.prerelease:null};g_.prerelease=SR;var AR=function(e,t,r){return e=new lR(e,r),t=new lR(t,r),e.intersects(t)};g_.intersects=AR;var NR=function(e,t){if(e instanceof O_)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=y_[__.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),y_[__.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;y_[__.COERCERTL].lastIndex=-1}else r=e.match(y_[__.COERCE]);if(null===r)return null;return b_(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)};g_.coerce=NR;const OR=gR(process.version,">=10.12.0"),PR=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(u_.parse(e).root,""))){const t=new Error("Path contains invalid characters: "+e);throw t.code="EINVAL",t}}},IR=e=>({...{mode:511,fs:c_},...e}),DR=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};(a_=async(e,t)=>{PR(e),t=IR(t);const r=l_(t.fs.mkdir),n=l_(t.fs.stat);if(OR&&t.fs.mkdir===c_.mkdir){const n=u_.resolve(e);return await r(n,{mode:t.mode,recursive:!0}),n}const i=async e=>{try{return await r(e,t.mode),e}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(u_.dirname(e)===e)throw DR(e);if(t.message.includes("null bytes"))throw t;return await i(u_.dirname(e)),i(e)}try{if(!(await n(e)).isDirectory())throw new Error("The path is not a directory")}catch(e){throw t}return e}};return i(u_.resolve(e))}).sync=(e,t)=>{if(PR(e),t=IR(t),OR&&t.fs.mkdirSync===c_.mkdirSync){const r=u_.resolve(e);return c_.mkdirSync(r,{mode:t.mode,recursive:!0}),r}const r=e=>{try{t.fs.mkdirSync(e,t.mode)}catch(n){if("EPERM"===n.code)throw n;if("ENOENT"===n.code){if(u_.dirname(e)===e)throw DR(e);if(n.message.includes("null bytes"))throw n;return r(u_.dirname(e)),r(e)}try{if(!t.fs.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch(e){throw n}}return e};return r(u_.resolve(e))};const kR=Xv(a_),MR=cE.default.extend("require"),xR=gE.default("vscode-"+(process.env.EXT_NAMESPACE||"sqltools"),{suffix:null});function LR(...e){return vE.default.resolve(xR.data,...e)}yE.default.existsSync(xR.data)||(kR.sync(xR.data),MR.extend("debug")("Created data path "+xR.data)),yE.default.existsSync(LR("node_modules"))||(kR.sync(LR("node_modules")),MR.extend("debug")("Created node_modules path "+LR("node_modules"))),Jv=e=>RE.sync(e,{basedir:LR()}),Qv.sqltoolsResolve=Jv;var qR=e=>require(Qv.sqltoolsResolve(e));Qv.default=qR;const FR=So(Qv),jR=No(Zv),BR=No(h),WR=No(u);class UR{constructor(e,t){this.credentials=e,this.getWorkspaceFolders=t,this.deps=[],this.queryResults=(e,t)=>Ao(this,void 0,void 0,(function*(){const r=yield this.singleQuery(e,t);if(r.error)throw r.rawError;return r.results})),this.requireDep=e=>FR.default(e),this.resolveDep=e=>FR.sqltoolsResolve(e),this.log=jR.default.extend(e.driver.toLowerCase())}getId(){return this.credentials.id}singleQuery(e,t){return this.query(e,t).then(([e])=>e)}describeTable(e,t){return Ao(this,void 0,void 0,(function*(){const r=yield this.singleQuery(this.queries.describeTable(e),t);return r.baseQuery=this.queries.describeTable.raw,[r]}))}showRecords(e,t){return Ao(this,void 0,void 0,(function*(){const{limit:r,page:n=0}=t,i=Object.assign(Object.assign({},t),{limit:r,table:e,offset:n*r});if("function"==typeof this.queries.fetchRecords&&"function"==typeof this.queries.countRecords){const[s,o]=yield Promise.all([this.singleQuery(this.queries.fetchRecords(i),t),this.singleQuery(this.queries.countRecords(i),t)]);return s.baseQuery=this.queries.fetchRecords.raw,s.pageSize=r,s.page=n,s.total=Number(o.results[0].total),s.queryType="showRecords",s.queryParams=e,[s]}return this.query(this.queries.fetchRecords(i),t)}))}checkDependencies(){return Ao(this,void 0,void 0,(function*(){if(this.deps&&0!==this.deps.length){if(1!==Number(process.env.IS_NODE_RUNTIME||"0"))throw new jv.default;this.deps.forEach(e=>{let t=!1;switch(e.type){case UR.CONSTANTS.DEPENDENCY_PACKAGE:try{const{version:r}=JSON.parse(WR.default.readFileSync(this.resolveDep(e.name+"/package.json")).toString());if(e.version&&r!==e.version)throw t=!0,new Error("Version not matching. We need to upgrade "+e.name);this.requireDep(e.name)}catch(e){throw new Gv.default(this.deps,this.credentials,t)}}})}}))}getChildrenForItem(e){return this.log.extend("error")(`###### Attention ######getChildrenForItem not implemented for ${this.credentials.driver}\n####################`),Promise.resolve([])}searchItems(e,t,r){return this.log.extend("error")(`###### Attention ######searchItems not implemented for ${this.credentials.driver}\n####################`),Promise.resolve([])}toAbsolutePath(e){return Ao(this,void 0,void 0,(function*(){if(!BR.default.isAbsolute(e)&&/\$\{workspaceFolder:(.+)}/g.test(e)){const t=e.match(/\$\{workspaceFolder:(.+)}/)[1];if(t){const r=(yield this.getWorkspaceFolders()).find(e=>e.name===t);e=BR.default.resolve(r.uri.replace(/^(\w+):\/\//,""),e.replace(/\$\{workspaceFolder:(.+)}/g,"./"))}}return e}))}prepareMessage(e){return{message:e.toString(),date:new Date}}}var $R=UR;To.default=$R,UR.CONSTANTS={DEPENDENCY_PACKAGE:"package",DEPENDENCY_NPM_SCRIPT:"npmscript"};var HR,VR,GR,QR,zR,KR={},XR={},YR={},JR={},ZR={},eC={};zR="object"==typeof R&&R&&R.Object===Object&&R;var tC="object"==typeof self&&self&&self.Object===Object&&self;GR=(QR=zR||tC||Function("return this")()).Symbol;var rC={},nC=Object.prototype,iC=nC.hasOwnProperty,sC=nC.toString,oC=GR?GR.toStringTag:void 0;rC=function(e){var t=iC.call(e,oC),r=e[oC];try{e[oC]=void 0;var n=!0}catch(e){}var i=sC.call(e);return n&&(t?e[oC]=r:delete e[oC]),i};var aC={},cC=Object.prototype.toString;aC=function(e){return cC.call(e)};var uC=GR?GR.toStringTag:void 0;eC=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":uC&&uC in Object(e)?rC(e):aC(e)};var lC={};lC=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};ZR=function(e){if(!lC(e))return!1;var t=eC(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var hC,dC,pC={},fC=QR["__core-js_shared__"],mC=(dC=/[^.]+$/.exec((hC=fC)&&hC.keys&&hC.keys.IE_PROTO||""))?"Symbol(src)_1."+dC:"";pC=function(e){return!!mC&&mC in e};var gC={},vC=Function.prototype.toString;gC=function(e){if(null!=e){try{return vC.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var yC=/^\[object .+?Constructor\]$/,EC=Function.prototype,_C=Object.prototype,RC=EC.toString,CC=_C.hasOwnProperty,TC=RegExp("^"+RC.call(CC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");JR=function(e){return!(!lC(e)||pC(e))&&(ZR(e)?TC:yC).test(gC(e))};var wC={};wC=function(e,t){return null==e?void 0:e[t]},YR=function(e,t){var r=wC(e,t);return JR(r)?r:void 0};var bC=function(){try{var e=YR(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();XR=bC,KR=function(e,t,r){"__proto__"==t&&XR?XR(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var SC={};SC=function(e,t){return e===t||e!=e&&t!=t};var AC=Object.prototype.hasOwnProperty;VR=function(e,t,r){var n=e[t];AC.call(e,t)&&SC(n,r)&&(void 0!==r||t in e)||KR(e,t,r)};var NC={};NC=function(e,t,r){for(var n=-1,i=e.length,s=t.length,o={};++n<i;){var a=n<s?t[n]:void 0;r(o,e[n],a)}return o},HR=function(e,t){return NC(e||[],t||[],VR)};RegExp(/[\\^$.*+?()[\]{}|]/g.source);let OC;var PC;(PC=OC||(OC={})).WHITESPACE="whitespace",PC.WORD="word",PC.STRING="string",PC.RESERVED="reserved",PC.RESERVED_TOP_LEVEL="reserved-top-level",PC.RESERVED_TOP_LEVEL_NO_INDENT="reserved-top-level-no-indent",PC.RESERVED_NEWLINE="reserved-newline",PC.OPERATOR="operator",PC.NO_SPACE_OPERATOR="no-space-operator",PC.OPEN_PAREN="open-paren",PC.CLOSE_PAREN="close-paren",PC.LINE_COMMENT="line-comment",PC.BLOCK_COMMENT="block-comment",PC.NUMBER="number",PC.PLACEHOLDER="placeholder",PC.SERVERVARIABLE="servervariable";class IC{static parse(e,t="mysql"){"mssql"===t&&(e=e.replace(/^[ \t]*GO;?[ \t]*$/gim,""));for(var r=[];;){null==s&&(s=e);var n=IC.getStatements(s,t,";"),i=n[0];null!=i&&""!=i.trim()&&r.push(i);var s=n[1];if(null==s||""==s.trim())break}return r}static getStatements(e,t,r){for(var n=Array.from(e),i=null,s=null,o=!1,a=null,c=!1,u=null,l=!1,h=null,d=[],p=0;p<n.length;p++){var f=n[p];if(p>0&&(i=n[p-1]),p<n.length&&(s=n[p+1]),"\\"==i||"'"!=f&&'"'!=f||0!=c||0!=o)if(("#"==f&&" "==s||"-"==f&&"-"==s||"/"==f&&"*"==s)&&0==c)o=!0,a=f;else if(1!=o||("#"!=a&&"-"!=a||"\n"!=f)&&("/"!=a||"*"!=f||"/"!=s))if("\\"==i||f!=u||1!=c){if("d"==f.toLowerCase()&&0==o&&0==c){var m=IC.getDelimiter(p,e,t);if(null!=m){var g=m[0],v=m[1];e=e.substring(v),d=IC.getStatements(e,t,g);break}}if("$"==f&&0==o&&0==c){var y,E=e.substring(p);if(0==l)null!=(y=IC.getTag(E,t))&&(l=!0,h=y[0]);else if(null!=(y=IC.getTag(E,t)))y[0]==h&&(l=!1)}if("mssql"===t&&"g"===f.toLowerCase()&&"o"===(""+(n[p+1]||"")).toLowerCase()&&void 0!==n[p+2]&&/go\b/gi.test(`${f}${n[p+1]}${n[p+2]}`)&&(f=`${f}${n[p+1]}`),(f.toLowerCase()===r.toLowerCase()||"go"===f.toLowerCase())&&0==c&&0==o&&0==l){var _=p+1;if("mssql"===t&&"go"===f.toLowerCase()){_=p,d=IC.getQueryParts(e,_,2);break}d=IC.getQueryParts(e,_,0);break}}else c=!1,u=null;else o=!1,a=null;else c=!0,u=f}return 0==d.length&&(null!=e&&(e=e.trim()),d.push(e,null)),d}static getQueryParts(e,t,r=1){var n=e.substring(0,t),i=e.substring(t+r),s=[];return null!=n&&(n=n.trim()),s.push(n),s.push(i),s}static getDelimiter(e,t,r){if("mysql"==r){var n="delimiter ".length,i=t.substring(e);if(0==i.toLowerCase().indexOf("delimiter ")){var s=t.substring(e),o=s.indexOf("\n");-1==o&&(o=t.length);var a=(s=(s=s.substring(0,o)).substring(n)).trim();if(null!=(a=IC.clearTextUntilComment(a))){a=a.trim();var c=i.indexOf(a)+e+a.length,u=[];return u.push(a),u.push(c),u}return null}return null}}static getTag(e,t){if("pg"==t){var r=e.match(/^(\$[a-zA-Z]*\$)/i);if(null!=r&&r.length>1){var n=[],i=r[1].trim(),s=e.indexOf(i);return n.push(i),n.push(s),n}return null}}static isGoDelimiter(e,t,r){if("mssql"==e){var n=/(?:\bgo\b\s*)/i.exec(t);return null!=n&&n.index==r}}static clearTextUntilComment(e){for(var t=null,r=Array.from(e),n=null,i=0;i<r.length;i++){var s=r[i];if(i<r.length&&(t=r[i+1]),"#"==s&&" "==t||"-"==s&&"-"==t||"/"==s&&"*"==t)break;null==n&&(n=""),n+=s}return n}}var DC=IC.parse;const kC=new Uint8Array(16);function MC(){return g.randomFillSync(kC)}const xC=[];for(let e=0;e<256;++e)xC.push((e+256).toString(16).substr(1));function LC(e,t,r){const n=(e=e||{}).random||(e.rng||MC)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t){const r=t||0;return(xC[e[r+0]]+xC[e[r+1]]+xC[e[r+2]]+xC[e[r+3]]+"-"+xC[e[r+4]]+xC[e[r+5]]+"-"+xC[e[r+6]]+xC[e[r+7]]+"-"+xC[e[r+8]]+xC[e[r+9]]+"-"+xC[e[r+10]]+xC[e[r+11]]+xC[e[r+12]]+xC[e[r+13]]+xC[e[r+14]]+xC[e[r+15]]).toLowerCase()}(n)}function qC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const FC=e=>e;zs.types.setTypeParser(zs.types.builtins.TIMESTAMP||1114,FC),zs.types.setTypeParser(zs.types.builtins.TIMESTAMPTZ||1184,FC),zs.types.setTypeParser(zs.types.builtins.DATE||1082,FC);var jC=E(HR),BC=E(To);class WC extends BC{constructor(...e){super(...e),qC(this,"queries",Co),qC(this,"query",(e,t={})=>{const r=[];let n;const{requestId:i}=t;return this.open().then(async t=>{n=await t.connect(),n.on("notice",e=>r.push(this.prepareMessage(`${e.name.toUpperCase()}: ${e.message}`)));const i=await n.query({text:e.toString(),rowMode:"array"});return n.release(),i}).then(t=>{const n=function(e,t="mysql"){return DC(e,t)}(e.toString(),"pg");return Array.isArray(t)||(t=[t]),t.map((e,t)=>{const s=this.getColumnNames(e.fields||[]);return{requestId:i,resultId:LC(),connId:this.getId(),cols:s,messages:r.concat([this.prepareMessage(`${e.command} successfully executed.${"select"!==e.command.toLowerCase()&&"number"==typeof e.rowCount?` ${e.rowCount} rows were affected.`:""}`)]),query:n[t],results:this.mapRows(e.rows,s)}})}).catch(t=>(n&&n.release(),[{connId:this.getId(),requestId:i,resultId:LC(),cols:[],messages:r.concat([this.prepareMessage([t&&t.message||t,t&&"scanner_yyerror"===t.routine&&t.position?"at character "+t.position:void 0].filter(Boolean).join(" "))]),error:!0,rawError:t,query:e,results:[]}]))}),qC(this,"completionsCache",null),qC(this,"getStaticCompletions",async()=>{if(this.completionsCache)return this.completionsCache;this.completionsCache={};return(await this.queryResults("SELECT UPPER(word) AS label, UPPER(catdesc) AS desc FROM pg_get_keywords();")).forEach(e=>{this.completionsCache[e.label]={label:e.label,detail:e.label,filterText:e.label,sortText:(["SELECT","CREATE","UPDATE","DELETE"].includes(e.label)?"2:":"")+e.label,documentation:{value:`\`\`\`yaml\nWORD: ${e.label}\nTYPE: ${e.desc}\n\`\`\``,kind:"markdown"}}}),this.completionsCache})}async open(){if(this.connection)return this.connection;try{const e=this.credentials.pgOptions||{};let t={connectionTimeoutMillis:1e3*Number(""+(this.credentials.connectionTimeout||0)),...e};t=this.credentials.connectString?{connectionString:this.credentials.connectString,...t}:{database:this.credentials.database,host:this.credentials.server,password:this.credentials.password,port:this.credentials.port,user:this.credentials.username,...t},t.ssl&&"object"==typeof t.ssl&&["ca","key","cert","pfx"].forEach(e=>{t.ssl[e]&&(this.log.extend("info")("Reading file "+t.ssl[e].replace(/^file:\/\//,"")),t.ssl[e]=l.readFileSync(t.ssl[e].replace(/^file:\/\//,"")).toString())});const r=new zs.Pool(t);return(await r.connect()).release(),this.connection=Promise.resolve(r),this.connection}catch(e){return Promise.reject(e)}}async close(){if(!this.connection)return Promise.resolve();const e=await this.connection;this.connection=null,e.end()}getColumnNames(e){return e.reduce((e,{name:t})=>{const r=e.filter(e=>e===t).length;return e.concat(r>0?`${t} (${r})`:t)},[])}mapRows(e,t){return e.map(e=>jC(t,e))}async getColumns(e){return(await this.queryResults(this.queries.fetchColumns(e))).map(t=>({...t,iconName:t.isPk?"pk":t.isFk?"fk":null,childType:ao.ContextValue.NO_CHILD,table:e}))}async testConnection(){const e=await this.open(),t=await e.connect();await t.query("SELECT 1"),t.release()}async getChildrenForItem({item:e,parent:t}){switch(e.type){case ao.ContextValue.CONNECTION:case ao.ContextValue.CONNECTED_CONNECTION:return this.queryResults(this.queries.fetchDatabases());case ao.ContextValue.TABLE:case ao.ContextValue.VIEW:case ao.ContextValue.MATERIALIZED_VIEW:return this.getColumns(e);case ao.ContextValue.DATABASE:return[{label:"Schemas",type:ao.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:ao.ContextValue.SCHEMA}];case ao.ContextValue.RESOURCE_GROUP:return this.getChildrenForGroup({item:e,parent:t});case ao.ContextValue.SCHEMA:return[{label:"Tables",type:ao.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:ao.ContextValue.TABLE},{label:"Views",type:ao.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:ao.ContextValue.VIEW},{label:"Materialized Views",type:ao.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:ao.ContextValue.MATERIALIZED_VIEW},{label:"Functions",type:ao.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:ao.ContextValue.FUNCTION}]}return[]}async getChildrenForGroup({parent:e,item:t}){switch(t.childType){case ao.ContextValue.SCHEMA:return this.queryResults(this.queries.fetchSchemas(e));case ao.ContextValue.TABLE:return this.queryResults(this.queries.fetchTables(e));case ao.ContextValue.VIEW:return this.queryResults(this.queries.fetchViews(e));case ao.ContextValue.MATERIALIZED_VIEW:return this.queryResults(this.queries.fetchMaterializedViews(e));case ao.ContextValue.FUNCTION:return this.queryResults(this.queries.fetchFunctions(e))}return[]}searchItems(e,t,r={}){switch(e){case ao.ContextValue.TABLE:return this.queryResults(this.queries.searchTables({search:t}));case ao.ContextValue.COLUMN:return this.queryResults(this.queries.searchColumns({search:t,...r}))}}}const UC=[{displayName:"PostgreSQL",value:"PostgreSQL"},{displayName:"AWS Redshift",value:"AWS Redshift"}],$C={register(e){UC.forEach(({value:t})=>{e.getContext().drivers.set(t,WC)})}};exports.default=$C;
//# sourceMappingURL=plugin.js.map
