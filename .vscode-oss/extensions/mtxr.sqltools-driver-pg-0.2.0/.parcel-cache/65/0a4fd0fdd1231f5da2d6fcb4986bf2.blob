var e=require("vscode"),t=require("tty"),r=require("vm"),n=require("child_process"),i=require("os"),s=require("tls"),o=require("assert"),a=require("net"),c=require("dns"),u=require("url"),l=require("fs"),h=l,f=T(l),d=require("path"),p=d,m=T(d),g=require("string_decoder"),y=require("stream"),v=require("crypto"),b=v,_=T(v),E=require("util"),w=require("events");function T(e){return e&&e.__esModule?e.default:e}function R(e){Object.defineProperty(e,"__esModule",{value:!0})}var S,C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},O=w.EventEmitter,k=E,N={};N={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var A,P=function(e,t){return new I(e,t).parse()};class I{constructor(e,t){this.source=e,this.transform=t||L,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(e){var t,r,n;for(this.consumeDimensions();!this.isEof();)if("{"!==(t=this.nextCharacter()).value||n){if("}"!==t.value||n)'"'!==t.value||t.escaped?","!==t.value||n?this.record(t.value):this.newEntry():(n&&this.newEntry(!0),n=!n);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new I(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}}function L(e){return e}var M;M={create:function(e,t){return{parse:function(){return P(e,t)}}}};var x,D=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,q=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,j=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,F=/^-?infinity$/;function $(e){return-(e-1)}function B(e){return e>=0&&e<100}x=function(e){if(F.test(e))return Number(e.replace("i","I"));var t=D.exec(e);if(!t)return function(e){var t=q.exec(e);if(!t)return;var r=parseInt(t[1],10);t[4]&&(r=$(r));var n=parseInt(t[2],10)-1,i=t[3],s=new Date(r,n,i);B(r)&&s.setFullYear(r);return s}(e)||null;var r=!!t[8],n=parseInt(t[1],10);r&&(n=$(n));var i,s=parseInt(t[2],10)-1,o=t[3],a=parseInt(t[4],10),c=parseInt(t[5],10),u=parseInt(t[6],10),l=t[7];l=l?Math.round(1e3*parseFloat(l)):0;var h=function(e){var t=j.exec(e.split(" ")[1]);if(!t)return;var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}(e);return null!=h?(i=new Date(Date.UTC(n,s,o,a,c,u,l)),B(n)&&i.setUTCFullYear(n),i.setTime(i.getTime()-h)):(i=new Date(n,s,o,a,c,u,l),B(n)&&i.setFullYear(n)),i};var U={},H={};H=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)W.call(r,n)&&(e[n]=r[n])}return e};var W=Object.prototype.hasOwnProperty;function G(e){if(!(this instanceof G))return new G(e);H(this,function(e){if(!e)return{};var t=J.exec(e),r="-"===t[8];return Object.keys(Y).reduce((function(e,n){var i,s,o=t[Y[n]];return o&&(o="milliseconds"===n?(s=(i=o)+"000000".slice(i.length),parseInt(s,10)/1e3):parseInt(o,10))?(r&&~X.indexOf(n)&&(o*=-1),e[n]=o,e):e}),{})}(e))}U=G;var V=["seconds","minutes","hours","days","months","years"];G.prototype.toPostgres=function(){var e=V.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var z={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Q=["years","months","days"],K=["hours","minutes","seconds"];G.prototype.toISOString=G.prototype.toISO=function(){return"P"+Q.map(e,this).join("")+"T"+K.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+z[e]}};var J=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),Y={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},X=["hours","minutes","seconds","milliseconds"];var Z;function ee(e){return function(t){return null===t?t:e(t)}}function te(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function re(e){return e?P(e,te):null}function ne(e){return parseInt(e,10)}function ie(e){return e?P(e,ee(ne)):null}function se(e){return e?P(e,ee((function(e){return de(e).trim()}))):null}Z=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")};var oe=function(e){return e?M.create(e,(function(e){return null!==e&&(e=me(e)),e})).parse():null},ae=function(e){return e?M.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},ce=function(e){return e?M.create(e).parse():null},ue=function(e){return e?M.create(e,(function(e){return null!==e&&(e=x(e)),e})).parse():null},le=function(e){return e?M.create(e,(function(e){return null!==e&&(e=U(e)),e})).parse():null},he=function(e){return e?P(e,ee(Z)):null},fe=function(e){return parseInt(e,10)},de=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},pe=function(e){return e?P(e,ee(JSON.parse)):null},me=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},ge=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=me(t);return s.radius=parseFloat(r),s};A={init:function(e){e(20,de),e(21,fe),e(23,fe),e(26,fe),e(700,parseFloat),e(701,parseFloat),e(16,te),e(1082,x),e(1114,x),e(1184,x),e(600,me),e(651,ce),e(718,ge),e(1e3,re),e(1001,he),e(1005,ie),e(1007,ie),e(1028,ie),e(1016,se),e(1017,oe),e(1021,ae),e(1022,ae),e(1231,ae),e(1014,ce),e(1015,ce),e(1008,ce),e(1009,ce),e(1040,ce),e(1041,ce),e(1115,ue),e(1182,ue),e(1185,ue),e(1186,U),e(1187,le),e(17,Z),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,pe),e(3807,pe),e(3907,ce),e(2951,ce),e(791,ce),e(1183,ce),e(1270,ce)}};var ye,ve;ve=function(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(0===r),r=1+~r>>>0,n="-");var i,s,o,a,c,u,l="";if(i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";if(l=a+o+l,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";if(l=a+o+l,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+l;for(a="",c=6-o.length,u=0;u<c;u++)a+="0";return l=a+o+l,n+(o=""+(s=4294967296*(i=t%1e6)+r)%1e6)+l};var be=function(e,t,r,n,i){n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a>>=r%8);var u=0;r%8+t>=8&&(u=i(0,o(e[s])&a,c));for(var l=t+r>>3,h=s+1;h<l;h++)u=i(u,o(e[h]),8);var f=(t+r)%8;return f>0&&(u=i(u,o(e[l])>>8-f,f)),u},_e=function(e,t,r){var n=Math.pow(2,r-1)-1,i=be(e,1),s=be(e,r,1);if(0===s)return 0;var o=1,a=be(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)o/=2,(t&1<<r-n)>0&&(e+=o);return e}));return s==Math.pow(2,r+1)-1?0===a?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,s-n)*a},Ee=function(e){return 1==be(e,1)?-1*(be(e,15,1,!0)+1):be(e,15,1)},we=function(e){return 1==be(e,1)?-1*(be(e,31,1,!0)+1):be(e,31,1)},Te=function(e){return _e(e,23,8)},Re=function(e){return _e(e,52,11)},Se=function(e){var t=be(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,be(e,16,16)),n=0,i=be(e,16),s=0;s<i;s++)n+=be(e,16,64+16*s)*r,r/=1e4;var o=Math.pow(10,be(e,16,48));return(0===t?1:-1)*Math.round(n*o)/o},Ce=function(e,t){var r=be(t,1),n=be(t,63,1),i=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},Oe=function(e){for(var t=be(e,32),r=(be(e,32,32),be(e,32,64)),n=96,i=[],s=0;s<t;s++)i[s]=be(e,32,n),n+=32,n+=32;var o=function(t){var r,i=be(e,32,n);return n+=32,4294967295==i?null:23==t||20==t?(r=be(e,8*i,n),n+=8*i,r):25==t?r=e.toString(this.encoding,n>>3,(n+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},a=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=a(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=o(t);return n};return a(i,r)},ke=function(e){return e.toString("utf8")},Ne=function(e){return null===e?null:be(e,8)>0};ye={init:function(e){e(20,ve),e(21,Ee),e(23,we),e(26,we),e(1700,Se),e(700,Te),e(701,Re),e(16,Ne),e(1114,Ce.bind(null,!1)),e(1184,Ce.bind(null,!0)),e(1e3,Oe),e(1007,Oe),e(1016,Oe),e(1008,Oe),e(1009,Oe),e(25,ke)}};var Ae;Ae={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096};var Pe,Ie,Le,Me,xe,De,qe,je,Fe,$e=!1;function Be(e){return String(e)}function Ue(e,t){return Fe[t=t||"text"]&&Fe[t][e]||Be}function He(e,t,r){"function"==typeof t&&(r=t,t="text"),Fe[t][e]=r}function We(){return $e||($e=!0,Ie=A,Le=ye,Me=M,xe=Ae,(Pe={}).getTypeParser=Ue,De=He,Pe.setTypeParser=De,qe=Me,Pe.arrayParser=qe,je=xe,Pe.builtins=je,Fe={text:{},binary:{}},Ie.init((function(e,t){Fe.text[e]=t})),Le.init((function(e,t){Fe.binary[e]=t}))),Pe}var Ge=We(),Ve=Ge.getTypeParser(20,"text"),ze=Ge.getTypeParser(1016,"text");N.__defineSetter__("parseInt8",(function(e){Ge.setTypeParser(20,"text",e?Ge.getTypeParser(23,"text"):Ve),Ge.setTypeParser(1016,"text",e?Ge.getTypeParser(1007,"text"):ze)}));var Qe,Ke,Je,Ye,Xe,Ze=!1;function et(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function tt(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e}function rt(){Qe={},Ke=b,Je=N,Ye=function(e,t){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?Je.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=et(t,4)+"-"+et(e.getUTCMonth()+1,2)+"-"+et(e.getUTCDate(),2)+"T"+et(e.getUTCHours(),2)+":"+et(e.getUTCMinutes(),2)+":"+et(e.getUTCSeconds(),2)+"."+et(e.getUTCMilliseconds(),3);return n+="+00:00",r&&(n+=" BC"),n}(e):function(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=et(r,4)+"-"+et(e.getMonth()+1,2)+"-"+et(e.getDate(),2)+"T"+et(e.getHours(),2)+":"+et(e.getMinutes(),2)+":"+et(e.getSeconds(),2)+"."+et(e.getMilliseconds(),3);return t<0?(i+="-",t*=-1):i+="+",i+=et(Math.floor(t/60),2)+":"+et(t%60,2),n&&(i+=" BC"),i}(e):Array.isArray(e)?function e(t){for(var r="{",n=0;n<t.length;n++)n>0&&(r+=","),null===t[n]||void 0===t[n]?r+="NULL":Array.isArray(t[n])?r+=e(t[n]):t[n]instanceof Buffer?r+="\\\\x"+t[n].toString("hex"):r+='"'+Ye(t[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return r+="}"}(e):null==e?null:"object"==typeof e?function(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Ye(e.toPostgres(Ye),t)}return JSON.stringify(e)}(e,t):e.toString()},Qe={prepareValue:function(e){return Ye(e)},normalizeQueryConfig:tt,postgresMd5PasswordHash:function(e,t,r){var n=Xe(t+e);return"md5"+Xe(Buffer.concat([Buffer.from(n),r]))},md5:Xe=function(e){return Ke.createHash("md5").update(e,"utf-8").digest("hex")}}}function nt(){return Ze||(Ze=!0,rt()),Qe}var it=nt(),st={};const ot=b;function at(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e)),Buffer.isBuffer(t)||(t=Buffer.from(t));var r=[];if(e.length>t.length)for(var n=0;n<t.length;n++)r.push(e[n]^t[n]);else for(var i=0;i<e.length;i++)r.push(e[i]^t[i]);return Buffer.from(r)}function ct(e,t){return ot.createHmac("sha256",e).update(t).digest()}st={startSession:function(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");const t=ot.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}},continueSession:function(e,t,r){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");const n=function(e){var t,r,n;if(String(e).split(",").forEach((function(e){switch(e[0]){case"r":t=e.substr(2);break;case"s":r=e.substr(2);break;case"i":n=parseInt(e.substr(2),10)}})),!t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:t,salt:r,iteration:n}}(r);if(!n.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var i=function(e,t,r){for(var n=ct(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),i=n,s=0;s<r-1;s++)n=ct(e,n),i=at(i,n);return i}(t,Buffer.from(n.salt,"base64"),n.iteration),s=ct(i,"Client Key"),o=ot.createHash("sha256").update(s).digest(),a="n=*,r="+e.clientNonce,c="r="+n.nonce+",s="+n.salt+",i="+n.iteration,u="c=biws,r="+n.nonce,l=a+","+c+","+u,h=at(s,ct(o,l)).toString("base64"),f=ct(i,"Server Key"),d=ct(f,l);e.message="SASLResponse",e.serverSignature=d.toString("base64"),e.response=u+",p="+h},finalizeSession:function(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");var r;if(String(t).split(",").forEach((function(e){switch(e[0]){case"v":r=e.substr(2)}})),r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}};var ut,lt,ht,ft,dt={},pt={},mt={},gt=y;function yt(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var n=!1,i=!1,s=[],o=!1,a=new gt;function c(){for(;s.length&&!a.paused;){var e=s.shift();if(null===e)return a.emit("end");a.emit("data",e)}}function u(){a.writable=!1,t.call(a),!a.readable&&a.autoDestroy&&a.destroy()}return a.readable=a.writable=!0,a.paused=!1,a.autoDestroy=!(r&&!1===r.autoDestroy),a.write=function(t){return e.call(this,t),!a.paused},a.queue=a.push=function(e){return o||(null===e&&(o=!0),s.push(e),c()),a},a.on("end",(function(){a.readable=!1,!a.writable&&a.autoDestroy&&process.nextTick((function(){a.destroy()}))})),a.end=function(e){if(!n)return n=!0,arguments.length&&a.write(e),u(),a},a.destroy=function(){if(!i)return i=!0,n=!0,s.length=0,a.writable=a.readable=!1,a.emit("close"),a},a.pause=function(){if(!a.paused)return a.paused=!0,a},a.resume=function(){return a.paused&&(a.paused=!1,a.emit("resume")),c(),a.paused||a.emit("drain"),a},a}mt=yt,yt.through=yt;var vt=g.StringDecoder;pt=function(e,t,r){var n=new vt,i="",s=r&&r.maxLength,o=!r||!1!==r.trailing;"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function a(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}void 0!==r&&e.queue(r)}else e.queue(r)}function c(t,r){var n=((null!=i?i:"")+r).split(e);if(i=n.pop(),s&&i.length>s)return t.emit("error",new Error("maximum buffer reached"));for(var o=0;o<n.length;o++){a(t,n[o])}}return mt((function(e){c(this,n.write(e))}),(function(){n.end&&c(this,n.end()),o&&null!=i&&a(this,i),this.queue(null)}))};var bt=p,_t=y.Stream,Et=E,wt="win32"===process.platform,Tt=process.stderr;var Rt=["host","port","database","user","password"],St=Rt.length,Ct=Rt[St-1];function Ot(){var e=Tt instanceof _t&&!0===Tt.writable;if(e){var t=Array.prototype.slice.call(arguments).concat("\n");Tt.write(Et.format.apply(Et,t))}}Object.defineProperty(dt,"isWin",{get:function(){return wt},set:function(e){wt=e}});dt.warnTo=function(e){var t=Tt;return Tt=e,t};dt.getFileName=function(e){return(e=e||process.env).PGPASSFILE||(wt?bt.join(e.APPDATA,"postgresql","pgpass.conf"):bt.join(e.HOME,".pgpass"))};dt.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!wt||(t=t||"<unkn>",32768!=(61440&e.mode)?(Ot('WARNING: password file "%s" is not a plain file',t),!1):!(63&e.mode)||(Ot('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var kt=(lt=function(e,t){return Rt.slice(0,-1).reduce((function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])}),!0)},dt.match=lt);dt.getPassword=function(e,t,r){var n,i=t.pipe(new pt);var s=function(e){t.destroy(),Ot("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",s),i.on("data",(function(t){var r=Nt(t);r&&At(r)&&kt(e,r)&&(n=r[Ct],i.end())})).on("end",(function(){t.destroy(),r(n)})).on("error",s)};var Nt=(ht=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s={},o=function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),s[Rt[t]]=i},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),r=e.charAt(a),n==St-1){o(n,i);break}a>=0&&":"==t&&"\\"!==r&&(o(n,i,a+1),i=a+2,n+=1)}return s=Object.keys(s).length===St?s:null},dt.parseLine=ht),At=(ft=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<Rt.length;r+=1){if(!(0,t[r])(e[Rt[r]]||""))return!1}return!0},dt.isValidEntry=ft),Pt=h;ut=function(e,t){var r=dt.getFileName();Pt.stat(r,(function(n,i){if(n||!dt.usePgPass(i,r))return t(void 0);var s=Pt.createReadStream(r);dt.getPassword(e,s,t)}))};var It=dt.warnTo;ut.warnTo=It;var Lt,Mt,xt=!1;function Dt(e){this._types=e||Mt,this.text={},this.binary={}}function qt(){return xt||(xt=!0,Lt={},Mt=We(),Dt.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},Dt.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},Dt.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},Lt=Dt),Lt}var jt,Ft=qt(),$t=u,Bt=h;function Ut(e){if("/"===e.charAt(0))return{host:(r=e.split(" "))[0],database:r[1]};var t=$t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var n in r)Array.isArray(r[n])&&(r[n]=r[n][r[n].length-1]);var i=(t.auth||":").split(":");if(r.user=i[0],r.password=i.splice(1).join(":"),r.port=t.port,"socket:"==t.protocol)return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var s=t.pathname;if(!r.host&&s&&/^%2f/i.test(s)){var o=s.split("/");r.host=decodeURIComponent(o[0]),s=o.splice(1).join("/")}return s&&"/"===s.charAt(0)&&(s=s.slice(1)||null),r.database=s&&decodeURI(s),"true"!==r.ssl&&"1"!==r.ssl||(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=Bt.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=Bt.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=Bt.readFileSync(r.sslrootcert).toString()),r}jt=Ut,Ut.parse=Ut;var Ht,Wt,Gt,Vt,zt,Qt,Kt,Jt,Yt,Xt=!1;function Zt(){return Xt||(Xt=!0,Ht={},Wt=c,Gt=N,Vt=jt.parse,zt=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||Gt[e]},Qt=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Gt.ssl},Jt=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Yt=function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+Jt(n))},(Kt=function(e){(e="string"==typeof e?Vt(e):e||{}).connectionString&&(e=Object.assign({},e,Vt(e.connectionString))),this.user=zt("user",e),this.database=zt("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(zt("port",e),10),this.host=zt("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:zt("password",e)}),this.binary=zt("binary",e),this.options=zt("options",e),this.ssl=void 0===e.ssl?Qt():e.ssl,"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.client_encoding=zt("client_encoding",e),this.replication=zt("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=zt("application_name",e,"PGAPPNAME"),this.fallback_application_name=zt("fallback_application_name",e,!1),this.statement_timeout=zt("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=zt("idle_in_transaction_session_timeout",e,!1),this.query_timeout=zt("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}).prototype.getLibpqConnectionString=function(e){var t=[];Yt(t,this,"user"),Yt(t,this,"password"),Yt(t,this,"port"),Yt(t,this,"application_name"),Yt(t,this,"fallback_application_name"),Yt(t,this,"connect_timeout"),Yt(t,this,"options");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Yt(t,r,"sslmode"),Yt(t,r,"sslca"),Yt(t,r,"sslkey"),Yt(t,r,"sslcert"),Yt(t,r,"sslrootcert"),this.database&&t.push("dbname="+Jt(this.database)),this.replication&&t.push("replication="+Jt(this.replication)),this.host&&t.push("host="+Jt(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+Jt(this.client_encoding)),Wt.lookup(this.host,(function(r,n){return r?e(r,null):(t.push("hostaddr="+Jt(n)),e(null,t.join(" ")))}))},Ht=Kt),Ht}var er=Zt(),tr={};const{EventEmitter:rr}=w;var nr={},ir=We(),sr=function(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)},or=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;sr.prototype.addCommandComplete=function(e){var t;(t=e.text?or.exec(e.text):or.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))},sr.prototype._parseRowAsArray=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++){var i=e[r];t[r]=null!==i?this._parsers[r](i):null}return t},sr.prototype.parseRow=function(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r],s=this.fields[r].name;t[s]=null!==i?this._parsers[r](i):null}return t},sr.prototype.addRow=function(e){this.rows.push(e)},sr.prototype.addFields=function(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=ir.getTypeParser(r.dataTypeID,r.format||"text")}},nr=sr;const ar=nt();tr=class extends rr{constructor(e,t,r){super(),e=ar.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new nr(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new nr(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.isPreparedStatement&&t.sync()}handleEmptyQuery(e){this.isPreparedStatement&&e.sync()}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}handleError(e,t){if(this.isPreparedStatement&&t.sync(),this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t},!0),e.flush()}prepare(e){if(this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types},!0),this.values)try{this.values=this.values.map(ar.prepareValue)}catch(t){return void this.handleError(t,e)}e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary},!0),e.describe({type:"P",name:this.portal||""},!0),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};var cr={},ur=a,lr=w.EventEmitter,hr=E,fr={};Object.defineProperty(fr,"__esModule",{value:!0});var dr={};Object.defineProperty(dr,"__esModule",{value:!0});var pr={};Object.defineProperty(pr,"__esModule",{value:!0});var mr=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.alloc(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=Buffer.alloc(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;const t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}};pr.Writer=mr;const gr=new pr.Writer,yr=[],vr=Buffer.from([69,0,0,0,9,0,0,0,0,0]),br=(e,t)=>{const r=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+r);return n[0]=e,n.writeInt32BE(r,1),n.write(t,5,"utf-8"),n[r]=0,n},_r=gr.addCString("P").flush(68),Er=gr.addCString("S").flush(68),wr=e=>Buffer.from([e,0,0,0,4]),Tr=wr(72),Rr=wr(83),Sr=wr(88),Cr=wr(99);var Or={startup:e=>{gr.addInt16(3).addInt16(0);for(const t of Object.keys(e))gr.addCString(t).addCString(e[t]);gr.addCString("client_encoding").addCString("UTF8");var t=gr.addCString("").flush(),r=t.length+4;return(new pr.Writer).addInt32(r).add(t).flush()},password:e=>gr.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSASLInitialResponseMessage:function(e,t){return gr.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),gr.flush(112)},sendSCRAMClientFinalMessage:function(e){return gr.addString(e).flush(112)},query:e=>gr.addCString(e).flush(81),parse:e=>{const t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));const r=e.types||yr;for(var n=r.length,i=gr.addCString(t).addCString(e.text).addInt16(n),s=0;s<n;s++)i.addInt32(r[s]);return gr.flush(80)},bind:(e={})=>{const t=e.portal||"",r=e.statement||"",n=e.binary||!1;for(var i=e.values||yr,s=i.length,o=!1,a=0;a<s;a++)o=o||i[a]instanceof Buffer;var c=gr.addCString(t).addCString(r);if(o)for(c.addInt16(s),a=0;a<s;a++)c.addInt16(i[a]instanceof Buffer?1:0);else c.addInt16(0);c.addInt16(s);for(var u=0;u<s;u++){var l=i[u];null==l?c.addInt32(-1):l instanceof Buffer?(c.addInt32(l.length),c.add(l)):(c.addInt32(Buffer.byteLength(l)),c.addString(l))}return n?(c.addInt16(1),c.addInt16(1)):c.addInt16(0),gr.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return vr;const t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(t,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(r,s.length-4),s},describe:e=>e.name?br(68,`${e.type}${e.name||""}`):"P"===e.type?_r:Er,close:e=>{const t=`${e.type}${e.name||""}`;return br(67,t)},flush:()=>Tr,sync:()=>Rr,end:()=>Sr,copyData:e=>gr.add(e).flush(100),copyDone:()=>Cr,copyFail:e=>br(102,e),cancel:(e,t)=>{const r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r}};dr.serialize=Or;var kr=dr.serialize;fr.serialize=kr;var Nr={},Ar=Nr&&Nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nr,"__esModule",{value:!0});var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.parseComplete={name:"parseComplete",length:5};Pr.bindComplete={name:"bindComplete",length:5};Pr.closeComplete={name:"closeComplete",length:5};Pr.noData={name:"noData",length:5};Pr.portalSuspended={name:"portalSuspended",length:5};Pr.replicationStart={name:"replicationStart",length:4};Pr.emptyQuery={name:"emptyQuery",length:4};Pr.copyDone={name:"copyDone",length:4};class Ir extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}}var Lr=Ir;Pr.DatabaseError=Lr;var Mr=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};Pr.CopyDataMessage=Mr;var xr=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=new Array(n)}};Pr.CopyResponse=xr;var Dr=class{constructor(e,t,r,n,i,s,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=s,this.format=o}};Pr.Field=Dr;var qr=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};Pr.RowDescriptionMessage=qr;var jr=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};Pr.ParameterStatusMessage=jr;var Fr=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};Pr.AuthenticationMD5Password=Fr;var $r=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};Pr.BackendKeyDataMessage=$r;var Br=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};Pr.NotificationResponseMessage=Br;var Ur=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};Pr.ReadyForQueryMessage=Ur;var Hr=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};Pr.CommandCompleteMessage=Hr;var Wr=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};Pr.DataRowMessage=Wr;var Gr=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};Pr.NoticeMessage=Gr;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});const zr=Buffer.allocUnsafe(0);var Qr=class{constructor(e=0){this.offset=e,this.buffer=zr,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};Vr.BufferReader=Qr;const Kr=Ar(o),Jr=Buffer.allocUnsafe(0);var Yr=class{constructor(e){var t,r;if(this.buffer=Jr,this.bufferLength=0,this.bufferOffset=0,this.reader=new Vr.BufferReader,"binary"===(null===(t=e)||void 0===t?void 0:t.mode))throw new Error("Binary mode not supported yet");this.mode=(null===(r=e)||void 0===r?void 0:r.mode)||"text"}parse(e,t){this.mergeBuffer(e);const r=this.bufferOffset+this.bufferLength;let n=this.bufferOffset;for(;n+5<=r;){const e=this.buffer[n],i=this.buffer.readUInt32BE(n+1),s=1+i;if(!(s+n<=r))break;t(this.handlePacket(n+5,e,i,this.buffer)),n+=s}n===r?(this.buffer=Jr,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){const t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let r=2*this.buffer.byteLength;for(;t>=r;)r*=2;e=Buffer.allocUnsafe(r)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,r,n){switch(t){case 50:return Pr.bindComplete;case 49:return Pr.parseComplete;case 51:return Pr.closeComplete;case 110:return Pr.noData;case 115:return Pr.portalSuspended;case 99:return Pr.copyDone;case 87:return Pr.replicationStart;case 73:return Pr.emptyQuery;case 68:return this.parseDataRowMessage(e,r,n);case 67:return this.parseCommandCompleteMessage(e,r,n);case 90:return this.parseReadyForQueryMessage(e,r,n);case 65:return this.parseNotificationMessage(e,r,n);case 82:return this.parseAuthenticationResponse(e,r,n);case 83:return this.parseParameterStatusMessage(e,r,n);case 75:return this.parseBackendKeyData(e,r,n);case 69:return this.parseErrorMessage(e,r,n,"error");case 78:return this.parseErrorMessage(e,r,n,"notice");case 84:return this.parseRowDescriptionMessage(e,r,n);case 71:return this.parseCopyInMessage(e,r,n);case 72:return this.parseCopyOutMessage(e,r,n);case 100:return this.parseCopyData(e,r,n);default:Kr.default.fail("unknown message code: "+t.toString(16))}}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.string(1);return new Pr.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring();return new Pr.CommandCompleteMessage(t,n)}parseCopyData(e,t,r){const n=r.slice(e,e+(t-4));return new Pr.CopyDataMessage(t,n)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,r,n){this.reader.setBuffer(e,r);const i=0!==this.reader.byte(),s=this.reader.int16(),o=new Pr.CopyResponse(t,n,i,s);for(let e=0;e<s;e++)o.columnTypes[e]=this.reader.int16();return o}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.cstring(),s=this.reader.cstring();return new Pr.NotificationResponseMessage(t,n,i,s)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Pr.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),s=this.reader.int32(),o=0===this.reader.int16()?"text":"binary";return new Pr.Field(e,t,r,n,i,s,o)}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new Pr.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring(),i=this.reader.cstring();return new Pr.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.int32();return new Pr.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i={name:"authenticationOk",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";const e=this.reader.bytes(4);return new Pr.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(t-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,t,r,n){this.reader.setBuffer(e,r);const i={};let s=this.reader.string(1);for(;"\0"!==s;)i[s]=this.reader.cstring(),s=this.reader.string(1);const o=i.M,a="notice"===n?new Pr.NoticeMessage(t,o):new Pr.DatabaseError(o,t,n);return a.severity=i.S,a.code=i.C,a.detail=i.D,a.hint=i.H,a.position=i.P,a.internalPosition=i.p,a.internalQuery=i.q,a.where=i.W,a.schema=i.s,a.table=i.t,a.column=i.c,a.dataType=i.d,a.constraint=i.n,a.file=i.F,a.line=i.L,a.routine=i.R,a}};Nr.Parser=Yr;var Xr=function(e,t){const r=new Nr.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))};fr.parse=Xr;const{parse:Zr,serialize:en}=fr;var tn=function(e){lr.call(this),e=e||{},this.stream=e.stream||new ur.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))};hr.inherits(tn,lr),tn.prototype.connect=function(e,t){var r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",(function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")}));const n=function(e){(!r._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&r.emit("error",e)};if(this.stream.on("error",n),this.stream.on("close",(function(){r.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}var i=s;const o=Object.assign({socket:r.stream},r.ssl);0===ur.isIP(t)&&(o.servername=t),r.stream=i.connect(o),r.attachListeners(r.stream),r.stream.on("error",n),r.emit("sslconnect")}))},tn.prototype.attachListeners=function(e){e.on("end",()=>{this.emit("end")}),Zr(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})},tn.prototype.requestSsl=function(){this.stream.write(en.requestSsl())},tn.prototype.startup=function(e){this.stream.write(en.startup(e))},tn.prototype.cancel=function(e,t){this._send(en.cancel(e,t))},tn.prototype.password=function(e){this._send(en.password(e))},tn.prototype.sendSASLInitialResponseMessage=function(e,t){this._send(en.sendSASLInitialResponseMessage(e,t))},tn.prototype.sendSCRAMClientFinalMessage=function(e){this._send(en.sendSCRAMClientFinalMessage(e))},tn.prototype._send=function(e){return!!this.stream.writable&&this.stream.write(e)},tn.prototype.query=function(e){this._send(en.query(e))},tn.prototype.parse=function(e){this._send(en.parse(e))},tn.prototype.bind=function(e){this._send(en.bind(e))},tn.prototype.execute=function(e){this._send(en.execute(e))};const rn=en.flush();tn.prototype.flush=function(){this.stream.writable&&this.stream.write(rn)};const nn=en.sync();tn.prototype.sync=function(){this._ending=!0,this._send(rn),this._send(nn)};const sn=en.end();tn.prototype.end=function(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(sn,()=>{this.stream.end()});this.stream.end()},tn.prototype.close=function(e){this._send(en.close(e))},tn.prototype.describe=function(e){this._send(en.describe(e))},tn.prototype.sendCopyFromChunk=function(e){this._send(en.copyData(e))},tn.prototype.endCopyFrom=function(){this._send(en.copyDone())},tn.prototype.sendCopyFail=function(e){this._send(en.copyFail(e))},cr=tn;var on=function(e){O.call(this),this.connectionParameters=new er(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||C.Promise,this._types=new Ft(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new cr({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||N.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this._connectionTimeoutMillis=t.connectionTimeoutMillis||0};k.inherits(on,O),on.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0},on.prototype._connect=function(e){var t,r,n=this,i=this.connection;if(this._connecting||this._connected){const t=new Error("Client has already been connected. You cannot reuse a client.");return void process.nextTick(()=>{e(t)})}function s(e){return function(t){"function"==typeof n.password?n._Promise.resolve().then(()=>n.password()).then(r=>{if(void 0!==r){if("string"!=typeof r)return void i.emit("error",new TypeError("Password must be a string"));n.connectionParameters.password=n.password=r}else n.connectionParameters.password=n.password=null;e(t)}).catch(e=>{i.emit("error",e)}):null!==n.password?e(t):ut(n.connectionParameters,(function(r){void 0!==r&&(n.connectionParameters.password=n.password=r),e(t)}))}}this._connecting=!0,this._connectionTimeoutMillis>0&&(t=setTimeout(()=>{i._ending=!0,i.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",(function(){n.ssl?i.requestSsl():i.startup(n.getStartupConf())})),i.on("sslconnect",(function(){i.startup(n.getStartupConf())})),i.on("authenticationCleartextPassword",s((function(){i.password(n.password)}))),i.on("authenticationMD5Password",s((function(e){i.password(it.postgresMd5PasswordHash(n.user,n.password,e.salt))}))),i.on("authenticationSASL",s((function(e){r=st.startSession(e.mechanisms),i.sendSASLInitialResponseMessage(r.mechanism,r.response)}))),i.on("authenticationSASLContinue",(function(e){st.continueSession(r,n.password,e.data),i.sendSCRAMClientFinalMessage(r.response)})),i.on("authenticationSASLFinal",(function(e){st.finalizeSession(r,e.data),r=null})),i.once("backendKeyData",(function(e){n.processID=e.processID,n.secretKey=e.secretKey}));const o=r=>{if(!this._connectionError){if(this._connectionError=!0,clearTimeout(t),e)return e(r);this.emit("error",r)}},a=e=>{this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)},c=e=>{const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,i)):a(e)};i.on("error",o),i.on("errorMessage",o),i.once("readyForQuery",(function(){n._connecting=!1,n._connected=!0,n._attachListeners(i),i.removeListener("error",o),i.removeListener("errorMessage",o),i.on("error",a),i.on("errorMessage",c),clearTimeout(t),e&&(e(null,n),e=null),n.emit("connect")})),i.on("readyForQuery",(function(){var e=n.activeQuery;n.activeQuery=null,n.readyForQuery=!0,e&&e.handleReadyForQuery(i),n._pulseQueryQueue()})),i.once("end",()=>{const r=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(t),this._errorAllQueries(r),this._ending||(this._connecting&&!this._connectionError?e?e(r):a(r):this._connectionError||a(r)),process.nextTick(()=>{this.emit("end")})}),i.on("notice",(function(e){n.emit("notice",e)}))},on.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},on.prototype._attachListeners=function(e){const t=this;e.on("rowDescription",(function(e){t.activeQuery.handleRowDescription(e)})),e.on("dataRow",(function(e){t.activeQuery.handleDataRow(e)})),e.on("portalSuspended",(function(r){t.activeQuery.handlePortalSuspended(e)})),e.on("emptyQuery",(function(r){t.activeQuery.handleEmptyQuery(e)})),e.on("commandComplete",(function(r){t.activeQuery.handleCommandComplete(r,e)})),e.on("parseComplete",(function(r){t.activeQuery.name&&(e.parsedStatements[t.activeQuery.name]=t.activeQuery.text)})),e.on("copyInResponse",(function(e){t.activeQuery.handleCopyInResponse(t.connection)})),e.on("copyData",(function(e){t.activeQuery.handleCopyData(e,t.connection)})),e.on("notification",(function(e){t.emit("notification",e)}))},on.prototype.getStartupConf=function(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t},on.prototype.cancel=function(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){r.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)},on.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},on.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)},on.prototype.escapeIdentifier=function(e){return'"'+e.replace(/"/g,'""')+'"'},on.prototype.escapeLiteral=function(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r},on.prototype._pulseQueryQueue=function(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))},on.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(s=this.connectionParameters.query_timeout,(n=new tr(e,t,r)).callback||(i=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)},on.prototype.end=function(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)},on.Query=tr,S=on;var an;const cn=w.EventEmitter,un=function(){},ln=(e,t)=>{const r=e.findIndex(t);return-1===r?void 0:e.splice(r,1)[0]};class hn{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}}class fn{constructor(e){this.callback=e}}function dn(e,t){if(t)return{callback:t,result:void 0};let r,n;return{callback:function(e,t){e?r(e):n(t)},result:new e((function(e,t){n=e,r=t}))}}an=class extends cn{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||ao().Client,this.Promise=this.options.Promise||C.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const r=t.client,n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){const t=ln(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){const t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}const t=dn(this.Promise,e),r=t.result;if(this._clients.length>=this.options.max||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new fn(t.callback)),r;const e=(e,r,n)=>{clearTimeout(i),t.callback(e,r,n)},n=new fn(e),i=setTimeout(()=>{ln(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new fn(t.callback)),r}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const r=function(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}(this,t);let n;this.log("checking client timeout");let i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(s=>{if(n&&clearTimeout(n),t.on("error",r),!s)return this.log("new client connected"),this._acquireClient(t,e,r,!0);this.log("client failed to connect",s),this._clients=this._clients.filter(e=>e!==t),i&&(s.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(s,void 0,un)})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,un);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return n=>{r&&function(){throw new Error("Release called on client which has already been released to the pool.")}(),r=!0,this._release(e,t,n)}}_release(e,t,r){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),void this._pulseQueue();let n;this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis)),this._idle.push(new hn(e,t,n)),this._pulseQueue()}query(e,t,r){if("function"==typeof e){const t=dn(this.Promise,e);return setImmediate((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(r=t,t=void 0);const n=dn(this.Promise,r);return r=n.callback,this.connect((n,i)=>{if(n)return r(n);let s=!1;const o=e=>{s||(s=!0,i.release(e),r(e))};i.once("error",o),this.log("dispatching query"),i.query(e,t,(e,t)=>{if(this.log("query dispatched"),i.removeListener("error",o),!s)return s=!0,i.release(e),e?r(e):r(void 0,t)})}),n.result}end(e){if(this.log("ending"),this.ending){const t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=dn(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get totalCount(){return this._clients.length}};var pn,mn,gn,yn,vn,bn,_n,En,wn,Tn,Rn,Sn,Cn,On,kn,Nn,An,Pn,In,Ln,Mn,xn,Dn,qn,jn,Fn,$n,Bn,Un,Hn,Wn,Gn,Vn,zn,Qn,Kn,Jn,Yn,Xn,Zn,ei,ti,ri,ni,ii,si,oi,ai,ci,ui,li,hi,fi,di,pi,mi,gi,yi,vi,bi,_i,Ei,wi,Ti,Ri,Si,Ci,Oi,ki,Ni,Ai,Pi,Ii,Li,Mi,xi,Di,qi,ji,Fi,$i,Bi=!1;function Ui(e,t){if(e.length>bn)return null;if(!(t?En[jn]:En[xn]).test(e))return null;try{return new Gi(e,t)}catch(e){return null}}function Hi(e,t){var r=Ui(e,t);return r?r.version:null}function Wi(e,t){var r=Ui(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}function Gi(e,t){if(e instanceof Gi){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>bn)throw new TypeError("version is longer than "+bn+" characters");if(!(this instanceof Gi))return new Gi(e,t);vn("SemVer",e,t),this.loose=t;var r=e.trim().match(t?En[jn]:En[xn]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>_n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_n||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){return/^[0-9]+$/.test(e)?+e:e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}function Vi(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new Gi(e,r).inc(t,n).version}catch(e){return null}}function zi(e,t){if(os(e,t))return null;var r=Ui(e),n=Ui(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i}function Qi(e,t){var r=pi.test(e),n=pi.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function Ki(e,t){return Qi(t,e)}function Ji(e,t){return new Gi(e,t).major}function Yi(e,t){return new Gi(e,t).minor}function Xi(e,t){return new Gi(e,t).patch}function Zi(e,t,r){return new Gi(e,r).compare(t)}function es(e,t){return Zi(e,t,!0)}function ts(e,t,r){return Zi(t,e,r)}function rs(e,t){return e.sort((function(e,r){return mn.compare(e,r,t)}))}function ns(e,t){return e.sort((function(e,r){return mn.rcompare(e,r,t)}))}function is(e,t,r){return Zi(e,t,r)>0}function ss(e,t,r){return Zi(e,t,r)<0}function os(e,t,r){return 0===Zi(e,t,r)}function as(e,t,r){return 0!==Zi(e,t,r)}function cs(e,t,r){return Zi(e,t,r)>=0}function us(e,t,r){return Zi(e,t,r)<=0}function ls(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=os(e,r,n);break;case"!=":i=as(e,r,n);break;case">":i=is(e,r,n);break;case">=":i=cs(e,r,n);break;case"<":i=ss(e,r,n);break;case"<=":i=us(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function hs(e,t){if(e instanceof hs){if(e.loose===t)return e;e=e.value}if(!(this instanceof hs))return new hs(e,t);vn("comparator",e,t),this.loose=t,this.parse(e),this.semver===Ii?this.value="":this.value=this.operator+this.semver.version,vn("comp",this)}function fs(e,t){if(e instanceof fs&&e.loose===t)return e;if(!(this instanceof fs))return new fs(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ds(e,t){return new fs(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}function ps(e,t){return vn("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){vn("caret",e,t);var r=t?En[Zn]:En[Xn];return e.replace(r,(function(t,r,n,i,s){var o;return vn("caret",e,t,r,n,i,s),ms(r)?o="":ms(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":ms(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":s?(vn("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),o="0"===r?"0"===n?">="+r+"."+n+"."+i+s+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+s+" <"+(+r+1)+".0.0"):(vn("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),vn("caret return",o),o}))}(e,t)})).join(" ")}(e,t),vn("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t?En[Kn]:En[Qn];return e.replace(r,(function(t,r,n,i,s){var o;return vn("tilde",e,t,r,n,i,s),ms(r)?o="":ms(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":ms(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":s?(vn("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),o=">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",vn("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),vn("tildes",e),e=function(e,t){return vn("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t?En[Gn]:En[Wn];return e.replace(r,(function(t,r,n,i,s,o){vn("xRange",e,t,r,n,i,s,o);var a=ms(n),c=a||ms(i),u=c||ms(s);return"="===r&&u&&(r=""),a?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(c&&(i=0),u&&(s=0),">"===r?(r=">=",c?(n=+n+1,i=0,s=0):u&&(i=+i+1,s=0)):"<="===r&&(r="<",c?n=+n+1:i=+i+1),t=r+n+"."+i+"."+s):c?t=">="+n+".0.0 <"+(+n+1)+".0.0":u&&(t=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0"),vn("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),vn("xrange",e),e=function(e,t){return vn("replaceStars",e,t),e.trim().replace(En[si],"")}(e,t),vn("stars",e),e}function ms(e){return!e||"x"===e.toLowerCase()||"*"===e}function gs(e,t,r,n,i,s,o,a,c,u,l,h,f){return((t=ms(r)?"":ms(n)?">="+r+".0.0":ms(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ms(c)?"":ms(u)?"<"+(+c+1)+".0.0":ms(l)?"<"+c+"."+(+u+1)+".0":h?"<="+c+"."+u+"."+l+"-"+h:"<="+a)).trim()}function ys(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++){if(vn(e[r].semver),e[r].semver===Ii)return!0;if(e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}}return!1}return!0}function vs(e,t,r){try{t=new fs(t,r)}catch(e){return!1}return t.test(e)}function bs(e,t,r){return e.filter((function(e){return vs(e,t,r)})).sort((function(e,t){return ts(e,t,r)}))[0]||null}function _s(e,t){try{return new fs(e,t).range||"*"}catch(e){return null}}function Es(e,t,r){return Ts(e,t,"<",r)}function ws(e,t,r){return Ts(e,t,">",r)}function Ts(e,t,r,n){var i,s,o,a,c;switch(e=new Gi(e,n),t=new fs(t,n),r){case">":i=is,s=us,o=ss,a=">",c=">=";break;case"<":i=ss,s=cs,o=is,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vs(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],h=null,f=null;if(l.forEach((function(e){h=h||e,f=f||e,i(e.semver,h.semver,n)?h=e:o(e.semver,f.semver,n)&&(f=e)})),h.operator===a||h.operator===c)return!1;if((!f.operator||f.operator===a)&&s(e,f.semver))return!1;if(f.operator===c&&o(e,f.semver))return!1}return!0}function Rs(){return Bi||(Bi=!0,function(){for((pn={})==pn&&(mn=pn=Gi),vn="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},"2.0.0",pn.SEMVER_SPEC_VERSION="2.0.0",bn=256,_n=Number.MAX_SAFE_INTEGER||9007199254740991,gn=[],En=pn.re=gn,yn=[],wn=pn.src=yn,Tn=0,Rn=Tn++,wn[Rn]="0|[1-9]\\d*",Sn=Tn++,wn[Sn]="[0-9]+",Cn=Tn++,wn[Cn]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",On=Tn++,wn[On]="("+wn[Rn]+")\\.("+wn[Rn]+")\\.("+wn[Rn]+")",kn=Tn++,wn[kn]="("+wn[Sn]+")\\.("+wn[Sn]+")\\.("+wn[Sn]+")",Nn=Tn++,wn[Nn]="(?:"+wn[Rn]+"|"+wn[Cn]+")",An=Tn++,wn[An]="(?:"+wn[Sn]+"|"+wn[Cn]+")",Pn=Tn++,wn[Pn]="(?:-("+wn[Nn]+"(?:\\."+wn[Nn]+")*))",In=Tn++,wn[In]="(?:-?("+wn[An]+"(?:\\."+wn[An]+")*))",Ln=Tn++,wn[Ln]="[0-9A-Za-z-]+",Mn=Tn++,wn[Mn]="(?:\\+("+wn[Ln]+"(?:\\."+wn[Ln]+")*))",xn=Tn++,Dn="v?"+wn[On]+wn[Pn]+"?"+wn[Mn]+"?",wn[xn]="^"+Dn+"$",qn="[v=\\s]*"+wn[kn]+wn[In]+"?"+wn[Mn]+"?",jn=Tn++,wn[jn]="^"+qn+"$",Fn=Tn++,wn[Fn]="((?:<|>)?=?)",$n=Tn++,wn[$n]=wn[Sn]+"|x|X|\\*",Bn=Tn++,wn[Bn]=wn[Rn]+"|x|X|\\*",Un=Tn++,wn[Un]="[v=\\s]*("+wn[Bn]+")(?:\\.("+wn[Bn]+")(?:\\.("+wn[Bn]+")(?:"+wn[Pn]+")?"+wn[Mn]+"?)?)?",Hn=Tn++,wn[Hn]="[v=\\s]*("+wn[$n]+")(?:\\.("+wn[$n]+")(?:\\.("+wn[$n]+")(?:"+wn[In]+")?"+wn[Mn]+"?)?)?",Wn=Tn++,wn[Wn]="^"+wn[Fn]+"\\s*"+wn[Un]+"$",Gn=Tn++,wn[Gn]="^"+wn[Fn]+"\\s*"+wn[Hn]+"$",Vn=Tn++,wn[Vn]="(?:~>?)",zn=Tn++,wn[zn]="(\\s*)"+wn[Vn]+"\\s+",En[zn]=new RegExp(wn[zn],"g"),"$1~",Qn=Tn++,wn[Qn]="^"+wn[Vn]+wn[Un]+"$",Kn=Tn++,wn[Kn]="^"+wn[Vn]+wn[Hn]+"$",Jn=Tn++,wn[Jn]="(?:\\^)",Yn=Tn++,wn[Yn]="(\\s*)"+wn[Jn]+"\\s+",En[Yn]=new RegExp(wn[Yn],"g"),"$1^",Xn=Tn++,wn[Xn]="^"+wn[Jn]+wn[Un]+"$",Zn=Tn++,wn[Zn]="^"+wn[Jn]+wn[Hn]+"$",ei=Tn++,wn[ei]="^"+wn[Fn]+"\\s*("+qn+")$|^$",ti=Tn++,wn[ti]="^"+wn[Fn]+"\\s*("+Dn+")$|^$",ri=Tn++,wn[ri]="(\\s*)"+wn[Fn]+"\\s*("+qn+"|"+wn[Un]+")",En[ri]=new RegExp(wn[ri],"g"),"$1$2$3",ni=Tn++,wn[ni]="^\\s*("+wn[Un]+")\\s+-\\s+("+wn[Un]+")\\s*$",ii=Tn++,wn[ii]="^\\s*("+wn[Hn]+")\\s+-\\s+("+wn[Hn]+")\\s*$",si=Tn++,wn[si]="(<|>)?=?\\s*\\*",oi=0;oi<34;oi++)vn(oi,wn[oi]),En[oi]||(En[oi]=new RegExp(wn[oi]));ai=Ui,pn.parse=ai,ci=Hi,pn.valid=ci,ui=Wi,pn.clean=ui,li=Gi,pn.SemVer=li,Gi.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Gi.prototype.inspect=function(){return'<SemVer "'+this+'">'},Gi.prototype.toString=function(){return this.version},Gi.prototype.compare=function(e){return vn("SemVer.compare",this.version,this.loose,e),e instanceof Gi||(e=new Gi(e,this.loose)),this.compareMain(e)||this.comparePre(e)},Gi.prototype.compareMain=function(e){return e instanceof Gi||(e=new Gi(e,this.loose)),Qi(this.major,e.major)||Qi(this.minor,e.minor)||Qi(this.patch,e.patch)},Gi.prototype.comparePre=function(e){if(e instanceof Gi||(e=new Gi(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(vn("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Qi(r,n)}while(++t)},Gi.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},hi=Vi,pn.inc=hi,fi=zi,pn.diff=fi,di=Qi,pn.compareIdentifiers=di,pi=/^[0-9]+$/,mi=Ki,pn.rcompareIdentifiers=mi,gi=Ji,pn.major=gi,yi=Yi,pn.minor=yi,vi=Xi,pn.patch=vi,bi=Zi,pn.compare=bi,_i=es,pn.compareLoose=_i,Ei=ts,pn.rcompare=Ei,wi=rs,pn.sort=wi,Ti=ns,pn.rsort=Ti,Ri=is,pn.gt=Ri,Si=ss,pn.lt=Si,Ci=os,pn.eq=Ci,Oi=as,pn.neq=Oi,ki=cs,pn.gte=ki,Ni=us,pn.lte=Ni,Ai=ls,pn.cmp=Ai,Pi=hs,pn.Comparator=Pi,Ii={},hs.prototype.parse=function(e){var t=this.loose?En[ei]:En[ti],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new Gi(r[2],this.loose):this.semver=Ii},hs.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},hs.prototype.toString=function(){return this.value},hs.prototype.test=function(e){return vn("Comparator.test",e,this.loose),this.semver===Ii||("string"==typeof e&&(e=new Gi(e,this.loose)),ls(e,this.operator,this.semver,this.loose))},Li=fs,pn.Range=Li,fs.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},fs.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},fs.prototype.toString=function(){return this.range},fs.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),vn("range",e,t);var r=t?En[ii]:En[ni];e=e.replace(r,gs),vn("hyphen replace",e),e=e.replace(En[ri],"$1$2$3"),vn("comparator trim",e,En[ri]),e=(e=(e=e.replace(En[zn],"$1~")).replace(En[Yn],"$1^")).split(/\s+/).join(" ");var n=t?En[ei]:En[ti],i=e.split(" ").map((function(e){return ps(e,t)})).join(" ").split(/\s+/);return this.loose&&(i=i.filter((function(e){return!!e.match(n)}))),i=i.map((function(e){return new hs(e,t)}))},Mi=ds,pn.toComparators=Mi,fs.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Gi(e,this.loose));for(var t=0;t<this.set.length;t++)if(ys(this.set[t],e))return!0;return!1},xi=vs,pn.satisfies=xi,Di=bs,pn.maxSatisfying=Di,qi=_s,pn.validRange=qi,ji=Es,pn.ltr=ji,Fi=ws,pn.gtr=Fi,$i=Ts,pn.outside=$i,"function"==typeof define&&define.amd&&define(mn)}()),pn}var Ss,Cs=!1;function Os(){return Cs||(Cs=!0,Ss={},Ss=JSON.parse('{"name":"pg","version":"8.3.0","description":"PostgreSQL client - pure javascript & libpq with the same API","keywords":["database","libpq","pg","postgre","postgres","postgresql","rdbms"],"homepage":"https://github.com/brianc/node-postgres","repository":{"type":"git","url":"git://github.com/brianc/node-postgres.git"},"author":"Brian Carlson <brian.m.carlson@gmail.com>","main":"./lib","dependencies":{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.3.0","pg-pool":"^3.2.1","pg-protocol":"^1.2.5","pg-types":"^2.1.0","pgpass":"1.x","semver":"4.3.2"},"devDependencies":{"async":"0.9.0","bluebird":"3.5.2","co":"4.6.0","pg-copy-streams":"0.3.0"},"minNativeVersion":"2.0.0","scripts":{"test":"make test-all"},"files":["lib","SPONSORS.md"],"license":"MIT","engines":{"node":">= 8.0.0"}}')),Ss}var ks,Ns,As,Ps,Is,Ls,Ms=!1;function xs(){return Ms||(Ms=!0,ks={},Ns=w.EventEmitter,As=E,Ps=nt(),Is=ks=function(e,t,r){Ns.call(this),e=Ps.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))},As.inherits(Is,Ns),Ls={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"},Is.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t)e[Ls[r]||r]=t[r];this.callback?this.callback(e):this.emit("error",e),this.state="error"},Is.prototype.then=function(e,t){return this._getPromise().then(e,t)},Is.prototype.catch=function(e){return this._getPromise().catch(e)},Is.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this))),this._promise},Is.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(r,n,i){if(e.native.arrayMode=!1,setImmediate((function(){t.emit("_done")})),r)return t.handleError(r);t._emitRowEvents&&(i.length>1?n.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,i[r])})}):n.forEach((function(e){t.emit("row",e,i)}))),t.state="end",t.emit("end",i),t.callback&&t.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(Ps.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(e)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,(function(i){return i?r(i):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error("Query values must be an array");return r(e)}var i=this.values.map(Ps.prepareValue);e.native.query(this.text,i,r)}else e.native.query(this.text,r)}),ks}var Ds,qs,js,Fs,$s,Bs,Us,Hs,Ws,Gs,Vs,zs,Qs=!1;function Ks(){return Qs||(Qs=!0,Ds={},qs=Xs(),js=qt(),Fs=Rs(),$s=Os(),Bs=o,Us=w.EventEmitter,Hs=E,Ws=Zt(),Gs="Version >= "+$s.minNativeVersion+" of pg-native required.",Bs(Fs.gte(qs.version,$s.minNativeVersion),Gs),Vs=xs(),(zs=Ds=function(e){Us.call(this),e=e||{},this._Promise=e.Promise||C.Promise,this._types=new js(e.types),this.native=new qs({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new Ws(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}}).Query=Vs,Hs.inherits(zs,Us),zs.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},zs.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(r,n){if(r)return e(r);t.native.connect(n,(function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},zs.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},zs.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(e.callback=t);else if(s=this.connectionParameters.query_timeout,!(n=new Vs(e,t,r)).callback){let e,t;i=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)},zs.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,r){e=e=>e?r(e):t()}))),this.native.end((function(){r._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{r.emit("end"),e&&e()})})),t},zs.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},zs.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var r=this;t.once("_done",(function(){r._pulseQueryQueue()}))}else e||this.emit("drain")}},zs.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},zs.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},zs.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}),Ds}var Js,Ys=!1;function Xs(){return Ys||(Ys=!0,Js={},Js=Ks()),Js}var Zs,eo,to,ro,no,io,so,oo=!1;function ao(){return oo||(oo=!0,Zs={},eo=S,to=N,ro=cr,no=an,io=e=>class extends no{constructor(t){super(t,e)}},so=function(e){this.defaults=to,this.Client=e,this.Query=this.Client.Query,this.Pool=io(this.Client),this._pools=[],this.Connection=ro,this.types=We()},void 0!==process.env.NODE_PG_FORCE_NATIVE?Zs=new so(Xs()):(Zs=new so(eo),Object.defineProperty(Zs,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new so(Xs())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e;console.error(e.message)}return Object.defineProperty(Zs,"native",{value:e}),e}}))),Zs}ao();var co={};Object.defineProperty(co,"__esModule",{value:!0});var uo=(e,...t)=>{function r(r={}){return e.reduce((e,n,i)=>{const s=t[i];return e+=n.replace(/\r?\n\s+/g," "),void 0!==s&&(e+="function"!=typeof s?s:s(r)),e},"").trim()}return r.raw=e.reduce((e,r,n)=>{const i=t[n];return e+=r.replace(/\r?\n\s+/g," "),void 0!==i&&(e+="${"+i.toString()+"}"),e},"").trim(),r};co.default=uo;const lo=e=>/[^a-z0-9_]/.test(e.label||e)?`"${e.label||e}"`:e.label||e;function ho(e){let t=[],r="string"==typeof e?{label:e}:e;return r.database&&t.push(lo(r.database)),r.schema&&t.push(lo(r.schema)),t.push(lo(r.label)),t.join(".")}var fo;const po={CONNECTION:"connection",CONNECTED_CONNECTION:"connectedConnection",COLUMN:"connection.column",FUNCTION:"connection.function",SCHEMA:"connection.schema",RESOURCE_GROUP:"connection.resource_group",DATABASE:"connection.database",TABLE:"connection.table",VIEW:"connection.view",MATERIALIZED_VIEW:"connection.materializedView",NO_CHILD:"NO_CHILD",KEYWORDS:"KEYWORDS"};Object.freeze(po),fo={ContextValue:po};var mo=T(co);const go=mo`
SELECT * FROM INFORMATION_SCHEMA.COLUMNS
WHERE
  TABLE_NAME = '${e=>e.label}'
  AND TABLE_CATALOG = '${e=>e.database}'
  AND TABLE_SCHEMA = '${e=>e.schema}'`,yo=mo`
SELECT
  C.COLUMN_NAME AS label,
  '${fo.ContextValue.COLUMN}' as type,
  C.TABLE_NAME AS table,
  C.DATA_TYPE AS "dataType",
  UPPER(C.DATA_TYPE || (
    CASE WHEN C.CHARACTER_MAXIMUM_LENGTH > 0 THEN (
      '(' || C.CHARACTER_MAXIMUM_LENGTH || ')'
    ) ELSE '' END
  )) AS "detail",
  C.CHARACTER_MAXIMUM_LENGTH::INT AS size,
  C.TABLE_CATALOG AS database,
  C.TABLE_SCHEMA AS schema,
  C.COLUMN_DEFAULT AS "defaultValue",
  C.IS_NULLABLE AS "isNullable",
  (CASE WHEN LOWER(TC.constraint_type) = 'primary key' THEN TRUE ELSE FALSE END) as "isPk",
  (CASE WHEN LOWER(TC.constraint_type) = 'foreign key' THEN TRUE ELSE FALSE END) as "isFk"
FROM
  INFORMATION_SCHEMA.COLUMNS C
LEFT JOIN information_schema.key_column_usage KC ON KC.table_name = C.table_name
  AND KC.table_schema = C.table_schema
  AND KC.column_name = C.column_name
LEFT JOIN information_schema.table_constraints TC ON KC.table_name = TC.table_name
  AND KC.table_schema = TC.table_schema
  AND KC.constraint_name = TC.constraint_name
JOIN INFORMATION_SCHEMA.TABLES AS T ON C.TABLE_NAME = T.TABLE_NAME
  AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
  AND C.TABLE_CATALOG = T.TABLE_CATALOG
WHERE
  C.TABLE_SCHEMA = '${e=>e.schema}'
  AND C.TABLE_NAME = '${e=>e.label}'
  AND C.TABLE_CATALOG = '${e=>e.database}'
ORDER BY
  C.TABLE_NAME,
  C.ORDINAL_POSITION
`,vo=mo`
SELECT *
FROM ${e=>ho(e.table)}
LIMIT ${e=>e.limit||50}
OFFSET ${e=>e.offset||0};
`,bo=mo`
SELECT count(1) AS total
FROM ${e=>ho(e.table)};
`,_o=mo`
SELECT
  '${fo.ContextValue.FUNCTION}' as type,
  f.proname AS name,
  f.proname AS label,
  quote_ident(f.proname) || '(' || oidvectortypes(f.proargtypes)::TEXT || ')' AS detail,
  n.nspname AS schema,
  current_database() AS database,
  quote_ident(n.nspname) || '.' || quote_ident(f.proname) AS signature,
  format_type(f.prorettype, null) AS "resultType",
  oidvectortypes(f.proargtypes) AS args,
  proargnames AS "argsNames",
  f.prosrc AS source,
  'function' as "iconName",
  '${fo.ContextValue.NO_CHILD}' as "childType"
FROM
  pg_catalog.pg_proc AS f
INNER JOIN pg_catalog.pg_namespace AS n on n.oid = f.pronamespace
WHERE
  n.nspname = '${e=>e.schema}'
ORDER BY name
;`,Eo=(e,t="BASE TABLE")=>mo`
SELECT
  T.TABLE_NAME AS label,
  '${e}' as type,
  T.TABLE_SCHEMA AS schema,
  T.TABLE_CATALOG AS database,
  ${e===fo.ContextValue.VIEW?"TRUE":"FALSE"} AS isView
FROM INFORMATION_SCHEMA.TABLES AS T
WHERE
  T.TABLE_SCHEMA = '${e=>e.schema}'
  AND T.TABLE_CATALOG = '${e=>e.database}'
  AND T.TABLE_TYPE = '${t}'
ORDER BY
  T.TABLE_NAME;
`,wo=mo`
SELECT
  T.TABLE_NAME AS label,
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN '${fo.ContextValue.TABLE}' ELSE '${fo.ContextValue.VIEW}' END) as type,
  T.TABLE_SCHEMA AS schema,
  T.TABLE_CATALOG AS database,
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN FALSE ELSE TRUE END) AS "isView",
  (CASE WHEN T.TABLE_TYPE = 'BASE TABLE' THEN 'table' ELSE 'view' END) AS description,
  ('"' || T.TABLE_CATALOG || '"."' || T.TABLE_SCHEMA || '"."' || T.TABLE_NAME || '"') as detail
FROM INFORMATION_SCHEMA.TABLES AS T
WHERE
  T.TABLE_SCHEMA !~ '^pg_'
  AND T.TABLE_SCHEMA <> 'information_schema'
  ${e=>e.search?`AND (\n    (T.TABLE_CATALOG || '.' || T.TABLE_SCHEMA || '.' || T.TABLE_NAME) ILIKE '%${e.search}%'\n    OR ('"' || T.TABLE_CATALOG || '"."' || T.TABLE_SCHEMA || '"."' || T.TABLE_NAME || '"') ILIKE '%${e.search}%'\n    OR T.TABLE_NAME ILIKE '%${e.search}%'\n  )`:""}
ORDER BY
  T.TABLE_NAME
LIMIT ${e=>e.limit||100};
`,To=mo`
SELECT
  C.COLUMN_NAME AS label,
  '${fo.ContextValue.COLUMN}' as type,
  C.TABLE_NAME AS table,
  C.DATA_TYPE AS "dataType",
  C.CHARACTER_MAXIMUM_LENGTH::INT AS size,
  C.TABLE_CATALOG AS database,
  C.TABLE_SCHEMA AS schema,
  C.COLUMN_DEFAULT AS defaultValue,
  C.IS_NULLABLE AS isNullable,
  (CASE WHEN LOWER(TC.constraint_type) = 'primary key' THEN TRUE ELSE FALSE END) as "isPk",
  (CASE WHEN LOWER(TC.constraint_type) = 'foreign key' THEN TRUE ELSE FALSE END) as "isFk"
FROM
  INFORMATION_SCHEMA.COLUMNS C
LEFT JOIN information_schema.key_column_usage KC ON KC.table_name = C.table_name
  AND KC.table_schema = C.table_schema
  AND KC.column_name = C.column_name
LEFT JOIN information_schema.table_constraints TC ON KC.table_name = TC.table_name
  AND KC.table_schema = TC.table_schema
  AND KC.constraint_name = TC.constraint_name
JOIN INFORMATION_SCHEMA.TABLES AS T ON C.TABLE_NAME = T.TABLE_NAME
  AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
  AND C.TABLE_CATALOG = T.TABLE_CATALOG
WHERE
  C.TABLE_SCHEMA !~ '^pg_'
  AND C.TABLE_SCHEMA <> 'information_schema'
  ${e=>e.tables.filter(e=>!!e.label).length?`AND LOWER(C.TABLE_NAME) IN (${e.tables.filter(e=>!!e.label).map(e=>`'${e.label}'`.toLowerCase()).join(", ")})`:""}
  ${e=>e.search?`AND (\n      (C.TABLE_NAME || '.' || C.COLUMN_NAME) ILIKE '%${e.search}%'\n      OR C.COLUMN_NAME ILIKE '%${e.search}%'\n    )`:""}
ORDER BY
  C.TABLE_NAME,
  C.ORDINAL_POSITION
LIMIT ${e=>e.limit||100}
`,Ro=Eo(fo.ContextValue.TABLE),So=Eo(fo.ContextValue.VIEW,"VIEW"),Co=mo`
SELECT
  '${fo.ContextValue.MATERIALIZED_VIEW}' as type,
  (current_database())::information_schema.sql_identifier AS database,
  (nc.nspname)::information_schema.sql_identifier AS schema,
  (c.relname)::information_schema.sql_identifier AS label,
  'view' AS "iconName",
  '${fo.ContextValue.NO_CHILD}' as "childType"
FROM pg_namespace nc,
  pg_class c
WHERE
  nc.nspname = '${e=>e.schema}'
  AND (
    (c.relnamespace = nc.oid)
    AND (c.relkind = 'm'::"char")
    AND (NOT pg_is_other_temp_schema(nc.oid))
    AND (
      pg_has_role(c.relowner, 'USAGE'::text)
      OR has_table_privilege(
        c.oid,
        'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'::text
      )
      OR has_any_column_privilege(
        c.oid,
        'SELECT, INSERT, UPDATE, REFERENCES'::text
      )
    )
  );
`;var Oo,ko,No,Ao,Po={describeTable:go,countRecords:bo,fetchColumns:yo,fetchRecords:vo,fetchTables:Ro,fetchViews:So,fetchFunctions:_o,fetchDatabases:mo`
SELECT
  db.*,
  db.datname as "label",
  db.datname as "database",
  '${fo.ContextValue.DATABASE}' as "type",
  'database' as "detail"
FROM pg_catalog.pg_database db
WHERE
  datallowconn
  AND NOT datistemplate
  AND db.datname = CURRENT_DATABASE()
ORDER BY
  db.datname;
`,fetchSchemas:mo`
SELECT
  schema_name AS label,
  schema_name AS schema,
  '${fo.ContextValue.SCHEMA}' as "type",
  'group-by-ref-type' as "iconId",
  catalog_name as database
FROM information_schema.schemata
WHERE
  schema_name !~ '^pg_'
  AND schema_name <> 'information_schema'
  AND catalog_name = '${e=>e.database}'
`,fetchMaterializedViews:Co,searchTables:wo,searchColumns:To},Io={};Object.defineProperty(Io,"__esModule",{value:!0});var Lo,Mo={};function xo(e){for(var t in e)Mo.hasOwnProperty(t)||(Mo[t]=e[t])}Object.defineProperty(Mo,"__esModule",{value:!0});var Do,qo,jo,Fo,$o,Bo,Uo={};function Ho(e){for(var t in e)Uo.hasOwnProperty(t)||(Uo[t]=e[t])}Object.defineProperty(Uo,"__esModule",{value:!0});var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});var Go=function(e){return!0===e||!1===e};function Vo(e){return"string"==typeof e||e instanceof String}Wo.boolean=Go;var zo=Vo;Wo.string=zo;var Qo=function(e){return"number"==typeof e||e instanceof Number};Wo.number=Qo;var Ko=function(e){return e instanceof Error};Wo.error=Ko;var Jo=function(e){return"function"==typeof e};function Yo(e){return Array.isArray(e)}Wo.func=Jo;var Xo=Yo;Wo.array=Xo;var Zo=function(e){return Yo(e)&&e.every(e=>Vo(e))};Wo.stringArray=Zo;var ea,ta,ra,na={};Object.defineProperty(na,"__esModule",{value:!0}),(ra=ta=na.ErrorCodes||(ea={},na.ErrorCodes=ea)).ParseError=-32700,ra.InvalidRequest=-32600,ra.MethodNotFound=-32601,ra.InvalidParams=-32602,ra.InternalError=-32603,ra.serverErrorStart=-32099,ra.serverErrorEnd=-32e3,ra.ServerNotInitialized=-32002,ra.UnknownErrorCode=-32001,ra.RequestCancelled=-32800,ra.ContentModified=-32801,ra.MessageWriteError=1,ra.MessageReadError=2;class ia extends Error{constructor(e,t,r){super(t),this.code=Wo.number(e)?e:ta.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,ia.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}var sa=ia;na.ResponseError=sa;class oa{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}var aa=oa;na.AbstractMessageType=aa;var ca=class extends oa{constructor(e){super(e,0)}};na.RequestType0=ca;var ua=class extends oa{constructor(e){super(e,1)}};na.RequestType=ua;var la=class extends oa{constructor(e){super(e,1)}};na.RequestType1=la;var ha=class extends oa{constructor(e){super(e,2)}};na.RequestType2=ha;var fa=class extends oa{constructor(e){super(e,3)}};na.RequestType3=fa;var da=class extends oa{constructor(e){super(e,4)}};na.RequestType4=da;var pa=class extends oa{constructor(e){super(e,5)}};na.RequestType5=pa;var ma=class extends oa{constructor(e){super(e,6)}};na.RequestType6=ma;var ga=class extends oa{constructor(e){super(e,7)}};na.RequestType7=ga;var ya=class extends oa{constructor(e){super(e,8)}};na.RequestType8=ya;var va=class extends oa{constructor(e){super(e,9)}};na.RequestType9=va;var ba=class extends oa{constructor(e){super(e,1),this._=void 0}};na.NotificationType=ba;var _a=class extends oa{constructor(e){super(e,0)}};na.NotificationType0=_a;var Ea=class extends oa{constructor(e){super(e,1)}};na.NotificationType1=Ea;var wa=class extends oa{constructor(e){super(e,2)}};na.NotificationType2=wa;var Ta=class extends oa{constructor(e){super(e,3)}};na.NotificationType3=Ta;var Ra=class extends oa{constructor(e){super(e,4)}};na.NotificationType4=Ra;var Sa=class extends oa{constructor(e){super(e,5)}};na.NotificationType5=Sa;var Ca=class extends oa{constructor(e){super(e,6)}};na.NotificationType6=Ca;var Oa=class extends oa{constructor(e){super(e,7)}};na.NotificationType7=Oa;var ka=class extends oa{constructor(e){super(e,8)}};na.NotificationType8=ka;var Na=class extends oa{constructor(e){super(e,9)}};na.NotificationType9=Na;var Aa=function(e){let t=e;return t&&Wo.string(t.method)&&(Wo.string(t.id)||Wo.number(t.id))};na.isRequestMessage=Aa;var Pa=function(e){let t=e;return t&&Wo.string(t.method)&&void 0===e.id};na.isNotificationMessage=Pa;var Ia=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(Wo.string(t.id)||Wo.number(t.id)||null===t.id)};na.isResponseMessage=Ia;var La=na.RequestType;Uo.RequestType=La;var Ma=na.RequestType0;Uo.RequestType0=Ma;var xa=na.RequestType1;Uo.RequestType1=xa;var Da=na.RequestType2;Uo.RequestType2=Da;var qa=na.RequestType3;Uo.RequestType3=qa;var ja=na.RequestType4;Uo.RequestType4=ja;var Fa=na.RequestType5;Uo.RequestType5=Fa;var $a=na.RequestType6;Uo.RequestType6=$a;var Ba=na.RequestType7;Uo.RequestType7=Ba;var Ua=na.RequestType8;Uo.RequestType8=Ua;var Ha=na.RequestType9;Uo.RequestType9=Ha;var Wa=na.ResponseError;Uo.ResponseError=Wa;var Ga=na.ErrorCodes;Uo.ErrorCodes=Ga;var Va=na.NotificationType;Uo.NotificationType=Va;var za=na.NotificationType0;Uo.NotificationType0=za;var Qa=na.NotificationType1;Uo.NotificationType1=Qa;var Ka=na.NotificationType2;Uo.NotificationType2=Ka;var Ja=na.NotificationType3;Uo.NotificationType3=Ja;var Ya=na.NotificationType4;Uo.NotificationType4=Ya;var Xa=na.NotificationType5;Uo.NotificationType5=Xa;var Za=na.NotificationType6;Uo.NotificationType6=Za;var ec=na.NotificationType7;Uo.NotificationType7=ec;var tc=na.NotificationType8;Uo.NotificationType8=tc;var rc=na.NotificationType9;Uo.NotificationType9=rc;var nc,ic={};Object.defineProperty(ic,"__esModule",{value:!0});var sc,oc,ac={};Object.defineProperty(ac,"__esModule",{value:!0}),(ac.Disposable||(sc={},ac.Disposable=sc)).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(ac.Event||(oc={},ac.Event=oc));class cc{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var r=!1,n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0),i=0,s=r.length;i<s;i++)try{t.push(r[i].apply(n[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class uc{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{let n;return this._callbacks||(this._callbacks=new cc),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),n={dispose:()=>{this._callbacks.remove(e,t),n.dispose=uc._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}var lc=uc;ac.Emitter=lc,uc._noop=function(){};let hc=Buffer.from("\r","ascii")[0],fc=Buffer.from("\n","ascii")[0];class dc{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}append(e){var t=e;if("string"==typeof e){var r=e,n=Buffer.byteLength(r,this.encoding);(t=Buffer.allocUnsafe(n)).write(r,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=8192*(Math.ceil((this.index+t.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==hc||this.buffer[t+1]!==fc||this.buffer[t+2]!==hc||this.buffer[t+3]!==fc);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach(t=>{let r=t.indexOf(":");if(-1===r)throw new Error("Message header must separate key and value using :");let n=t.substr(0,r),i=t.substr(r+1).trim();e[n]=i});let r=t+4;return this.buffer=this.buffer.slice(r),this.index=this.index-r,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),r=e;return this.buffer.copy(this.buffer,0,r),this.index=this.index-r,t}get numberOfBytes(){return this.index}}(ic.MessageReader||(nc={},ic.MessageReader=nc)).is=function(e){let t=e;return t&&Wo.func(t.listen)&&Wo.func(t.dispose)&&Wo.func(t.onError)&&Wo.func(t.onClose)&&Wo.func(t.onPartialMessage)};class pc{constructor(){this.errorEmitter=new ac.Emitter,this.closeEmitter=new ac.Emitter,this.partialMessageEmitter=new ac.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(Wo.string(e.message)?e.message:"unknown"))}}var mc=pc;ic.AbstractMessageReader=mc;class gc extends pc{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new dc(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let r=parseInt(t);if(isNaN(r))throw new Error("Content-Length value must be a number.");this.nextMessageLength=r}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var r=JSON.parse(t);this.callback(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}var yc=gc;ic.StreamMessageReader=yc;var vc=class extends pc{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};ic.IPCMessageReader=vc;var bc=class extends gc{constructor(e,t="utf-8"){super(e,t)}};ic.SocketMessageReader=bc;var _c=ic.MessageReader;Uo.MessageReader=_c;var Ec=ic.StreamMessageReader;Uo.StreamMessageReader=Ec;var wc=ic.IPCMessageReader;Uo.IPCMessageReader=wc;var Tc=ic.SocketMessageReader;Uo.SocketMessageReader=Tc;var Rc,Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});(Sc.MessageWriter||(Rc={},Sc.MessageWriter=Rc)).is=function(e){let t=e;return t&&Wo.func(t.dispose)&&Wo.func(t.onClose)&&Wo.func(t.onError)&&Wo.func(t.write)};class Cc{constructor(){this.errorEmitter=new ac.Emitter,this.closeEmitter=new ac.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(Wo.string(e.message)?e.message:"unknown"))}}var Oc=Cc;Sc.AbstractMessageWriter=Oc;var kc=class extends Cc{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};Sc.StreamMessageWriter=kc;var Nc=class extends Cc{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};Sc.IPCMessageWriter=Nc;var Ac=class extends Cc{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(r.join(""),"ascii",r=>{r&&this.handleError(r,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(r){this.handleError(r,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}};Sc.SocketMessageWriter=Ac;var Pc=Sc.MessageWriter;Uo.MessageWriter=Pc;var Ic=Sc.StreamMessageWriter;Uo.StreamMessageWriter=Ic;var Lc=Sc.IPCMessageWriter;Uo.IPCMessageWriter=Lc;var Mc=Sc.SocketMessageWriter;Uo.SocketMessageWriter=Mc;var xc=ac.Disposable;Uo.Disposable=xc;var Dc=ac.Event;Uo.Event=Dc;var qc=ac.Emitter;Uo.Emitter=qc;var jc,Fc,$c,Bc={};Object.defineProperty(Bc,"__esModule",{value:!0}),($c=Fc=Bc.CancellationToken||(jc={},Bc.CancellationToken=jc)).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ac.Event.None}),$c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ac.Event.None}),$c.is=function(e){let t=e;return t&&(t===$c.None||t===$c.Cancelled||Wo.boolean(t.isCancellationRequested)&&!!t.onCancellationRequested)};const Uc=Object.freeze((function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}));class Hc{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Uc:(this._emitter||(this._emitter=new ac.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}var Wc=class{get token(){return this._token||(this._token=new Hc),this._token}cancel(){this._token?this._token.cancel():this._token=Fc.Cancelled}dispose(){this._token?this._token instanceof Hc&&this._token.dispose():this._token=Fc.None}};Bc.CancellationTokenSource=Wc;var Gc=Bc.CancellationTokenSource;Uo.CancellationTokenSource=Gc;var Vc=Bc.CancellationToken;Uo.CancellationToken=Vc;var zc,Qc,Kc,Jc={};Object.defineProperty(Jc,"__esModule",{value:!0}),(Kc=Qc=Jc.Touch||(zc={},Jc.Touch=zc)).None=0,Kc.First=1,Kc.Last=2;var Yc=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=Qc.None){let n=this._map.get(e);if(n)n.value=t,r!==Qc.None&&this.touch(n,r);else{switch(n={key:e,value:t,next:void 0,previous:void 0},r){case Qc.None:this.addItemLast(n);break;case Qc.First:this.addItemFirst(n);break;case Qc.Last:default:this.addItemLast(n)}this._map.set(e,n),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}forEachReverse(e,t){let r=this._tail;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===Qc.First||t===Qc.Last)if(t===Qc.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===Qc.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}};Jc.LinkedMap=Yc;var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});const Zc=p,eu=i,tu=b,ru=a;var nu=function(){const e=tu.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:Zc.join(eu.tmpdir(),`vscode-${e}.sock`)};Xc.generateRandomPipeName=nu;var iu=function(e,t="utf-8"){let r,n=new Promise((e,t)=>{r=e});return new Promise((i,s)=>{let o=ru.createServer(e=>{o.close(),r([new ic.SocketMessageReader(e,t),new Sc.SocketMessageWriter(e,t)])});o.on("error",s),o.listen(e,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})};Xc.createClientPipeTransport=iu;var su=function(e,t="utf-8"){const r=ru.createConnection(e);return[new ic.SocketMessageReader(r,t),new Sc.SocketMessageWriter(r,t)]};Xc.createServerPipeTransport=su,Ho(Xc);var ou={};Object.defineProperty(ou,"__esModule",{value:!0});const au=a;var cu=function(e,t="utf-8"){let r,n=new Promise((e,t)=>{r=e});return new Promise((i,s)=>{let o=au.createServer(e=>{o.close(),r([new ic.SocketMessageReader(e,t),new Sc.SocketMessageWriter(e,t)])});o.on("error",s),o.listen(e,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})};ou.createClientSocketTransport=cu;var uu,lu,hu=function(e,t="utf-8"){const r=au.createConnection(e,"127.0.0.1");return[new ic.SocketMessageReader(r,t),new Sc.SocketMessageWriter(r,t)]};ou.createServerSocketTransport=hu,Ho(ou),(uu||(uu={})).type=new na.NotificationType("$/cancelRequest"),(lu||(lu={})).type=new na.NotificationType("$/progress");var fu=class{constructor(){}};Uo.ProgressType=fu;var du,pu,mu,gu,yu,vu,bu,_u,Eu=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});Uo.NullLogger=Eu,(pu=du=Uo.Trace||(Do={},Uo.Trace=Do))[pu.Off=0]="Off",pu[pu.Messages=1]="Messages",pu[pu.Verbose=2]="Verbose",function(e){e.fromString=function(t){if(!Wo.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(du=Uo.Trace||(Do={},Uo.Trace=Do)),(gu=Uo.TraceFormat||(qo={},Uo.TraceFormat=qo)).Text="text",gu.JSON="json",function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(mu=Uo.TraceFormat||(qo={},Uo.TraceFormat=qo)),(yu=Uo.SetTraceNotification||(jo={},Uo.SetTraceNotification=jo)).type=new na.NotificationType("$/setTraceNotification"),(vu=Uo.LogTraceNotification||(Fo={},Uo.LogTraceNotification=Fo)).type=new na.NotificationType("$/logTraceNotification"),(_u=bu=Uo.ConnectionErrors||($o={},Uo.ConnectionErrors=$o))[_u.Closed=1]="Closed",_u[_u.Disposed=2]="Disposed",_u[_u.AlreadyListening=3]="AlreadyListening";class wu extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,wu.prototype)}}var Tu,Ru,Su=wu;function Cu(e,t,r,n){let i=0,s=0,o=0;let a,c,u=void 0,l=Object.create(null),h=void 0,f=Object.create(null),d=new Map,p=new Jc.LinkedMap,m=Object.create(null),g=Object.create(null),y=du.Off,v=mu.Text,b=Tu.New,_=new ac.Emitter,E=new ac.Emitter,w=new ac.Emitter,T=new ac.Emitter,R=new ac.Emitter;function S(e){return"req-"+e.toString()}function C(e,t){var r;na.isRequestMessage(t)?e.set(S(t.id),t):na.isResponseMessage(t)?e.set(null===(r=t.id)?"res-unknown-"+(++o).toString():"res-"+r.toString(),t):e.set("not-"+(++s).toString(),t)}function O(e){}function k(){return b===Tu.Listening}function N(){return b===Tu.Closed}function A(){return b===Tu.Disposed}function P(){b!==Tu.New&&b!==Tu.Listening||(b=Tu.Closed,E.fire(void 0))}function I(){a||0===p.size||(a=setImmediate(()=>{a=void 0,function(){if(0===p.size)return;let e=p.shift();try{na.isRequestMessage(e)?function(e){if(A())return;function r(r,n,i){let s={jsonrpc:"2.0",id:e.id};r instanceof na.ResponseError?s.error=r.toJson():s.result=void 0===r?null:r,M(s,n,i),t.write(s)}function n(r,n,i){let s={jsonrpc:"2.0",id:e.id,error:r.toJson()};M(s,n,i),t.write(s)}!function(e){if(y===du.Off||!c)return;if(v===mu.Text){let t=void 0;y===du.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),c.log(`Received request '${e.method} - (${e.id})'.`,t)}else x("receive-request",e)}(e);let i,s,o=l[e.method];o&&(i=o.type,s=o.handler);let a=Date.now();if(s||u){let o=new Bc.CancellationTokenSource,c=String(e.id);g[c]=o;try{let l;l=void 0===e.params||void 0!==i&&0===i.numberOfParams?s?s(o.token):u(e.method,o.token):Wo.array(e.params)&&(void 0===i||i.numberOfParams>1)?s?s(...e.params,o.token):u(e.method,...e.params,o.token):s?s(e.params,o.token):u(e.method,e.params,o.token);let h=l;l?h.then?h.then(t=>{delete g[c],r(t,e.method,a)},t=>{delete g[c],t instanceof na.ResponseError?n(t,e.method,a):t&&Wo.string(t.message)?n(new na.ResponseError(na.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a):n(new na.ResponseError(na.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}):(delete g[c],r(l,e.method,a)):(delete g[c],function(r,n,i){void 0===r&&(r=null);let s={jsonrpc:"2.0",id:e.id,result:r};M(s,n,i),t.write(s)}(l,e.method,a))}catch(t){delete g[c],t instanceof na.ResponseError?r(t,e.method,a):t&&Wo.string(t.message)?n(new na.ResponseError(na.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a):n(new na.ResponseError(na.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}}else n(new na.ResponseError(na.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,a)}(e):na.isNotificationMessage(e)?function(e){if(A())return;let t,n=void 0;if(e.method===uu.type.method)t=e=>{let t=e.id,r=g[String(t)];r&&r.cancel()};else{let r=f[e.method];r&&(t=r.handler,n=r.type)}if(t||h)try{!function(e){if(y===du.Off||!c||e.method===vu.type.method)return;if(v===mu.Text){let t=void 0;y===du.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),c.log(`Received notification '${e.method}'.`,t)}else x("receive-notification",e)}(e),void 0===e.params||void 0!==n&&0===n.numberOfParams?t?t():h(e.method):Wo.array(e.params)&&(void 0===n||n.numberOfParams>1)?t?t(...e.params):h(e.method,...e.params):t?t(e.params):h(e.method,e.params)}catch(t){t.message?r.error(`Notification handler '${e.method}' failed with message: ${t.message}`):r.error(`Notification handler '${e.method}' failed unexpectedly.`)}else w.fire(e)}(e):na.isResponseMessage(e)?function(e){if(A())return;if(null===e.id)e.error?r.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):r.error("Received response message without id. No further error information provided.");else{let t=String(e.id),n=m[t];if(function(e,t){if(y===du.Off||!c)return;if(v===mu.Text){let r=void 0;if(y===du.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";c.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else c.log(`Received response ${e.id} without active response promise.`,r)}else x("receive-response",e)}(e,n),n){delete m[t];try{if(e.error){let t=e.error;n.reject(new na.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?r.error(`Response handler '${n.method}' failed with message: ${e.message}`):r.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));let t=e;if(Wo.string(t.id)||Wo.number(t.id)){let e=String(t.id),r=m[e];r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{I()}}()}))}e.onClose(P),e.onError((function(e){_.fire([e,void 0,void 0])})),t.onClose(P),t.onError((function(e){_.fire(e)}));let L=e=>{try{if(na.isNotificationMessage(e)&&e.method===uu.type.method){let r=S(e.params.id),i=p.get(r);if(na.isRequestMessage(i)){let s=n&&n.cancelUndispatched?n.cancelUndispatched(i,O):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return p.delete(r),s.id=i.id,M(s,e.method,Date.now()),void t.write(s)}}C(p,e)}finally{I()}};function M(e,t,r){if(y!==du.Off&&c)if(v===mu.Text){let n=void 0;y===du.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),c.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else x("send-response",e)}function x(e,t){if(!c||y===du.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};c.log(r)}function D(){if(N())throw new wu(bu.Closed,"Connection is closed.");if(A())throw new wu(bu.Disposed,"Connection is disposed.")}function q(e){return void 0===e?null:e}function j(e,t){let r,n=e.numberOfParams;switch(n){case 0:r=null;break;case 1:r=q(t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(q(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}let F={sendNotification:(e,...r)=>{let n,i;if(D(),Wo.string(e))switch(n=e,r.length){case 0:i=null;break;case 1:i=r[0];break;default:i=r}else n=e.method,i=j(e,r);let s={jsonrpc:"2.0",method:n,params:i};!function(e){if(y!==du.Off&&c)if(v===mu.Text){let t=void 0;y===du.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),c.log(`Sending notification '${e.method}'.`,t)}else x("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{D(),Wo.func(e)?h=e:t&&(Wo.string(e)?f[e]={type:void 0,handler:t}:f[e.method]={type:e,handler:t})},onProgress:(e,t,r)=>{if(d.has(t))throw new Error(`Progress handler for token ${t} already registered`);return d.set(t,r),{dispose:()=>{d.delete(t)}}},sendProgress:(e,t,r)=>{F.sendNotification(lu.type,{token:t,value:r})},onUnhandledProgress:T.event,sendRequest:(e,...r)=>{let n,s;D(),function(){if(!k())throw new Error("Call listen() first.")}();let o=void 0;if(Wo.string(e))switch(n=e,r.length){case 0:s=null;break;case 1:Bc.CancellationToken.is(r[0])?(s=null,o=r[0]):s=q(r[0]);break;default:const e=r.length-1;Bc.CancellationToken.is(r[e])?(o=r[e],s=2===r.length?q(r[0]):r.slice(0,e).map(e=>q(e))):s=r.map(e=>q(e))}else{n=e.method,s=j(e,r);let t=e.numberOfParams;o=Bc.CancellationToken.is(r[t])?r[t]:void 0}let a=i++,u=new Promise((e,r)=>{let i={jsonrpc:"2.0",id:a,method:n,params:s},o={method:n,timerStart:Date.now(),resolve:e,reject:r};!function(e){if(y!==du.Off&&c)if(v===mu.Text){let t=void 0;y===du.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),c.log(`Sending request '${e.method} - (${e.id})'.`,t)}else x("send-request",e)}(i);try{t.write(i)}catch(e){o.reject(new na.ResponseError(na.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),o=null}o&&(m[String(a)]=o)});return o&&o.onCancellationRequested(()=>{F.sendNotification(uu.type,{id:a})}),u},onRequest:(e,t)=>{D(),Wo.func(e)?u=e:t&&(Wo.string(e)?l[e]={type:void 0,handler:t}:l[e.method]={type:e,handler:t})},trace:(e,t,r)=>{let n=!1,i=mu.Text;void 0!==r&&(Wo.boolean(r)?n=r:(n=r.sendNotification||!1,i=r.traceFormat||mu.Text)),y=e,v=i,c=y===du.Off?void 0:t,!n||N()||A()||F.sendNotification(yu.type,{value:du.toString(e)})},onError:_.event,onClose:E.event,onUnhandledNotification:w.event,onDispose:R.event,dispose:()=>{if(A())return;b=Tu.Disposed,R.fire(void 0);let r=new Error("Connection got disposed.");Object.keys(m).forEach(e=>{m[e].reject(r)}),m=Object.create(null),g=Object.create(null),p=new Jc.LinkedMap,Wo.func(t.dispose)&&t.dispose(),Wo.func(e.dispose)&&e.dispose()},listen:()=>{D(),function(){if(k())throw new wu(bu.AlreadyListening,"Connection is already listening")}(),b=Tu.Listening,e.listen(L)},inspect:()=>{console.log("inspect")}};return F.onNotification(vu.type,e=>{y!==du.Off&&c&&c.log(e.message,y===du.Verbose?e.verbose:void 0)}),F.onNotification(lu.type,e=>{const t=d.get(e.token);t?t(e.value):T.fire(e)}),F}Uo.ConnectionError=Su,(Uo.ConnectionStrategy||(Bo={},Uo.ConnectionStrategy=Bo)).is=function(e){let t=e;return t&&Wo.func(t.cancelUndispatched)},(Ru=Tu||(Tu={}))[Ru.New=1]="New",Ru[Ru.Listening=2]="Listening",Ru[Ru.Closed=3]="Closed",Ru[Ru.Disposed=4]="Disposed";var Ou=function(e,t,r,n){var i;return r||(r=Uo.NullLogger),Cu(void 0!==(i=e).listen&&void 0===i.read?e:new ic.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(t)?t:new Sc.StreamMessageWriter(t),r,n)};Uo.createMessageConnection=Ou;var ku=Uo.ErrorCodes;Mo.ErrorCodes=ku;var Nu=Uo.ResponseError;Mo.ResponseError=Nu;var Au=Uo.CancellationToken;Mo.CancellationToken=Au;var Pu=Uo.CancellationTokenSource;Mo.CancellationTokenSource=Pu;var Iu=Uo.Disposable;Mo.Disposable=Iu;var Lu=Uo.Event;Mo.Event=Lu;var Mu=Uo.Emitter;Mo.Emitter=Mu;var xu=Uo.Trace;Mo.Trace=xu;var Du=Uo.TraceFormat;Mo.TraceFormat=Du;var qu=Uo.SetTraceNotification;Mo.SetTraceNotification=qu;var ju=Uo.LogTraceNotification;Mo.LogTraceNotification=ju;var Fu=Uo.RequestType;Mo.RequestType=Fu;var $u=Uo.RequestType0;Mo.RequestType0=$u;var Bu=Uo.NotificationType;Mo.NotificationType=Bu;var Uu=Uo.NotificationType0;Mo.NotificationType0=Uu;var Hu=Uo.MessageReader;Mo.MessageReader=Hu;var Wu=Uo.MessageWriter;Mo.MessageWriter=Wu;var Gu=Uo.ConnectionStrategy;Mo.ConnectionStrategy=Gu;var Vu=Uo.StreamMessageReader;Mo.StreamMessageReader=Vu;var zu=Uo.StreamMessageWriter;Mo.StreamMessageWriter=zu;var Qu=Uo.IPCMessageReader;Mo.IPCMessageReader=Qu;var Ku=Uo.IPCMessageWriter;Mo.IPCMessageWriter=Ku;var Ju=Uo.createClientPipeTransport;Mo.createClientPipeTransport=Ju;var Yu=Uo.createServerPipeTransport;Mo.createServerPipeTransport=Yu;var Xu=Uo.generateRandomPipeName;Mo.generateRandomPipeName=Xu;var Zu=Uo.createClientSocketTransport;Mo.createClientSocketTransport=Zu;var el=Uo.createServerSocketTransport;Mo.createServerSocketTransport=el;var tl=Uo.ProgressType;Mo.ProgressType=tl;var rl,nl,il,sl,ol,al,cl,ul,ll,hl,fl,dl,pl,ml,gl,yl,vl,bl,_l,El,wl,Tl,Rl,Sl,Cl,Ol,kl,Nl,Al,Pl,Il,Ll,Ml,xl,Dl,ql,jl,Fl,$l,Bl,Ul,Hl,Wl,Gl,Vl,zl,Ql,Kl,Jl,Yl,Xl,Zl,eh,th,rh,nh,ih,sh,oh,ah,ch,uh,lh,hh,fh,dh,ph,mh,gh,yh,vh,bh,_h,Eh,wh,Th,Rh,Sh,Ch,Oh,kh,Nh,Ah,Ph,Ih,Lh,Mh,xh,Dh={};Dh.Position=Yl,(Xl=Yl||(rl=Yl={},Dh.Position=Yl,rl)).create=function(e,t){return{line:e,character:t}},Xl.is=function(e){var t=e;return If.objectLiteral(t)&&If.number(t.line)&&If.number(t.character)},Dh.Range=Zl,(eh=Zl||(nl=Zl={},Dh.Range=Zl,nl)).create=function(e,t,r,n){if(If.number(e)&&If.number(t)&&If.number(r)&&If.number(n))return{start:Yl.create(e,t),end:Yl.create(r,n)};if(Yl.is(e)&&Yl.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+r+", "+n+"]")},eh.is=function(e){var t=e;return If.objectLiteral(t)&&Yl.is(t.start)&&Yl.is(t.end)},Dh.Location=th,(rh=th||(il=th={},Dh.Location=th,il)).create=function(e,t){return{uri:e,range:t}},rh.is=function(e){var t=e;return If.defined(t)&&Zl.is(t.range)&&(If.string(t.uri)||If.undefined(t.uri))},Dh.LocationLink=nh,(ih=nh||(sl=nh={},Dh.LocationLink=nh,sl)).create=function(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}},ih.is=function(e){var t=e;return If.defined(t)&&Zl.is(t.targetRange)&&If.string(t.targetUri)&&(Zl.is(t.targetSelectionRange)||If.undefined(t.targetSelectionRange))&&(Zl.is(t.originSelectionRange)||If.undefined(t.originSelectionRange))},Dh.Color=sh,(oh=sh||(ol=sh={},Dh.Color=sh,ol)).create=function(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}},oh.is=function(e){var t=e;return If.number(t.red)&&If.number(t.green)&&If.number(t.blue)&&If.number(t.alpha)},Dh.ColorInformation=ah,(ch=ah||(al=ah={},Dh.ColorInformation=ah,al)).create=function(e,t){return{range:e,color:t}},ch.is=function(e){var t=e;return Zl.is(t.range)&&sh.is(t.color)},Dh.ColorPresentation=uh,(lh=uh||(cl=uh={},Dh.ColorPresentation=uh,cl)).create=function(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}},lh.is=function(e){var t=e;return If.string(t.label)&&(If.undefined(t.textEdit)||Sh.is(t))&&(If.undefined(t.additionalTextEdits)||If.typedArray(t.additionalTextEdits,Sh.is))},Dh.FoldingRangeKind=hh,(fh=hh||(ul=hh={},Dh.FoldingRangeKind=hh,ul)).Comment="comment",fh.Imports="imports",fh.Region="region",Dh.FoldingRange=dh,(ph=dh||(ll=dh={},Dh.FoldingRange=dh,ll)).create=function(e,t,r,n,i){var s={startLine:e,endLine:t};return If.defined(r)&&(s.startCharacter=r),If.defined(n)&&(s.endCharacter=n),If.defined(i)&&(s.kind=i),s},ph.is=function(e){var t=e;return If.number(t.startLine)&&If.number(t.startLine)&&(If.undefined(t.startCharacter)||If.number(t.startCharacter))&&(If.undefined(t.endCharacter)||If.number(t.endCharacter))&&(If.undefined(t.kind)||If.string(t.kind))},Dh.DiagnosticRelatedInformation=mh,(gh=mh||(hl=mh={},Dh.DiagnosticRelatedInformation=mh,hl)).create=function(e,t){return{location:e,message:t}},gh.is=function(e){var t=e;return If.defined(t)&&th.is(t.location)&&If.string(t.message)},Dh.DiagnosticSeverity=yh,(vh=yh||(fl=yh={},Dh.DiagnosticSeverity=yh,fl)).Error=1,vh.Warning=2,vh.Information=3,vh.Hint=4,Dh.DiagnosticTag=bh,(_h=bh||(dl=bh={},Dh.DiagnosticTag=bh,dl)).Unnecessary=1,_h.Deprecated=2,Dh.Diagnostic=Eh,(wh=Eh||(pl=Eh={},Dh.Diagnostic=Eh,pl)).create=function(e,t,r,n,i,s){var o={range:e,message:t};return If.defined(r)&&(o.severity=r),If.defined(n)&&(o.code=n),If.defined(i)&&(o.source=i),If.defined(s)&&(o.relatedInformation=s),o},wh.is=function(e){var t=e;return If.defined(t)&&Zl.is(t.range)&&If.string(t.message)&&(If.number(t.severity)||If.undefined(t.severity))&&(If.number(t.code)||If.string(t.code)||If.undefined(t.code))&&(If.string(t.source)||If.undefined(t.source))&&(If.undefined(t.relatedInformation)||If.typedArray(t.relatedInformation,mh.is))},Dh.Command=Th,(Rh=Th||(ml=Th={},Dh.Command=Th,ml)).create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={title:e,command:t};return If.defined(r)&&r.length>0&&(i.arguments=r),i},Rh.is=function(e){var t=e;return If.defined(t)&&If.string(t.title)&&If.string(t.command)},Dh.TextEdit=Sh,(Ch=Sh||(gl=Sh={},Dh.TextEdit=Sh,gl)).replace=function(e,t){return{range:e,newText:t}},Ch.insert=function(e,t){return{range:{start:e,end:e},newText:t}},Ch.del=function(e){return{range:e,newText:""}},Ch.is=function(e){var t=e;return If.objectLiteral(t)&&If.string(t.newText)&&Zl.is(t.range)},Dh.TextDocumentEdit=Oh,(kh=Oh||(yl=Oh={},Dh.TextDocumentEdit=Oh,yl)).create=function(e,t){return{textDocument:e,edits:t}},kh.is=function(e){var t=e;return If.defined(t)&&Fh.is(t.textDocument)&&Array.isArray(t.edits)},Dh.CreateFile=Nh,(Ah=Nh||(vl=Nh={},Dh.CreateFile=Nh,vl)).create=function(e,t){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),r},Ah.is=function(e){var t=e;return t&&"create"===t.kind&&If.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||If.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||If.boolean(t.options.ignoreIfExists)))},Dh.RenameFile=Ph,(Ih=Ph||(bl=Ph={},Dh.RenameFile=Ph,bl)).create=function(e,t,r){var n={kind:"rename",oldUri:e,newUri:t};return void 0===r||void 0===r.overwrite&&void 0===r.ignoreIfExists||(n.options=r),n},Ih.is=function(e){var t=e;return t&&"rename"===t.kind&&If.string(t.oldUri)&&If.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||If.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||If.boolean(t.options.ignoreIfExists)))},Dh.DeleteFile=Lh,(Mh=Lh||(_l=Lh={},Dh.DeleteFile=Lh,_l)).create=function(e,t){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),r},Mh.is=function(e){var t=e;return t&&"delete"===t.kind&&If.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||If.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||If.boolean(t.options.ignoreIfNotExists)))},Dh.WorkspaceEdit=xh,(xh||(El=xh={},Dh.WorkspaceEdit=xh,El)).is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return If.string(e.kind)?Nh.is(e)||Ph.is(e)||Lh.is(e):Oh.is(e)})))};var qh,jh,Fh,$h,Bh,Uh,Hh,Wh,Gh,Vh,zh,Qh,Kh,Jh,Yh,Xh,Zh,ef,tf,rf,nf,sf,of,af,cf,uf,lf,hf,ff,df,pf,mf,gf,yf,vf,bf,_f,Ef,wf,Tf,Rf,Sf,Cf,Of,kf=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(Sh.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(Sh.replace(e,t))},e.prototype.delete=function(e){this.edits.push(Sh.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Nf=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(Oh.is(e)){var r=new kf(e.edits);t._textEditChanges[e.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach((function(r){var n=new kf(e.changes[r]);t._textEditChanges[r]=n})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(Fh.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(n=this._textEditChanges[t.uri])){var r={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(r),n=new kf(i),this._textEditChanges[t.uri]=n}return n}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var n;if(!(n=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,n=new kf(i),this._textEditChanges[e]=n}return n},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(Nh.create(e,t))},e.prototype.renameFile=function(e,t,r){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(Ph.create(e,t,r))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(Lh.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();Dh.WorkspaceChange=Nf,Dh.TextDocumentIdentifier=qh,(jh=qh||(wl=qh={},Dh.TextDocumentIdentifier=qh,wl)).create=function(e){return{uri:e}},jh.is=function(e){var t=e;return If.defined(t)&&If.string(t.uri)},Dh.VersionedTextDocumentIdentifier=Fh,($h=Fh||(Tl=Fh={},Dh.VersionedTextDocumentIdentifier=Fh,Tl)).create=function(e,t){return{uri:e,version:t}},$h.is=function(e){var t=e;return If.defined(t)&&If.string(t.uri)&&(null===t.version||If.number(t.version))},Dh.TextDocumentItem=Bh,(Uh=Bh||(Rl=Bh={},Dh.TextDocumentItem=Bh,Rl)).create=function(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}},Uh.is=function(e){var t=e;return If.defined(t)&&If.string(t.uri)&&If.string(t.languageId)&&If.number(t.version)&&If.string(t.text)},Dh.MarkupKind=Hh,(Wh=Hh||(Sl=Hh={},Dh.MarkupKind=Hh,Sl)).PlainText="plaintext",Wh.Markdown="markdown",function(e){e.is=function(t){var r=t;return r===e.PlainText||r===e.Markdown}}(Hh||(Cl=Hh={},Dh.MarkupKind=Hh,Cl)),Dh.MarkupContent=Gh,(Gh||(Ol=Gh={},Dh.MarkupContent=Gh,Ol)).is=function(e){var t=e;return If.objectLiteral(e)&&Hh.is(t.kind)&&If.string(t.value)},Dh.CompletionItemKind=Vh,(zh=Vh||(kl=Vh={},Dh.CompletionItemKind=Vh,kl)).Text=1,zh.Method=2,zh.Function=3,zh.Constructor=4,zh.Field=5,zh.Variable=6,zh.Class=7,zh.Interface=8,zh.Module=9,zh.Property=10,zh.Unit=11,zh.Value=12,zh.Enum=13,zh.Keyword=14,zh.Snippet=15,zh.Color=16,zh.File=17,zh.Reference=18,zh.Folder=19,zh.EnumMember=20,zh.Constant=21,zh.Struct=22,zh.Event=23,zh.Operator=24,zh.TypeParameter=25,Dh.InsertTextFormat=Qh,(Kh=Qh||(Nl=Qh={},Dh.InsertTextFormat=Qh,Nl)).PlainText=1,Kh.Snippet=2,Dh.CompletionItemTag=Jh,(Jh||(Al=Jh={},Dh.CompletionItemTag=Jh,Al)).Deprecated=1,Dh.CompletionItem=Yh,(Yh||(Pl=Yh={},Dh.CompletionItem=Yh,Pl)).create=function(e){return{label:e}},Dh.CompletionList=Xh,(Xh||(Il=Xh={},Dh.CompletionList=Xh,Il)).create=function(e,t){return{items:e||[],isIncomplete:!!t}},Dh.MarkedString=Zh,(ef=Zh||(Ll=Zh={},Dh.MarkedString=Zh,Ll)).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},ef.is=function(e){var t=e;return If.string(t)||If.objectLiteral(t)&&If.string(t.language)&&If.string(t.value)},Dh.Hover=tf,(tf||(Ml=tf={},Dh.Hover=tf,Ml)).is=function(e){var t=e;return!!t&&If.objectLiteral(t)&&(Gh.is(t.contents)||Zh.is(t.contents)||If.typedArray(t.contents,Zh.is))&&(void 0===e.range||Zl.is(e.range))},Dh.ParameterInformation=rf,(rf||(xl=rf={},Dh.ParameterInformation=rf,xl)).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},Dh.SignatureInformation=nf,(nf||(Dl=nf={},Dh.SignatureInformation=nf,Dl)).create=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={label:e};return If.defined(t)&&(i.documentation=t),If.defined(r)?i.parameters=r:i.parameters=[],i},Dh.DocumentHighlightKind=sf,(of=sf||(ql=sf={},Dh.DocumentHighlightKind=sf,ql)).Text=1,of.Read=2,of.Write=3,Dh.DocumentHighlight=af,(af||(jl=af={},Dh.DocumentHighlight=af,jl)).create=function(e,t){var r={range:e};return If.number(t)&&(r.kind=t),r},Dh.SymbolKind=cf,(uf=cf||(Fl=cf={},Dh.SymbolKind=cf,Fl)).File=1,uf.Module=2,uf.Namespace=3,uf.Package=4,uf.Class=5,uf.Method=6,uf.Property=7,uf.Field=8,uf.Constructor=9,uf.Enum=10,uf.Interface=11,uf.Function=12,uf.Variable=13,uf.Constant=14,uf.String=15,uf.Number=16,uf.Boolean=17,uf.Array=18,uf.Object=19,uf.Key=20,uf.Null=21,uf.EnumMember=22,uf.Struct=23,uf.Event=24,uf.Operator=25,uf.TypeParameter=26,Dh.SymbolTag=lf,(lf||($l=lf={},Dh.SymbolTag=lf,$l)).Deprecated=1,Dh.SymbolInformation=hf,(hf||(Bl=hf={},Dh.SymbolInformation=hf,Bl)).create=function(e,t,r,n,i){var s={name:e,kind:t,location:{uri:n,range:r}};return i&&(s.containerName=i),s},Dh.DocumentSymbol=ff,(df=ff||(Ul=ff={},Dh.DocumentSymbol=ff,Ul)).create=function(e,t,r,n,i,s){var o={name:e,detail:t,kind:r,range:n,selectionRange:i};return void 0!==s&&(o.children=s),o},df.is=function(e){var t=e;return t&&If.string(t.name)&&If.number(t.kind)&&Zl.is(t.range)&&Zl.is(t.selectionRange)&&(void 0===t.detail||If.string(t.detail))&&(void 0===t.deprecated||If.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))},Dh.CodeActionKind=pf,(mf=pf||(Hl=pf={},Dh.CodeActionKind=pf,Hl)).Empty="",mf.QuickFix="quickfix",mf.Refactor="refactor",mf.RefactorExtract="refactor.extract",mf.RefactorInline="refactor.inline",mf.RefactorRewrite="refactor.rewrite",mf.Source="source",mf.SourceOrganizeImports="source.organizeImports",mf.SourceFixAll="source.fixAll",Dh.CodeActionContext=gf,(yf=gf||(Wl=gf={},Dh.CodeActionContext=gf,Wl)).create=function(e,t){var r={diagnostics:e};return null!=t&&(r.only=t),r},yf.is=function(e){var t=e;return If.defined(t)&&If.typedArray(t.diagnostics,Eh.is)&&(void 0===t.only||If.typedArray(t.only,If.string))},Dh.CodeAction=vf,(bf=vf||(Gl=vf={},Dh.CodeAction=vf,Gl)).create=function(e,t,r){var n={title:e};return Th.is(t)?n.command=t:n.edit=t,void 0!==r&&(n.kind=r),n},bf.is=function(e){var t=e;return t&&If.string(t.title)&&(void 0===t.diagnostics||If.typedArray(t.diagnostics,Eh.is))&&(void 0===t.kind||If.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||Th.is(t.command))&&(void 0===t.isPreferred||If.boolean(t.isPreferred))&&(void 0===t.edit||xh.is(t.edit))},Dh.CodeLens=_f,(Ef=_f||(Vl=_f={},Dh.CodeLens=_f,Vl)).create=function(e,t){var r={range:e};return If.defined(t)&&(r.data=t),r},Ef.is=function(e){var t=e;return If.defined(t)&&Zl.is(t.range)&&(If.undefined(t.command)||Th.is(t.command))},Dh.FormattingOptions=wf,(Tf=wf||(zl=wf={},Dh.FormattingOptions=wf,zl)).create=function(e,t){return{tabSize:e,insertSpaces:t}},Tf.is=function(e){var t=e;return If.defined(t)&&If.number(t.tabSize)&&If.boolean(t.insertSpaces)},Dh.DocumentLink=Rf,(Sf=Rf||(Ql=Rf={},Dh.DocumentLink=Rf,Ql)).create=function(e,t,r){return{range:e,target:t,data:r}},Sf.is=function(e){var t=e;return If.defined(t)&&Zl.is(t.range)&&(If.undefined(t.target)||If.string(t.target))},Dh.SelectionRange=Cf,(Of=Cf||(Kl=Cf={},Dh.SelectionRange=Cf,Kl)).create=function(e,t){return{range:e,parent:t}},Of.is=function(e){var t=e;return void 0!==t&&Zl.is(t.range)&&(void 0===t.parent||Of.is(t.parent))};var Af,Pf;Dh.EOL=["\n","\r\n","\r"],Dh.TextDocument=Af,(Pf=Af||(Jl=Af={},Dh.TextDocument=Af,Jl)).create=function(e,t,r,n){return new xf(e,t,r,n)},Pf.is=function(e){var t=e;return!!(If.defined(t)&&If.string(t.uri)&&(If.undefined(t.languageId)||If.string(t.languageId))&&If.number(t.lineCount)&&If.func(t.getText)&&If.func(t.positionAt)&&If.func(t.offsetAt))},Pf.applyEdits=function(e,t){for(var r=e.getText(),n=function e(t,r){if(t.length<=1)return t;var n=t.length/2|0,i=t.slice(0,n),s=t.slice(n);e(i,r),e(s,r);for(var o=0,a=0,c=0;o<i.length&&a<s.length;){var u=r(i[o],s[a]);t[c++]=u<=0?i[o++]:s[a++]}for(;o<i.length;)t[c++]=i[o++];for(;a<s.length;)t[c++]=s[a++];return t}(t,(function(e,t){var r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),i=r.length,s=n.length-1;s>=0;s--){var o=n[s],a=e.offsetAt(o.range.start),c=e.offsetAt(o.range.end);if(!(c<=i))throw new Error("Overlapping edit");r=r.substring(0,a)+o.newText+r.substring(c,r.length),i=a}return r};var If,Lf,Mf,xf=function(){function e(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,r=!0,n=0;n<t.length;n++){r&&(e.push(n),r=!1);var i=t.charAt(n);r="\r"===i||"\n"===i,"\r"===i&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return Yl.create(0,e);for(;r<n;){var i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}var s=r-1;return Yl.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var r=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();Lf=If||(If={}),Mf=Object.prototype.toString,Lf.defined=function(e){return void 0!==e},Lf.undefined=function(e){return void 0===e},Lf.boolean=function(e){return!0===e||!1===e},Lf.string=function(e){return"[object String]"===Mf.call(e)},Lf.number=function(e){return"[object Number]"===Mf.call(e)},Lf.func=function(e){return"[object Function]"===Mf.call(e)},Lf.objectLiteral=function(e){return null!==e&&"object"==typeof e},Lf.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},xo(Dh);var Df,qf,jf,Ff,$f,Bf,Uf,Hf,Wf,Gf,Vf,zf,Qf,Kf,Jf,Yf,Xf,Zf,ed,td,rd,nd,id,sd,od,ad,cd,ud,ld,hd,fd,dd,pd,md,gd,yd,vd,bd,_d,Ed,wd,Td,Rd,Sd,Cd,Od,kd,Nd,Ad,Pd,Id,Ld,Md,xd,Dd,qd={};Object.defineProperty(qd,"__esModule",{value:!0});var jd={};Object.defineProperty(jd,"__esModule",{value:!0});var Fd=function(e){return!0===e||!1===e};function $d(e){return"string"==typeof e||e instanceof String}jd.boolean=Fd;var Bd=$d;jd.string=Bd;var Ud=function(e){return"number"==typeof e||e instanceof Number};jd.number=Ud;var Hd=function(e){return e instanceof Error};jd.error=Hd;var Wd=function(e){return"function"==typeof e};function Gd(e){return Array.isArray(e)}jd.func=Wd;var Vd=Gd;jd.array=Vd;var zd=function(e){return Gd(e)&&e.every(e=>$d(e))};jd.stringArray=zd;var Qd=function(e,t){return Array.isArray(e)&&e.every(t)};jd.typedArray=Qd;var Kd=function(e){return null!==e&&"object"==typeof e};jd.objectLiteral=Kd;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});class Yd extends Uo.RequestType0{constructor(e){super(e)}}var Xd=Yd;Jd.ProtocolRequestType0=Xd;class Zd extends Uo.RequestType{constructor(e){super(e)}}var ep=Zd;Jd.ProtocolRequestType=ep;class tp extends Uo.NotificationType{constructor(e){super(e)}}var rp=tp;Jd.ProtocolNotificationType=rp;class np extends Uo.NotificationType0{constructor(e){super(e)}}var ip=np;Jd.ProtocolNotificationType0=ip;var sp,op={};var ap;Object.defineProperty(op,"__esModule",{value:!0}),(ap=op.ImplementationRequest||(sp={},op.ImplementationRequest=sp)).method="textDocument/implementation",ap.type=new Jd.ProtocolRequestType(ap.method),ap.resultType=new Uo.ProgressType;var cp=op.ImplementationRequest;qd.ImplementationRequest=cp;var up,lp={};var hp;Object.defineProperty(lp,"__esModule",{value:!0}),(hp=lp.TypeDefinitionRequest||(up={},lp.TypeDefinitionRequest=up)).method="textDocument/typeDefinition",hp.type=new Jd.ProtocolRequestType(hp.method),hp.resultType=new Uo.ProgressType;var fp=lp.TypeDefinitionRequest;qd.TypeDefinitionRequest=fp;var dp,pp,mp={};Object.defineProperty(mp,"__esModule",{value:!0}),(mp.WorkspaceFoldersRequest||(dp={},mp.WorkspaceFoldersRequest=dp)).type=new Jd.ProtocolRequestType0("workspace/workspaceFolders"),(mp.DidChangeWorkspaceFoldersNotification||(pp={},mp.DidChangeWorkspaceFoldersNotification=pp)).type=new Jd.ProtocolNotificationType("workspace/didChangeWorkspaceFolders");var gp=mp.WorkspaceFoldersRequest;qd.WorkspaceFoldersRequest=gp;var yp=mp.DidChangeWorkspaceFoldersNotification;qd.DidChangeWorkspaceFoldersNotification=yp;var vp,bp={};Object.defineProperty(bp,"__esModule",{value:!0}),(bp.ConfigurationRequest||(vp={},bp.ConfigurationRequest=vp)).type=new Jd.ProtocolRequestType("workspace/configuration");var _p=bp.ConfigurationRequest;qd.ConfigurationRequest=_p;var Ep,wp,Tp,Rp={};Object.defineProperty(Rp,"__esModule",{value:!0}),(Tp=Rp.DocumentColorRequest||(Ep={},Rp.DocumentColorRequest=Ep)).method="textDocument/documentColor",Tp.type=new Jd.ProtocolRequestType(Tp.method),Tp.resultType=new Uo.ProgressType,(Rp.ColorPresentationRequest||(wp={},Rp.ColorPresentationRequest=wp)).type=new Jd.ProtocolRequestType("textDocument/colorPresentation");var Sp=Rp.DocumentColorRequest;qd.DocumentColorRequest=Sp;var Cp=Rp.ColorPresentationRequest;qd.ColorPresentationRequest=Cp;var Op,kp,Np,Ap={};Object.defineProperty(Ap,"__esModule",{value:!0}),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(Ap.FoldingRangeKind||(Op={},Ap.FoldingRangeKind=Op)),(Np=Ap.FoldingRangeRequest||(kp={},Ap.FoldingRangeRequest=kp)).method="textDocument/foldingRange",Np.type=new Jd.ProtocolRequestType(Np.method),Np.resultType=new Uo.ProgressType;var Pp=Ap.FoldingRangeRequest;qd.FoldingRangeRequest=Pp;var Ip,Lp={};var Mp;Object.defineProperty(Lp,"__esModule",{value:!0}),(Mp=Lp.DeclarationRequest||(Ip={},Lp.DeclarationRequest=Ip)).method="textDocument/declaration",Mp.type=new Jd.ProtocolRequestType(Mp.method),Mp.resultType=new Uo.ProgressType;var xp=Lp.DeclarationRequest;qd.DeclarationRequest=xp;var Dp,qp,jp={};Object.defineProperty(jp,"__esModule",{value:!0}),(qp=jp.SelectionRangeRequest||(Dp={},jp.SelectionRangeRequest=Dp)).method="textDocument/selectionRange",qp.type=new Jd.ProtocolRequestType(qp.method),qp.resultType=new Uo.ProgressType;var Fp=jp.SelectionRangeRequest;qd.SelectionRangeRequest=Fp;var $p,Bp,Up,Hp={};Object.defineProperty(Hp,"__esModule",{value:!0}),(Hp.WorkDoneProgress||($p={},Hp.WorkDoneProgress=$p)).type=new Uo.ProgressType,(Hp.WorkDoneProgressCreateRequest||(Bp={},Hp.WorkDoneProgressCreateRequest=Bp)).type=new Jd.ProtocolRequestType("window/workDoneProgress/create"),(Hp.WorkDoneProgressCancelNotification||(Up={},Hp.WorkDoneProgressCancelNotification=Up)).type=new Jd.ProtocolNotificationType("window/workDoneProgress/cancel");var Wp=Hp.WorkDoneProgress;qd.WorkDoneProgress=Wp;var Gp=Hp.WorkDoneProgressCreateRequest;qd.WorkDoneProgressCreateRequest=Gp;var Vp=Hp.WorkDoneProgressCancelNotification;var zp,Qp,Kp,Jp,Yp,Xp,Zp,em,tm,rm,nm,im,sm,om,am,cm,um,lm,hm,fm,dm,pm,mm,gm,ym,vm,bm,_m,Em,wm,Tm,Rm,Sm,Cm,Om;qd.WorkDoneProgressCancelNotification=Vp,(zp=qd.DocumentFilter||(Df={},qd.DocumentFilter=Df)).is=function(e){const t=e;return jd.string(t.language)||jd.string(t.scheme)||jd.string(t.pattern)},(Qp=qd.DocumentSelector||(qf={},qd.DocumentSelector=qf)).is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!jd.string(t)&&!zp.is(t))return!1;return!0},(qd.RegistrationRequest||(jf={},qd.RegistrationRequest=jf)).type=new Jd.ProtocolRequestType("client/registerCapability"),(qd.UnregistrationRequest||(Ff={},qd.UnregistrationRequest=Ff)).type=new Jd.ProtocolRequestType("client/unregisterCapability"),(Kp=qd.ResourceOperationKind||($f={},qd.ResourceOperationKind=$f)).Create="create",Kp.Rename="rename",Kp.Delete="delete",(Jp=qd.FailureHandlingKind||(Bf={},qd.FailureHandlingKind=Bf)).Abort="abort",Jp.Transactional="transactional",Jp.TextOnlyTransactional="textOnlyTransactional",Jp.Undo="undo",(qd.StaticRegistrationOptions||(Uf={},qd.StaticRegistrationOptions=Uf)).hasId=function(e){const t=e;return t&&jd.string(t.id)&&t.id.length>0},(qd.TextDocumentRegistrationOptions||(Hf={},qd.TextDocumentRegistrationOptions=Hf)).is=function(e){const t=e;return t&&(null===t.documentSelector||Qp.is(t.documentSelector))},(Yp=qd.WorkDoneProgressOptions||(Wf={},qd.WorkDoneProgressOptions=Wf)).is=function(e){const t=e;return jd.objectLiteral(t)&&(void 0===t.workDoneProgress||jd.boolean(t.workDoneProgress))},Yp.hasWorkDoneProgress=function(e){const t=e;return t&&jd.boolean(t.workDoneProgress)},(qd.InitializeRequest||(Gf={},qd.InitializeRequest=Gf)).type=new Jd.ProtocolRequestType("initialize"),(qd.InitializeError||(Vf={},qd.InitializeError=Vf)).unknownProtocolVersion=1,(qd.InitializedNotification||(zf={},qd.InitializedNotification=zf)).type=new Jd.ProtocolNotificationType("initialized"),(qd.ShutdownRequest||(Qf={},qd.ShutdownRequest=Qf)).type=new Jd.ProtocolRequestType0("shutdown"),(qd.ExitNotification||(Kf={},qd.ExitNotification=Kf)).type=new Jd.ProtocolNotificationType0("exit"),(qd.DidChangeConfigurationNotification||(Jf={},qd.DidChangeConfigurationNotification=Jf)).type=new Jd.ProtocolNotificationType("workspace/didChangeConfiguration"),(Xp=qd.MessageType||(Yf={},qd.MessageType=Yf)).Error=1,Xp.Warning=2,Xp.Info=3,Xp.Log=4,(qd.ShowMessageNotification||(Xf={},qd.ShowMessageNotification=Xf)).type=new Jd.ProtocolNotificationType("window/showMessage"),(qd.ShowMessageRequest||(Zf={},qd.ShowMessageRequest=Zf)).type=new Jd.ProtocolRequestType("window/showMessageRequest"),(qd.LogMessageNotification||(ed={},qd.LogMessageNotification=ed)).type=new Jd.ProtocolNotificationType("window/logMessage"),(qd.TelemetryEventNotification||(td={},qd.TelemetryEventNotification=td)).type=new Jd.ProtocolNotificationType("telemetry/event"),(Zp=qd.TextDocumentSyncKind||(rd={},qd.TextDocumentSyncKind=rd)).None=0,Zp.Full=1,Zp.Incremental=2,(em=qd.DidOpenTextDocumentNotification||(nd={},qd.DidOpenTextDocumentNotification=nd)).method="textDocument/didOpen",em.type=new Jd.ProtocolNotificationType(em.method),(tm=qd.DidChangeTextDocumentNotification||(id={},qd.DidChangeTextDocumentNotification=id)).method="textDocument/didChange",tm.type=new Jd.ProtocolNotificationType(tm.method),(rm=qd.DidCloseTextDocumentNotification||(sd={},qd.DidCloseTextDocumentNotification=sd)).method="textDocument/didClose",rm.type=new Jd.ProtocolNotificationType(rm.method),(nm=qd.DidSaveTextDocumentNotification||(od={},qd.DidSaveTextDocumentNotification=od)).method="textDocument/didSave",nm.type=new Jd.ProtocolNotificationType(nm.method),(im=qd.TextDocumentSaveReason||(ad={},qd.TextDocumentSaveReason=ad)).Manual=1,im.AfterDelay=2,im.FocusOut=3,(sm=qd.WillSaveTextDocumentNotification||(cd={},qd.WillSaveTextDocumentNotification=cd)).method="textDocument/willSave",sm.type=new Jd.ProtocolNotificationType(sm.method),(om=qd.WillSaveTextDocumentWaitUntilRequest||(ud={},qd.WillSaveTextDocumentWaitUntilRequest=ud)).method="textDocument/willSaveWaitUntil",om.type=new Jd.ProtocolRequestType(om.method),(qd.DidChangeWatchedFilesNotification||(ld={},qd.DidChangeWatchedFilesNotification=ld)).type=new Jd.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(am=qd.FileChangeType||(hd={},qd.FileChangeType=hd)).Created=1,am.Changed=2,am.Deleted=3,(cm=qd.WatchKind||(fd={},qd.WatchKind=fd)).Create=1,cm.Change=2,cm.Delete=4,(qd.PublishDiagnosticsNotification||(dd={},qd.PublishDiagnosticsNotification=dd)).type=new Jd.ProtocolNotificationType("textDocument/publishDiagnostics"),(um=qd.CompletionTriggerKind||(pd={},qd.CompletionTriggerKind=pd)).Invoked=1,um.TriggerCharacter=2,um.TriggerForIncompleteCompletions=3,(lm=qd.CompletionRequest||(md={},qd.CompletionRequest=md)).method="textDocument/completion",lm.type=new Jd.ProtocolRequestType(lm.method),lm.resultType=new Uo.ProgressType,(hm=qd.CompletionResolveRequest||(gd={},qd.CompletionResolveRequest=gd)).method="completionItem/resolve",hm.type=new Jd.ProtocolRequestType(hm.method),(fm=qd.HoverRequest||(yd={},qd.HoverRequest=yd)).method="textDocument/hover",fm.type=new Jd.ProtocolRequestType(fm.method),(dm=qd.SignatureHelpTriggerKind||(vd={},qd.SignatureHelpTriggerKind=vd)).Invoked=1,dm.TriggerCharacter=2,dm.ContentChange=3,(pm=qd.SignatureHelpRequest||(bd={},qd.SignatureHelpRequest=bd)).method="textDocument/signatureHelp",pm.type=new Jd.ProtocolRequestType(pm.method),(mm=qd.DefinitionRequest||(_d={},qd.DefinitionRequest=_d)).method="textDocument/definition",mm.type=new Jd.ProtocolRequestType(mm.method),mm.resultType=new Uo.ProgressType,(gm=qd.ReferencesRequest||(Ed={},qd.ReferencesRequest=Ed)).method="textDocument/references",gm.type=new Jd.ProtocolRequestType(gm.method),gm.resultType=new Uo.ProgressType,(ym=qd.DocumentHighlightRequest||(wd={},qd.DocumentHighlightRequest=wd)).method="textDocument/documentHighlight",ym.type=new Jd.ProtocolRequestType(ym.method),ym.resultType=new Uo.ProgressType,(vm=qd.DocumentSymbolRequest||(Td={},qd.DocumentSymbolRequest=Td)).method="textDocument/documentSymbol",vm.type=new Jd.ProtocolRequestType(vm.method),vm.resultType=new Uo.ProgressType,(bm=qd.CodeActionRequest||(Rd={},qd.CodeActionRequest=Rd)).method="textDocument/codeAction",bm.type=new Jd.ProtocolRequestType(bm.method),bm.resultType=new Uo.ProgressType,(_m=qd.WorkspaceSymbolRequest||(Sd={},qd.WorkspaceSymbolRequest=Sd)).method="workspace/symbol",_m.type=new Jd.ProtocolRequestType(_m.method),_m.resultType=new Uo.ProgressType,(Em=qd.CodeLensRequest||(Cd={},qd.CodeLensRequest=Cd)).type=new Jd.ProtocolRequestType("textDocument/codeLens"),Em.resultType=new Uo.ProgressType,(qd.CodeLensResolveRequest||(Od={},qd.CodeLensResolveRequest=Od)).type=new Jd.ProtocolRequestType("codeLens/resolve"),(wm=qd.DocumentLinkRequest||(kd={},qd.DocumentLinkRequest=kd)).method="textDocument/documentLink",wm.type=new Jd.ProtocolRequestType(wm.method),wm.resultType=new Uo.ProgressType,(qd.DocumentLinkResolveRequest||(Nd={},qd.DocumentLinkResolveRequest=Nd)).type=new Jd.ProtocolRequestType("documentLink/resolve"),(Tm=qd.DocumentFormattingRequest||(Ad={},qd.DocumentFormattingRequest=Ad)).method="textDocument/formatting",Tm.type=new Jd.ProtocolRequestType(Tm.method),(Rm=qd.DocumentRangeFormattingRequest||(Pd={},qd.DocumentRangeFormattingRequest=Pd)).method="textDocument/rangeFormatting",Rm.type=new Jd.ProtocolRequestType(Rm.method),(Sm=qd.DocumentOnTypeFormattingRequest||(Id={},qd.DocumentOnTypeFormattingRequest=Id)).method="textDocument/onTypeFormatting",Sm.type=new Jd.ProtocolRequestType(Sm.method),(Cm=qd.RenameRequest||(Ld={},qd.RenameRequest=Ld)).method="textDocument/rename",Cm.type=new Jd.ProtocolRequestType(Cm.method),(Om=qd.PrepareRenameRequest||(Md={},qd.PrepareRenameRequest=Md)).method="textDocument/prepareRename",Om.type=new Jd.ProtocolRequestType(Om.method),(qd.ExecuteCommandRequest||(xd={},qd.ExecuteCommandRequest=xd)).type=new Jd.ProtocolRequestType("workspace/executeCommand"),(qd.ApplyWorkspaceEditRequest||(Dd={},qd.ApplyWorkspaceEditRequest=Dd)).type=new Jd.ProtocolRequestType("workspace/applyEdit"),xo(qd);var km,Nm,Am,Pm,Im,Lm,Mm={};Object.defineProperty(Mm,"__esModule",{value:!0}),(Pm=Mm.CallHierarchyPrepareRequest||(km={},Mm.CallHierarchyPrepareRequest=km)).method="textDocument/prepareCallHierarchy",Pm.type=new Jd.ProtocolRequestType(Pm.method),(Im=Mm.CallHierarchyIncomingCallsRequest||(Nm={},Mm.CallHierarchyIncomingCallsRequest=Nm)).method="callHierarchy/incomingCalls",Im.type=new Jd.ProtocolRequestType(Im.method),(Lm=Mm.CallHierarchyOutgoingCallsRequest||(Am={},Mm.CallHierarchyOutgoingCallsRequest=Am)).method="callHierarchy/outgoingCalls",Lm.type=new Jd.ProtocolRequestType(Lm.method);var xm,Dm,qm,jm,Fm,$m,Bm,Um,Hm,Wm,Gm,Vm={};Object.defineProperty(Vm,"__esModule",{value:!0}),(Bm=Vm.SemanticTokenTypes||(xm={},Vm.SemanticTokenTypes=xm)).comment="comment",Bm.keyword="keyword",Bm.string="string",Bm.number="number",Bm.regexp="regexp",Bm.operator="operator",Bm.namespace="namespace",Bm.type="type",Bm.struct="struct",Bm.class="class",Bm.interface="interface",Bm.enum="enum",Bm.typeParameter="typeParameter",Bm.function="function",Bm.member="member",Bm.property="property",Bm.macro="macro",Bm.variable="variable",Bm.parameter="parameter",Bm.label="label",(Um=Vm.SemanticTokenModifiers||(Dm={},Vm.SemanticTokenModifiers=Dm)).documentation="documentation",Um.declaration="declaration",Um.definition="definition",Um.reference="reference",Um.static="static",Um.abstract="abstract",Um.deprecated="deprecated",Um.async="async",Um.volatile="volatile",Um.readonly="readonly",(Vm.SemanticTokens||(qm={},Vm.SemanticTokens=qm)).is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(Hm=Vm.SemanticTokensRequest||(jm={},Vm.SemanticTokensRequest=jm)).method="textDocument/semanticTokens",Hm.type=new Jd.ProtocolRequestType(Hm.method),(Wm=Vm.SemanticTokensEditsRequest||(Fm={},Vm.SemanticTokensEditsRequest=Fm)).method="textDocument/semanticTokens/edits",Wm.type=new Jd.ProtocolRequestType(Wm.method),(Gm=Vm.SemanticTokensRangeRequest||($m={},Vm.SemanticTokensRangeRequest=$m)).method="textDocument/semanticTokens/range",Gm.type=new Jd.ProtocolRequestType(Gm.method),function(e){let t,r,n,i,s,o;!function(e){e.method=Mm.CallHierarchyPrepareRequest.method,e.type=Mm.CallHierarchyPrepareRequest.type}(t=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(e){e.method=Mm.CallHierarchyIncomingCallsRequest.method,e.type=Mm.CallHierarchyIncomingCallsRequest.type}(r=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(e){e.method=Mm.CallHierarchyOutgoingCallsRequest.method,e.type=Mm.CallHierarchyOutgoingCallsRequest.type}(n=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})),e.SemanticTokenTypes=Vm.SemanticTokenTypes,e.SemanticTokenModifiers=Vm.SemanticTokenModifiers,e.SemanticTokens=Vm.SemanticTokens,function(e){e.method=Vm.SemanticTokensRequest.method,e.type=Vm.SemanticTokensRequest.type}(i=e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(e){e.method=Vm.SemanticTokensEditsRequest.method,e.type=Vm.SemanticTokensEditsRequest.type}(s=e.SemanticTokensEditsRequest||(e.SemanticTokensEditsRequest={})),function(e){e.method=Vm.SemanticTokensRangeRequest.method,e.type=Vm.SemanticTokensRangeRequest.type}(o=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={}))}(Mo.Proposed||(Lo={},Mo.Proposed=Lo));var zm=function(e,t,r,n){return Uo.createMessageConnection(e,t,r,n)};Mo.createProtocolConnection=zm;var Qm=Mo.Event;Io.Event=Qm;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});var Jm={};Object.defineProperty(Jm,"__esModule",{value:!0});var Ym=function(e){return!0===e||!1===e};function Xm(e){return"string"==typeof e||e instanceof String}Jm.boolean=Ym;var Zm=Xm;Jm.string=Zm;var eg=function(e){return"number"==typeof e||e instanceof Number};Jm.number=eg;var tg=function(e){return e instanceof Error};function rg(e){return"function"==typeof e}Jm.error=tg;var ng=rg;function ig(e){return Array.isArray(e)}Jm.func=ng;var sg=ig;Jm.array=sg;var og=function(e){return ig(e)&&e.every(e=>Xm(e))};Jm.stringArray=og;var ag=function(e,t){return Array.isArray(e)&&e.every(t)};Jm.typedArray=ag;var cg=function(e){return e&&rg(e.then)};Jm.thenable=cg;Km.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?Jm.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Mo.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}};var ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Mo.Emitter,this.connection.onNotification(Mo.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(Mo.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(Mo.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};var lg={};Object.defineProperty(lg,"__esModule",{value:!0});var hg={};Object.defineProperty(hg,"__esModule",{value:!0});class fg{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class dg extends fg{constructor(){super([dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),"-",dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),"-","4",dg._randomHex(),dg._randomHex(),dg._randomHex(),"-",dg._oneOf(dg._timeHighBits),dg._randomHex(),dg._randomHex(),dg._randomHex(),"-",dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex(),dg._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return dg._oneOf(dg._chars)}}dg._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],dg._timeHighBits=["8","9","a","b"];var pg=new fg("00000000-0000-0000-0000-000000000000");function mg(){return new dg}hg.empty=pg;var gg=mg;hg.v4=gg;const yg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function vg(e){return yg.test(e)}var bg=vg;hg.isUUID=bg;var _g=function(e){if(!vg(e))throw new Error("invalid uuid");return new fg(e)};hg.parse=_g;var Eg=function(){return mg().asHex()};hg.generateUuid=Eg;class wg{constructor(e,t){this._connection=e,this._token=t,wg.Instances.set(this._token,this),this._source=new Mo.CancellationTokenSource}get token(){return this._source.token}begin(e,t,r,n){let i={kind:"begin",title:e,percentage:t,message:r,cancellable:n};this._connection.sendProgress(Mo.WorkDoneProgress.type,this._token,i)}report(e,t){let r={kind:"report"};"number"==typeof e?(r.percentage=e,void 0!==t&&(r.message=t)):r.message=e,this._connection.sendProgress(Mo.WorkDoneProgress.type,this._token,r)}done(){wg.Instances.delete(this._token),this._source.dispose(),this._connection.sendProgress(Mo.WorkDoneProgress.type,this._token,{kind:"end"})}cancel(){this._source.cancel()}}wg.Instances=new Map;class Tg{constructor(){this._source=new Mo.CancellationTokenSource}get token(){return this._source.token}begin(){}report(){}done(){}}var Rg=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new Tg;const r=t.workDoneToken;return delete t.workDoneToken,new wg(e,r)};lg.attachWorkDone=Rg;var Sg;lg.ProgressFeature=e=>class extends e{initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(Mo.WorkDoneProgressCancelNotification.type,e=>{let t=wg.Instances.get(e.token);void 0!==t&&t.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new Tg:new wg(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=hg.generateUuid();return this.connection.sendRequest(Mo.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new wg(this.connection,e))}return Promise.resolve(new Tg)}},(Sg||(Sg={})).type=new Mo.ProgressType;class Cg{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Sg.type,this._token,e)}}var Og=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const r=t.partialResultToken;return delete t.partialResultToken,new Cg(e,r)};lg.attachPartialResult=Og,function(e){for(var t in e)Io.hasOwnProperty(t)||(Io[t]=e[t])}(Mo);var kg,Ng={};Object.defineProperty(Ng,"__esModule",{value:!0});const Ag=u,Pg=p,Ig=h,Lg=n;var Mg=function(e){let t=Ag.parse(e);if("file:"!==t.protocol||!t.path)return;let r=t.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if("win32"===process.platform&&r.length>1){let e=r[0],t=r[1];0===e.length&&t.length>1&&":"===t[1]&&r.shift()}return Pg.normalize(r.join("/"))};function xg(){return"win32"===process.platform}function Dg(e,t,r,n){const i=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,o)=>{let a=process.env,c=Object.create(null);Object.keys(a).forEach(e=>c[e]=a[e]),t&&Ig.existsSync(t)&&(c.NODE_PATH?c.NODE_PATH=t+Pg.delimiter+c.NODE_PATH:c.NODE_PATH=t,n&&n("NODE_PATH value is: "+c.NODE_PATH)),c.ELECTRON_RUN_AS_NODE="1";try{let t=Lg.fork("",[],{cwd:r,env:c,execArgv:["-e",i]});if(void 0===t.pid)return void o(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",e=>{o(e)}),t.on("message",r=>{"r"===r.c&&(t.send({c:"e"}),r.s?s(r.r):o(new Error("Failed to resolve module: "+e)))});let n={c:"rs",a:e};t.send(n)}catch(e){o(e)}})}Ng.uriToFilePath=Mg;var qg=Dg;function jg(e){let t="npm";const r=Object.create(null);Object.keys(process.env).forEach(e=>r[e]=process.env[e]),r.NO_UPDATE_NOTIFIER="true";const n={encoding:"utf8",env:r};xg()&&(t="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let r=Lg.spawnSync(t,["config","get","prefix"],n).stdout;if(!r)return void(e&&e("'npm config get prefix' didn't return a value."));let s=r.trim();return e&&e("'npm config get prefix' value is: "+s),s.length>0?xg()?Pg.join(s,"node_modules"):Pg.join(s,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",i)}}Ng.resolve=qg;var Fg=jg;Ng.resolveGlobalNodePath=Fg;var $g,Bg=function(e){let t="yarn",r={encoding:"utf8"};xg()&&(t="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=Lg.spawnSync(t,["global","dir","--json"],r),s=i.stdout;if(!s)return void(e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr)));let o=s.trim().split(/\r?\n/);for(let e of o)try{let t=JSON.parse(e);if("log"===t.type)return Pg.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",n)}};Ng.resolveGlobalYarnPath=Bg,function(e){let t=void 0;function r(){return void 0!==t||(t="win32"!==process.platform&&(!Ig.existsSync(__filename.toUpperCase())||!Ig.existsSync(__filename.toLowerCase()))),t}e.isCaseSensitive=r,e.isParent=function(e,t){return r()?0===Pg.normalize(t).indexOf(Pg.normalize(e)):0===Pg.normalize(t).toLowerCase().indexOf(Pg.normalize(e).toLowerCase())}}($g=Ng.FileSystem||(kg={},Ng.FileSystem=kg));var Ug,Hg=function(e,t,r,n){return r?(Pg.isAbsolute(r)||(r=Pg.join(e,r)),Dg(t,r,r,n).then(e=>$g.isParent(r,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,r=>Dg(t,jg(n),e,n))):Dg(t,jg(n),e,n)};Ng.resolveModulePath=Hg,(Ug=Io.Files||(Oo={},Io.Files=Oo)).uriToFilePath=Ng.uriToFilePath,Ug.resolveGlobalNodePath=Ng.resolveGlobalNodePath,Ug.resolveGlobalYarnPath=Ng.resolveGlobalYarnPath,Ug.resolve=Ng.resolve,Ug.resolveModulePath=Ng.resolveModulePath;let Wg=!1,Gg=void 0;function Vg(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(Gg=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(Wg?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if("--clientProcessId"===r&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=r.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();var zg=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new Mo.Emitter,this._onDidOpen=new Mo.Emitter,this._onDidClose=new Mo.Emitter,this._onDidSave=new Mo.Emitter,this._onWillSave=new Mo.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=Mo.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,r=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=r;let n=Object.freeze({document:r});this._onDidOpen.fire(n),this._onDidChangeContent.fire(n)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,r=e.contentChanges;if(0===r.length)return;let n=this._documents[t.uri];const{version:i}=t;if(null==i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);n=this._configuration.update(n,r,i),this._documents[t.uri]=n,this._onDidChangeContent.fire(Object.freeze({document:n}))}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let r=this._documents[e.textDocument.uri];return r&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:r,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};Io.TextDocuments=zg;var Qg=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};Io.ErrorMessageTracker=Qg;class Kg{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(Mo.MessageType.Error,e)}warn(e){this.send(Mo.MessageType.Warning,e)}info(e){this.send(Mo.MessageType.Info,e)}log(e){this.send(Mo.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(Mo.LogMessageNotification.type,{type:e,message:t})}}const Jg=lg.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:Mo.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(Mo.ShowMessageRequest.type,r).then(Vg)}showWarningMessage(e,...t){let r={type:Mo.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(Mo.ShowMessageRequest.type,r).then(Vg)}showInformationMessage(e,...t){let r={type:Mo.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(Mo.ShowMessageRequest.type,r).then(Vg)}});(Io.BulkRegistration||(ko={},Io.BulkRegistration=ko)).create=function(){return new Yg};class Yg{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const r=Jm.string(e)?e:e.method;if(this._registered.has(r))throw new Error(r+" is already added to this registration");const n=hg.generateUuid();this._registrations.push({id:n,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}}(Io.BulkUnregistration||(No={},Io.BulkUnregistration=No)).create=function(){return new Xg(void 0,[])};class Xg{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(Mo.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=Jm.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let n={unregisterations:[r]};return this._connection.sendRequest(Mo.UnregistrationRequest.type,n).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${r.id} failed.`)}),!0}}class Zg{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof Yg?this.registerMany(e):e instanceof Xg?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){const n=Jm.string(t)?t:t.method,i=hg.generateUuid();let s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(Mo.RegistrationRequest.type,s).then(t=>(e.add({id:i,method:n}),e),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}registerSingle2(e,t){const r=Jm.string(e)?e:e.method,n=hg.generateUuid();let i={registrations:[{id:n,method:r,registerOptions:t||{}}]};return this._connection.sendRequest(Mo.RegistrationRequest.type,i).then(e=>Mo.Disposable.create(()=>{this.unregisterSingle(n,r)}),e=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(Mo.UnregistrationRequest.type,r).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(Mo.RegistrationRequest.type,t).then(()=>new Xg(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const ey=ug.WorkspaceFoldersFeature(Km.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(r=e)&&r.edit?e:{edit:e};var r;return this._connection.sendRequest(Mo.ApplyWorkspaceEditRequest.type,t)}}));class ty{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(Mo.TelemetryEventNotification.type,e)}}class ry{constructor(){this._trace=Mo.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==Mo.Trace.Off&&this._connection.sendNotification(Mo.LogTraceNotification.type,{message:e,verbose:this._trace===Mo.Trace.Verbose?t:void 0})}}class ny{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return lg.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return lg.attachPartialResult(this.connection,t)}}var iy=ny;function sy(e,t){return function(r){return t(e(r))}}Io.LanguagesImpl=iy;var oy=sy;function ay(e,t){return function(r){return t(e(r))}}Io.combineConsoleFeatures=oy;var cy=ay;function uy(e,t){return function(r){return t(e(r))}}Io.combineTelemetryFeatures=cy;var ly=uy;function hy(e,t){return function(r){return t(e(r))}}Io.combineTracerFeatures=ly;var fy=hy;function dy(e,t){return function(r){return t(e(r))}}Io.combineClientFeatures=fy;var py=dy;function my(e,t){return function(r){return t(e(r))}}Io.combineWindowFeatures=py;var gy=my;function yy(e,t){return function(r){return t(e(r))}}Io.combineWorkspaceFeatures=gy;var vy=yy;Io.combineLanguagesFeatures=vy;var by=function(e,t){function r(e,t,r){return e&&t?r(e,t):e||t}return{__brand:"features",console:r(e.console,t.console,sy),tracer:r(e.tracer,t.tracer,uy),telemetry:r(e.telemetry,t.telemetry,ay),client:r(e.client,t.client,hy),window:r(e.window,t.window,dy),workspace:r(e.workspace,t.workspace,my)}};Io.combineFeatures=by;var _y=function(e,t,r,n){let i,s,o,a;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=r,r=n),Mo.ConnectionStrategy.is(e)?a=e:(s=e,o=t,a=r),function(e,t,r,n){if(!e&&!t&&process.argv.length>2){let r=void 0,n=void 0,s=process.argv.slice(2);for(let o=0;o<s.length;o++){let a=s[o];if("--node-ipc"===a){e=new Mo.IPCMessageReader(process),t=new Mo.IPCMessageWriter(process);break}if("--stdio"===a){e=process.stdin,t=process.stdout;break}if("--socket"===a){r=parseInt(s[o+1]);break}if("--pipe"===a){n=s[o+1];break}var i=a.split("=");if("--socket"===i[0]){r=parseInt(i[1]);break}if("--pipe"===i[0]){n=i[1];break}}if(r){let n=Mo.createServerSocketTransport(r);e=n[0],t=n[1]}else if(n){let r=Mo.createServerPipeTransport(n);e=r[0],t=r[1]}}var s="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+s);if(!t)throw new Error("Connection output stream is not set. "+s);if(Jm.func(e.read)&&Jm.func(e.on)){let t=e;t.on("end",()=>{process.exit(Wg?0:1)}),t.on("close",()=>{process.exit(Wg?0:1)})}const o=n&&n.console?new(n.console(Kg)):new Kg,a=Mo.createProtocolConnection(e,t,o,r);o.rawAttach(a);const c=n&&n.tracer?new(n.tracer(ry)):new ry,u=n&&n.telemetry?new(n.telemetry(ty)):new ty,l=n&&n.client?new(n.client(Zg)):new Zg,h=n&&n.window?new(n.window(Jg)):new Jg,f=n&&n.workspace?new(n.workspace(ey)):new ey,d=n&&n.languages?new(n.languages(ny)):new ny,p=[o,c,u,l,h,f,d];function m(e){return e instanceof Promise?e:Jm.thenable(e)?new Promise((t,r)=>{e.then(e=>t(e),e=>r(e))}):Promise.resolve(e)}let g=void 0,y=void 0,v=void 0,b={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(Jm.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const r=Jm.string(e)?e:e.method;1===arguments.length?a.sendNotification(r):a.sendNotification(r,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>y=e,onInitialized:e=>a.onNotification(Mo.InitializedNotification.type,e),onShutdown:e=>g=e,onExit:e=>v=e,get console(){return o},get telemetry(){return u},get tracer(){return c},get client(){return l},get window(){return h},get workspace(){return f},get languages(){return d},onDidChangeConfiguration:e=>a.onNotification(Mo.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(Mo.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(Mo.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(Mo.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(Mo.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(Mo.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(Mo.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(Mo.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(Mo.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(Mo.HoverRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),onCompletion:e=>a.onRequest(Mo.CompletionRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onCompletionResolve:e=>a.onRequest(Mo.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(Mo.SignatureHelpRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),onDeclaration:e=>a.onRequest(Mo.DeclarationRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onDefinition:e=>a.onRequest(Mo.DefinitionRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onTypeDefinition:e=>a.onRequest(Mo.TypeDefinitionRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onImplementation:e=>a.onRequest(Mo.ImplementationRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onReferences:e=>a.onRequest(Mo.ReferencesRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onDocumentHighlight:e=>a.onRequest(Mo.DocumentHighlightRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onDocumentSymbol:e=>a.onRequest(Mo.DocumentSymbolRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onWorkspaceSymbol:e=>a.onRequest(Mo.WorkspaceSymbolRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onCodeAction:e=>a.onRequest(Mo.CodeActionRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onCodeLens:e=>a.onRequest(Mo.CodeLensRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onCodeLensResolve:e=>a.onRequest(Mo.CodeLensResolveRequest.type,(t,r)=>e(t,r)),onDocumentFormatting:e=>a.onRequest(Mo.DocumentFormattingRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),onDocumentRangeFormatting:e=>a.onRequest(Mo.DocumentRangeFormattingRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),onDocumentOnTypeFormatting:e=>a.onRequest(Mo.DocumentOnTypeFormattingRequest.type,(t,r)=>e(t,r)),onRenameRequest:e=>a.onRequest(Mo.RenameRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),onPrepareRename:e=>a.onRequest(Mo.PrepareRenameRequest.type,(t,r)=>e(t,r)),onDocumentLinks:e=>a.onRequest(Mo.DocumentLinkRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onDocumentLinkResolve:e=>a.onRequest(Mo.DocumentLinkResolveRequest.type,(t,r)=>e(t,r)),onDocumentColor:e=>a.onRequest(Mo.DocumentColorRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onColorPresentation:e=>a.onRequest(Mo.ColorPresentationRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onFoldingRanges:e=>a.onRequest(Mo.FoldingRangeRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onSelectionRanges:e=>a.onRequest(Mo.SelectionRangeRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),lg.attachPartialResult(a,t))),onExecuteCommand:e=>a.onRequest(Mo.ExecuteCommandRequest.type,(t,r)=>e(t,r,lg.attachWorkDone(a,t),void 0)),dispose:()=>a.dispose()};for(let e of p)e.attach(b);return a.onRequest(Mo.InitializeRequest.type,e=>{const t=e.processId;Jm.number(t)&&void 0===Gg&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(Wg?0:1)}},3e3),Jm.string(e.trace)&&(c.trace=Mo.Trace.fromString(e.trace));for(let t of p)t.initialize(e.capabilities);if(y){return m(y(e,(new Mo.CancellationTokenSource).token,lg.attachWorkDone(a,e),void 0)).then(e=>{if(e instanceof Mo.ResponseError)return e;let t=e;t||(t={capabilities:{}});let r=t.capabilities;r||(r={},t.capabilities=r),void 0===r.textDocumentSync||null===r.textDocumentSync?r.textDocumentSync=Jm.number(b.__textDocumentSync)?b.__textDocumentSync:Mo.TextDocumentSyncKind.None:Jm.number(r.textDocumentSync)||Jm.number(r.textDocumentSync.change)||(r.textDocumentSync.change=Jm.number(b.__textDocumentSync)?b.__textDocumentSync:Mo.TextDocumentSyncKind.None);for(let e of p)e.fillServerCapabilities(r);return t})}{let e={capabilities:{textDocumentSync:Mo.TextDocumentSyncKind.None}};for(let t of p)t.fillServerCapabilities(e.capabilities);return e}}),a.onRequest(Mo.ShutdownRequest.type,()=>(Wg=!0,g?g((new Mo.CancellationTokenSource).token):void 0)),a.onNotification(Mo.ExitNotification.type,()=>{try{v&&v()}finally{Wg?process.exit(0):process.exit(1)}}),a.onNotification(Mo.SetTraceNotification.type,e=>{c.trace=Mo.Trace.fromString(e.value)}),b}(s,o,a,i)};Io.createConnection=_y;var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});Ey.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(Mo.Proposed.CallHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))},onIncomingCalls:e=>{const t=Mo.Proposed.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onOutgoingCalls:e=>{const t=Mo.Proposed.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=Mo.Proposed.SemanticTokensRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onEdits:e=>{const t=Mo.Proposed.SemanticTokensEditsRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onRange:e=>{const t=Mo.Proposed.SemanticTokensRangeRequest.type;this.connection.onRequest(t,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};var Ty,Ry=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,r,n,i){let s=e,o=t;this._dataLen>0&&(s-=this._prevLine,0===s&&(o-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=o,this._data[this._dataLen++]=r,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let r=0;for(;r<t&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<t&&r<e){let n=0;for(;n<t&&n<e&&this._prevData[e-1-n]===this._data[t-1-n];)n++;const i=this._data.slice(r,t-n);return{resultId:this.id,edits:[{start:r,deleteCount:e-n-r,data:i}]}}return r<t?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}return this.build()}};wy.SemanticTokensBuilder=Ry,(Ty=Io.ProposedFeatures||(Ao={},Io.ProposedFeatures=Ao)).all={__brand:"features",languages:yy(Ey.CallHierarchyFeature,wy.SemanticTokensFeature)},Ty.SemanticTokensBuilder=wy.SemanticTokensBuilder;class Sy extends Io.ResponseError{constructor(e,t,r){super(e,t,r)}}class Cy extends Sy{constructor(e="Electron is not supported. You should enable 'sqltools.useNodeRuntime' and have NodeJS installed to continue."){super(1001,e,{notification:"Core/electronNotSupported",dontNotify:!0})}}class Oy extends Sy{constructor(e,t,r=!1){super(1e3,`Missing module "${e.map((t,r)=>`${t.name}@${t.version||"latest"}${r===e.length-2?" and ":r===e.length-1?"":", "}`).join("")}". Need to ${r?"upgrade":"install"}.`,{notification:"Core/missingModule",dontNotify:!0,args:{conn:t,action:r?"upgrade":"install",deps:e}})}}const ky=p,Ny=i,Ay=Ny.homedir(),Py=Ny.tmpdir(),{env:Iy}=process,Ly=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected string, got "+typeof e);return(t=Object.assign({suffix:"nodejs"},t)).suffix&&(e+="-"+t.suffix),"darwin"===process.platform?(e=>{const t=ky.join(Ay,"Library");return{data:ky.join(t,"Application Support",e),config:ky.join(t,"Preferences",e),cache:ky.join(t,"Caches",e),log:ky.join(t,"Logs",e),temp:ky.join(Py,e)}})(e):"win32"===process.platform?(e=>{const t=Iy.APPDATA||ky.join(Ay,"AppData","Roaming"),r=Iy.LOCALAPPDATA||ky.join(Ay,"AppData","Local");return{data:ky.join(r,e,"Data"),config:ky.join(t,e,"Config"),cache:ky.join(r,e,"Cache"),log:ky.join(r,e,"Log"),temp:ky.join(Py,e)}})(e):(e=>{const t=ky.basename(Ay);return{data:ky.join(Iy.XDG_DATA_HOME||ky.join(Ay,".local","share"),e),config:ky.join(Iy.XDG_CONFIG_HOME||ky.join(Ay,".config"),e),cache:ky.join(Iy.XDG_CACHE_HOME||ky.join(Ay,".cache"),e),log:ky.join(Iy.XDG_STATE_HOME||ky.join(Ay,".local","state"),e),temp:ky.join(Py,t,e)}})(e)};var My=Ly;Ly.default=My;var xy,Dy,qy={},jy=h,Fy=p;Dy=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var t=(new Error).stack;return Error.prepareStackTrace=e,t[2].getFileName()};var $y,By,Uy,Hy,Wy,Gy,Vy,zy,Qy,Ky,Jy=p,Yy=!1;function Xy(){By={},Uy="win32"===process.platform,Hy=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,Wy=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,(Gy={}).parse=function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,r,n,i,s,o=(t=e,r=Hy.exec(t),n=(r[1]||"")+(r[2]||""),i=r[3]||"",s=Wy.exec(i),[n,s[1],s[2],s[3]]);if(!o||4!==o.length)throw new TypeError("Invalid path '"+e+"'");return{root:o[0],dir:o[0]+o[1].slice(0,-1),base:o[2],ext:o[3],name:o[2].slice(0,o[2].length-o[3].length)}},Vy=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,(zy={}).parse=function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,r=(t=e,Vy.exec(t).slice(1));if(!r||4!==r.length)throw new TypeError("Invalid path '"+e+"'");return r[1]=r[1]||"",r[2]=r[2]||"",r[3]=r[3]||"",{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}},By=Uy?Gy.parse:zy.parse,Qy=zy.parse,By.posix=Qy,Ky=Gy.parse,By.win32=Ky}var Zy=Jy.parse||(Yy||(Yy=!0,Xy()),By),ev=function(e,t){var r="/";/^([A-Za-z]:)/.test(e)?r="":/^\\\\/.test(e)&&(r="\\\\");for(var n=[e],i=Zy(e);i.dir!==n[n.length-1];)n.push(i.dir),i=Zy(i.dir);return n.reduce((function(e,n){return e.concat(t.map((function(e){return Jy.resolve(r,n,e)})))}),[])};$y=function(e,t,r){var n=t&&t.moduleDirectory?[].concat(t.moduleDirectory):["node_modules"];if(t&&"function"==typeof t.paths)return t.paths(r,e,(function(){return ev(e,n)}),t);var i=ev(e,n);return t&&t.paths?i.concat(t.paths):i};var tv;tv=function(e,t){return t||{}};var rv,nv,iv=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function sv(e){for(var t=e.split(" "),r=t.length>1?t[0]:"=",n=(t.length>1?t[1]:t[0]).split("."),i=0;i<3;++i){var s=Number(iv[i]||0),o=Number(n[i]||0);if(s!==o)return"<"===r?s<o:">="===r&&s>=o}return">="===r}function ov(e){var t=e.split(/ ?&& ?/);if(0===t.length)return!1;for(var r=0;r<t.length;++r)if(!sv(t[r]))return!1;return!0}function av(e){if("boolean"==typeof e)return e;if(e&&"object"==typeof e){for(var t=0;t<e.length;++t)if(ov(e[t]))return!0;return!1}return ov(e)}var cv;cv=JSON.parse('{"assert":true,"async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"dns":true,"domain":true,"events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"string_decoder":true,"sys":true,"timers":true,"_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}');var uv={};for(var lv in cv)Object.prototype.hasOwnProperty.call(cv,lv)&&(uv[lv]=av(cv[lv]));nv=uv,rv=function(e){return Object.prototype.hasOwnProperty.call(nv,e)};var hv=jy.realpath&&"function"==typeof jy.realpath.native?jy.realpath.native:jy.realpath,fv=function(e,t){jy.stat(e,(function(e,r){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,r.isFile()||r.isFIFO())}))},dv=function(e,t){jy.stat(e,(function(e,r){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,r.isDirectory())}))},pv=function(e,t){hv(e,(function(r,n){r&&"ENOENT"!==r.code?t(r):t(null,r?e:n)}))},mv=function(e,t,r,n){r&&!1===r.preserveSymlinks?e(t,n):n(null,t)};(xy=function(e,t,r){var n=r,i=t;if("function"==typeof t&&(n=i,i={}),"string"!=typeof e){var s=new TypeError("Path must be a string.");return process.nextTick((function(){n(s)}))}var o=(i=tv(0,i)).isFile||fv,a=i.isDirectory||dv,c=i.readFile||jy.readFile,u=i.realpath||pv,l=i.packageIterator,h=i.extensions||[".js"],f=i.basedir||Fy.dirname(Dy()),d=i.filename||f;i.paths=i.paths||[];var p,m=Fy.resolve(f);function g(t,r,s){t?n(t):r?n(null,r,s):v(p,(function(t,r,s){if(t)n(t);else if(r)mv(u,r,i,(function(e,t){e?n(e):n(null,t,s)}));else{var o=new Error("Cannot find module '"+e+"' from '"+d+"'");o.code="MODULE_NOT_FOUND",n(o)}}))}function y(e,t,r){var n=t,s=r;"function"==typeof n&&(s=n,n=void 0),function e(t,r,n){if(0===t.length)return s(null,void 0,n);var a=r+t[0],l=n;l?f(null,l):function e(t,r){if(""===t||"/"===t)return r(null);if("win32"===process.platform&&/^\w:[/\\]*$/.test(t))return r(null);if(/[/\\]node_modules[/\\]*$/.test(t))return r(null);mv(u,t,i,(function(n,s){if(n)return e(Fy.dirname(t),r);var a=Fy.join(s,"package.json");o(a,(function(n,s){if(!s)return e(Fy.dirname(t),r);c(a,(function(e,n){e&&r(e);try{var s=JSON.parse(n)}catch(e){}s&&i.packageFilter&&(s=i.packageFilter(s,a)),r(null,s,t)}))}))}))}(Fy.dirname(a),f);function f(n,c,u){if(l=c,n)return s(n);if(u&&l&&i.pathFilter){var f=Fy.relative(u,a),p=f.slice(0,f.length-t[0].length),m=i.pathFilter(l,r,p);if(m)return e([""].concat(h.slice()),Fy.resolve(u,m),l)}o(a,d)}function d(n,i){return n?s(n):i?s(null,a,l):void e(t.slice(1),r,l)}}([""].concat(h),e,n)}function v(e,t,r){var n=r,s=t;"function"==typeof s&&(n=s,s=i.package),mv(u,e,i,(function(t,r){if(t)return n(t);var a=Fy.join(r,"package.json");o(a,(function(t,r){return t?n(t):r?void c(a,(function(t,r){if(t)return n(t);try{var s=JSON.parse(r)}catch(e){}if(s&&i.packageFilter&&(s=i.packageFilter(s,a)),s&&s.main){if("string"!=typeof s.main){var o=new TypeError("package "+s.name+" `main` must be a string");return o.code="INVALID_PACKAGE_MAIN",n(o)}return"."!==s.main&&"./"!==s.main||(s.main="index"),void y(Fy.resolve(e,s.main),s,(function(t,r,i){return t?n(t):r?n(null,r,i):i?void v(Fy.resolve(e,i.main),i,(function(t,r,i){return t?n(t):r?n(null,r,i):void y(Fy.join(e,"index"),i,n)})):y(Fy.join(e,"index"),i,n)}))}y(Fy.join(e,"/index"),s,n)})):y(Fy.join(e,"index"),s,n)}))}))}mv(u,m,i,(function(t,r){t?n(t):function(t){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))p=Fy.resolve(t,e),"."!==e&&".."!==e&&"/"!==e.slice(-1)||(p+="/"),/\/$/.test(e)&&p===t?v(p,i.package,g):y(p,i.package,g);else{if(rv(e))return n(null,e);!function(e,t,r){var n=function(){return function(e,t,r){for(var n=$y(t,r,e),i=0;i<n.length;i++)n[i]=Fy.join(n[i],e);return n}(e,t,i)};!function e(t,r){if(0===r.length)return t(null,void 0);var n=r[0];function s(s,a){return s?t(s):a?void y(n,i.package,o):e(t,r.slice(1))}function o(e,r,s){return e?t(e):r?t(null,r,s):void v(n,i.package,c)}function c(n,i,s){return n?t(n):i?t(null,i,s):void e(t,r.slice(1))}a(Fy.dirname(n),s)}(r,l?l(e,t,n,i):n())}(e,t,(function(t,r,s){if(t)n(t);else{if(r)return mv(u,r,i,(function(e,t){e?n(e):n(null,t,s)}));var o=new Error("Cannot find module '"+e+"' from '"+d+"'");o.code="MODULE_NOT_FOUND",n(o)}}))}}(r)}))}).core=nv,xy.isCore=rv;var gv=h,yv=p,vv=gv.realpathSync&&"function"==typeof gv.realpathSync.native?gv.realpathSync.native:gv.realpathSync,bv=function(e){try{var t=gv.statSync(e)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return t.isFile()||t.isFIFO()},_v=function(e){try{var t=gv.statSync(e)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return t.isDirectory()},Ev=function(e){try{return vv(e)}catch(e){if("ENOENT"!==e.code)throw e}return e},wv=function(e,t,r){return r&&!1===r.preserveSymlinks?e(t):t};xy.sync=function(e,t){if("string"!=typeof e)throw new TypeError("Path must be a string.");var r=tv(0,t),n=r.isFile||bv,i=r.readFileSync||gv.readFileSync,s=r.isDirectory||_v,o=r.realpathSync||Ev,a=r.packageIterator,c=r.extensions||[".js"],u=r.basedir||yv.dirname(Dy()),l=r.filename||u;r.paths=r.paths||[];var h=wv(o,yv.resolve(u),r);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e)){var f=yv.resolve(h,e);"."!==e&&".."!==e&&"/"!==e.slice(-1)||(f+="/");var d=g(f)||y(f);if(d)return wv(o,d,r)}else{if(rv(e))return e;var p=function(e,t){for(var n=function(){return function(e,t,r){for(var n=$y(t,r,e),i=0;i<n.length;i++)n[i]=yv.join(n[i],e);return n}(e,t,r)},i=a?a(e,t,n,r):n(),o=0;o<i.length;o++){var c=i[o];if(s(yv.dirname(c))){var u=g(c);if(u)return u;var l=y(c);if(l)return l}}}(e,h);if(p)return wv(o,p,r)}var m=new Error("Cannot find module '"+e+"' from '"+l+"'");throw m.code="MODULE_NOT_FOUND",m;function g(e){var t=function e(t){if(""===t||"/"===t)return;if("win32"===process.platform&&/^\w:[/\\]*$/.test(t))return;if(/[/\\]node_modules[/\\]*$/.test(t))return;var s=yv.join(wv(o,t,r),"package.json");if(!n(s))return e(yv.dirname(t));var a=i(s);try{var c=JSON.parse(a)}catch(e){}c&&r.packageFilter&&(c=r.packageFilter(c,t));return{pkg:c,dir:t}}(yv.dirname(e));if(t&&t.dir&&t.pkg&&r.pathFilter){var s=yv.relative(t.dir,e),a=r.pathFilter(t.pkg,e,s);a&&(e=yv.resolve(t.dir,a))}if(n(e))return e;for(var u=0;u<c.length;u++){var l=e+c[u];if(n(l))return l}}function y(e){var t=yv.join(wv(o,e,r),"/package.json");if(n(t)){try{var s=i(t,"UTF8"),a=JSON.parse(s)}catch(e){}if(a&&r.packageFilter&&(a=r.packageFilter(a,e)),a&&a.main){if("string"!=typeof a.main){var c=new TypeError("package "+a.name+" `main` must be a string");throw c.code="INVALID_PACKAGE_MAIN",c}"."!==a.main&&"./"!==a.main||(a.main="index");try{var u=g(yv.resolve(e,a.main));if(u)return u;var l=y(yv.resolve(e,a.main));if(l)return l}catch(e){}}}return g(yv.join(e,"/index"))}},qy=xy;const Tv=h,Rv=p,{promisify:Sv}=E;var Cv,Ov,kv,Nv,Av,Pv={};Cv=Pv=Wv,Av="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){};Pv.SEMVER_SPEC_VERSION="2.0.0";var Iv=Number.MAX_SAFE_INTEGER||9007199254740991,Lv=(Ov=[],Pv.re=Ov),Mv=(kv=[],Pv.src=kv),xv=(Nv={},Pv.tokens=Nv),Dv=0;function qv(e){xv[e]=Dv++}qv("NUMERICIDENTIFIER"),Mv[xv.NUMERICIDENTIFIER]="0|[1-9]\\d*",qv("NUMERICIDENTIFIERLOOSE"),Mv[xv.NUMERICIDENTIFIERLOOSE]="[0-9]+",qv("NONNUMERICIDENTIFIER"),Mv[xv.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",qv("MAINVERSION"),Mv[xv.MAINVERSION]="("+Mv[xv.NUMERICIDENTIFIER]+")\\.("+Mv[xv.NUMERICIDENTIFIER]+")\\.("+Mv[xv.NUMERICIDENTIFIER]+")",qv("MAINVERSIONLOOSE"),Mv[xv.MAINVERSIONLOOSE]="("+Mv[xv.NUMERICIDENTIFIERLOOSE]+")\\.("+Mv[xv.NUMERICIDENTIFIERLOOSE]+")\\.("+Mv[xv.NUMERICIDENTIFIERLOOSE]+")",qv("PRERELEASEIDENTIFIER"),Mv[xv.PRERELEASEIDENTIFIER]="(?:"+Mv[xv.NUMERICIDENTIFIER]+"|"+Mv[xv.NONNUMERICIDENTIFIER]+")",qv("PRERELEASEIDENTIFIERLOOSE"),Mv[xv.PRERELEASEIDENTIFIERLOOSE]="(?:"+Mv[xv.NUMERICIDENTIFIERLOOSE]+"|"+Mv[xv.NONNUMERICIDENTIFIER]+")",qv("PRERELEASE"),Mv[xv.PRERELEASE]="(?:-("+Mv[xv.PRERELEASEIDENTIFIER]+"(?:\\."+Mv[xv.PRERELEASEIDENTIFIER]+")*))",qv("PRERELEASELOOSE"),Mv[xv.PRERELEASELOOSE]="(?:-?("+Mv[xv.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+Mv[xv.PRERELEASEIDENTIFIERLOOSE]+")*))",qv("BUILDIDENTIFIER"),Mv[xv.BUILDIDENTIFIER]="[0-9A-Za-z-]+",qv("BUILD"),Mv[xv.BUILD]="(?:\\+("+Mv[xv.BUILDIDENTIFIER]+"(?:\\."+Mv[xv.BUILDIDENTIFIER]+")*))",qv("FULL"),qv("FULLPLAIN"),Mv[xv.FULLPLAIN]="v?"+Mv[xv.MAINVERSION]+Mv[xv.PRERELEASE]+"?"+Mv[xv.BUILD]+"?",Mv[xv.FULL]="^"+Mv[xv.FULLPLAIN]+"$",qv("LOOSEPLAIN"),Mv[xv.LOOSEPLAIN]="[v=\\s]*"+Mv[xv.MAINVERSIONLOOSE]+Mv[xv.PRERELEASELOOSE]+"?"+Mv[xv.BUILD]+"?",qv("LOOSE"),Mv[xv.LOOSE]="^"+Mv[xv.LOOSEPLAIN]+"$",qv("GTLT"),Mv[xv.GTLT]="((?:<|>)?=?)",qv("XRANGEIDENTIFIERLOOSE"),Mv[xv.XRANGEIDENTIFIERLOOSE]=Mv[xv.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",qv("XRANGEIDENTIFIER"),Mv[xv.XRANGEIDENTIFIER]=Mv[xv.NUMERICIDENTIFIER]+"|x|X|\\*",qv("XRANGEPLAIN"),Mv[xv.XRANGEPLAIN]="[v=\\s]*("+Mv[xv.XRANGEIDENTIFIER]+")(?:\\.("+Mv[xv.XRANGEIDENTIFIER]+")(?:\\.("+Mv[xv.XRANGEIDENTIFIER]+")(?:"+Mv[xv.PRERELEASE]+")?"+Mv[xv.BUILD]+"?)?)?",qv("XRANGEPLAINLOOSE"),Mv[xv.XRANGEPLAINLOOSE]="[v=\\s]*("+Mv[xv.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+Mv[xv.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+Mv[xv.XRANGEIDENTIFIERLOOSE]+")(?:"+Mv[xv.PRERELEASELOOSE]+")?"+Mv[xv.BUILD]+"?)?)?",qv("XRANGE"),Mv[xv.XRANGE]="^"+Mv[xv.GTLT]+"\\s*"+Mv[xv.XRANGEPLAIN]+"$",qv("XRANGELOOSE"),Mv[xv.XRANGELOOSE]="^"+Mv[xv.GTLT]+"\\s*"+Mv[xv.XRANGEPLAINLOOSE]+"$",qv("COERCE"),Mv[xv.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",qv("COERCERTL"),Lv[xv.COERCERTL]=new RegExp(Mv[xv.COERCE],"g"),qv("LONETILDE"),Mv[xv.LONETILDE]="(?:~>?)",qv("TILDETRIM"),Mv[xv.TILDETRIM]="(\\s*)"+Mv[xv.LONETILDE]+"\\s+",Lv[xv.TILDETRIM]=new RegExp(Mv[xv.TILDETRIM],"g");qv("TILDE"),Mv[xv.TILDE]="^"+Mv[xv.LONETILDE]+Mv[xv.XRANGEPLAIN]+"$",qv("TILDELOOSE"),Mv[xv.TILDELOOSE]="^"+Mv[xv.LONETILDE]+Mv[xv.XRANGEPLAINLOOSE]+"$",qv("LONECARET"),Mv[xv.LONECARET]="(?:\\^)",qv("CARETTRIM"),Mv[xv.CARETTRIM]="(\\s*)"+Mv[xv.LONECARET]+"\\s+",Lv[xv.CARETTRIM]=new RegExp(Mv[xv.CARETTRIM],"g");qv("CARET"),Mv[xv.CARET]="^"+Mv[xv.LONECARET]+Mv[xv.XRANGEPLAIN]+"$",qv("CARETLOOSE"),Mv[xv.CARETLOOSE]="^"+Mv[xv.LONECARET]+Mv[xv.XRANGEPLAINLOOSE]+"$",qv("COMPARATORLOOSE"),Mv[xv.COMPARATORLOOSE]="^"+Mv[xv.GTLT]+"\\s*("+Mv[xv.LOOSEPLAIN]+")$|^$",qv("COMPARATOR"),Mv[xv.COMPARATOR]="^"+Mv[xv.GTLT]+"\\s*("+Mv[xv.FULLPLAIN]+")$|^$",qv("COMPARATORTRIM"),Mv[xv.COMPARATORTRIM]="(\\s*)"+Mv[xv.GTLT]+"\\s*("+Mv[xv.LOOSEPLAIN]+"|"+Mv[xv.XRANGEPLAIN]+")",Lv[xv.COMPARATORTRIM]=new RegExp(Mv[xv.COMPARATORTRIM],"g");qv("HYPHENRANGE"),Mv[xv.HYPHENRANGE]="^\\s*("+Mv[xv.XRANGEPLAIN]+")\\s+-\\s+("+Mv[xv.XRANGEPLAIN]+")\\s*$",qv("HYPHENRANGELOOSE"),Mv[xv.HYPHENRANGELOOSE]="^\\s*("+Mv[xv.XRANGEPLAINLOOSE]+")\\s+-\\s+("+Mv[xv.XRANGEPLAINLOOSE]+")\\s*$",qv("STAR"),Mv[xv.STAR]="(<|>)?=?\\s*\\*";for(var jv=0;jv<Dv;jv++)Av(jv,Mv[jv]),Lv[jv]||(Lv[jv]=new RegExp(Mv[jv]));var Fv=$v;function $v(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Wv)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?Lv[xv.LOOSE]:Lv[xv.FULL]).test(e))return null;try{return new Wv(e,t)}catch(e){return null}}Pv.parse=Fv;var Bv=function(e,t){var r=$v(e,t);return r?r.version:null};Pv.valid=Bv;var Uv=function(e,t){var r=$v(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};Pv.clean=Uv;var Hv=Wv;function Wv(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Wv){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof Wv))return new Wv(e,t);Av("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Lv[xv.LOOSE]:Lv[xv.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Iv||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Iv||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Iv||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<Iv)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Pv.SemVer=Hv,Wv.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Wv.prototype.toString=function(){return this.version},Wv.prototype.compare=function(e){return Av("SemVer.compare",this.version,this.options,e),e instanceof Wv||(e=new Wv(e,this.options)),this.compareMain(e)||this.comparePre(e)},Wv.prototype.compareMain=function(e){return e instanceof Wv||(e=new Wv(e,this.options)),Kv(this.major,e.major)||Kv(this.minor,e.minor)||Kv(this.patch,e.patch)},Wv.prototype.comparePre=function(e){if(e instanceof Wv||(e=new Wv(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(Av("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Kv(r,n)}while(++t)},Wv.prototype.compareBuild=function(e){e instanceof Wv||(e=new Wv(e,this.options));var t=0;do{var r=this.build[t],n=e.build[t];if(Av("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Kv(r,n)}while(++t)},Wv.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};var Gv=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new Wv(e,r).inc(t,n).version}catch(e){return null}};Pv.inc=Gv;var Vv=function(e,t){if(fb(e,t))return null;var r=$v(e),n=$v(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if(("major"===o||"minor"===o||"patch"===o)&&r[o]!==n[o])return i+o;return s};Pv.diff=Vv;var zv=Kv;Pv.compareIdentifiers=zv;var Qv=/^[0-9]+$/;function Kv(e,t){var r=Qv.test(e),n=Qv.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}var Jv=function(e,t){return Kv(t,e)};Pv.rcompareIdentifiers=Jv;var Yv=function(e,t){return new Wv(e,t).major};Pv.major=Yv;var Xv=function(e,t){return new Wv(e,t).minor};Pv.minor=Xv;var Zv=function(e,t){return new Wv(e,t).patch};Pv.patch=Zv;var eb=tb;function tb(e,t,r){return new Wv(e,r).compare(new Wv(t,r))}Pv.compare=eb;var rb=function(e,t){return tb(e,t,!0)};Pv.compareLoose=rb;var nb=function(e,t,r){var n=new Wv(e,r),i=new Wv(t,r);return n.compare(i)||n.compareBuild(i)};Pv.compareBuild=nb;var ib=function(e,t,r){return tb(t,e,r)};Pv.rcompare=ib;var sb=function(e,t){return e.sort((function(e,r){return Cv.compareBuild(e,r,t)}))};Pv.sort=sb;var ob=function(e,t){return e.sort((function(e,r){return Cv.compareBuild(r,e,t)}))};Pv.rsort=ob;var ab=cb;function cb(e,t,r){return tb(e,t,r)>0}Pv.gt=ab;var ub=lb;function lb(e,t,r){return tb(e,t,r)<0}Pv.lt=ub;var hb=fb;function fb(e,t,r){return 0===tb(e,t,r)}Pv.eq=hb;var db=pb;function pb(e,t,r){return 0!==tb(e,t,r)}Pv.neq=db;var mb=gb;function gb(e,t,r){return tb(e,t,r)>=0}Pv.gte=mb;var yb=vb;function vb(e,t,r){return tb(e,t,r)<=0}Pv.lte=yb;var bb=_b;function _b(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return fb(e,r,n);case"!=":return pb(e,r,n);case">":return cb(e,r,n);case">=":return gb(e,r,n);case"<":return lb(e,r,n);case"<=":return vb(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}Pv.cmp=bb;var Eb=wb;function wb(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof wb){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof wb))return new wb(e,t);Av("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Tb?this.value="":this.value=this.operator+this.semver.version,Av("comp",this)}Pv.Comparator=Eb;var Tb={};wb.prototype.parse=function(e){var t=this.options.loose?Lv[xv.COMPARATORLOOSE]:Lv[xv.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new Wv(r[2],this.options.loose):this.semver=Tb},wb.prototype.toString=function(){return this.value},wb.prototype.test=function(e){if(Av("Comparator.test",e,this.options.loose),this.semver===Tb||e===Tb)return!0;if("string"==typeof e)try{e=new Wv(e,this.options)}catch(e){return!1}return _b(e,this.operator,this.semver,this.options)},wb.prototype.intersects=function(e,t){if(!(e instanceof wb))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new Sb(e.value,t),Ib(this.value,r,t));if(""===e.operator)return""===e.value||(r=new Sb(this.value,t),Ib(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=_b(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=_b(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||s&&o||a||c};var Rb=Sb;function Sb(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Sb)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Sb(e.raw,t);if(e instanceof wb)return new Sb(e.value,t);if(!(this instanceof Sb))return new Sb(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function Cb(e,t){for(var r=!0,n=e.slice(),i=n.pop();r&&n.length;)r=n.every((function(e){return i.intersects(e,t)})),i=n.pop();return r}Pv.Range=Rb,Sb.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},Sb.prototype.toString=function(){return this.range},Sb.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?Lv[xv.HYPHENRANGELOOSE]:Lv[xv.HYPHENRANGE];e=e.replace(r,Nb),Av("hyphen replace",e),e=e.replace(Lv[xv.COMPARATORTRIM],"$1$2$3"),Av("comparator trim",e,Lv[xv.COMPARATORTRIM]),e=(e=(e=e.replace(Lv[xv.TILDETRIM],"$1~")).replace(Lv[xv.CARETTRIM],"$1^")).split(/\s+/).join(" ");var n=t?Lv[xv.COMPARATORLOOSE]:Lv[xv.COMPARATOR],i=e.split(" ").map((function(e){return function(e,t){return Av("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){Av("caret",e,t);var r=t.loose?Lv[xv.CARETLOOSE]:Lv[xv.CARET];return e.replace(r,(function(t,r,n,i,s){var o;return Av("caret",e,t,r,n,i,s),kb(r)?o="":kb(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":kb(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":s?(Av("replaceCaret pr",s),o="0"===r?"0"===n?">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+"-"+s+" <"+(+r+1)+".0.0"):(Av("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),Av("caret return",o),o}))}(e,t)})).join(" ")}(e,t),Av("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?Lv[xv.TILDELOOSE]:Lv[xv.TILDE];return e.replace(r,(function(t,r,n,i,s){var o;return Av("tilde",e,t,r,n,i,s),kb(r)?o="":kb(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":kb(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":s?(Av("replaceTilde pr",s),o=">="+r+"."+n+"."+i+"-"+s+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",Av("tilde return",o),o}))}(e,t)})).join(" ")}(e,t),Av("tildes",e),e=function(e,t){return Av("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?Lv[xv.XRANGELOOSE]:Lv[xv.XRANGE];return e.replace(r,(function(r,n,i,s,o,a){Av("xRange",e,r,n,i,s,o,a);var c=kb(i),u=c||kb(s),l=u||kb(o),h=l;return"="===n&&h&&(n=""),a=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(s=0),o=0,">"===n?(n=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),r=n+i+"."+s+"."+o+a):u?r=">="+i+".0.0"+a+" <"+(+i+1)+".0.0"+a:l&&(r=">="+i+"."+s+".0"+a+" <"+i+"."+(+s+1)+".0"+a),Av("xRange return",r),r}))}(e,t)})).join(" ")}(e,t),Av("xrange",e),e=function(e,t){return Av("replaceStars",e,t),e.trim().replace(Lv[xv.STAR],"")}(e,t),Av("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter((function(e){return!!e.match(n)}))),i=i.map((function(e){return new wb(e,this.options)}),this)},Sb.prototype.intersects=function(e,t){if(!(e instanceof Sb))throw new TypeError("a Range is required");return this.set.some((function(r){return Cb(r,t)&&e.set.some((function(e){return Cb(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))};var Ob=function(e,t){return new Sb(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))};function kb(e){return!e||"x"===e.toLowerCase()||"*"===e}function Nb(e,t,r,n,i,s,o,a,c,u,l,h,f){return((t=kb(r)?"":kb(n)?">="+r+".0.0":kb(i)?">="+r+"."+n+".0":">="+t)+" "+(a=kb(c)?"":kb(u)?"<"+(+c+1)+".0.0":kb(l)?"<"+c+"."+(+u+1)+".0":h?"<="+c+"."+u+"."+l+"-"+h:"<="+a)).trim()}function Ab(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(Av(e[n].semver),e[n].semver!==Tb&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}Pv.toComparators=Ob,Sb.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new Wv(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(Ab(this.set[t],e,this.options))return!0;return!1};var Pb=Ib;function Ib(e,t,r){try{t=new Sb(t,r)}catch(e){return!1}return t.test(e)}Pv.satisfies=Pb;var Lb=function(e,t,r){var n=null,i=null;try{var s=new Sb(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&-1!==i.compare(e)||(i=new Wv(n=e,r)))})),n};Pv.maxSatisfying=Lb;var Mb=function(e,t,r){var n=null,i=null;try{var s=new Sb(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&1!==i.compare(e)||(i=new Wv(n=e,r)))})),n};Pv.minSatisfying=Mb;var xb=function(e,t){e=new Sb(e,t);var r=new Wv("0.0.0");if(e.test(r))return r;if(r=new Wv("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new Wv(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!cb(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null};Pv.minVersion=xb;var Db=function(e,t){try{return new Sb(e,t).range||"*"}catch(e){return null}};Pv.validRange=Db;var qb=function(e,t,r){return $b(e,t,"<",r)};Pv.ltr=qb;var jb=function(e,t,r){return $b(e,t,">",r)};Pv.gtr=jb;var Fb=$b;function $b(e,t,r,n){var i,s,o,a,c;switch(e=new Wv(e,n),t=new Sb(t,n),r){case">":i=cb,s=vb,o=lb,a=">",c=">=";break;case"<":i=lb,s=gb,o=cb,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ib(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],h=null,f=null;if(l.forEach((function(e){e.semver===Tb&&(e=new wb(">=0.0.0")),h=h||e,f=f||e,i(e.semver,h.semver,n)?h=e:o(e.semver,f.semver,n)&&(f=e)})),h.operator===a||h.operator===c)return!1;if((!f.operator||f.operator===a)&&s(e,f.semver))return!1;if(f.operator===c&&o(e,f.semver))return!1}return!0}Pv.outside=Fb;var Bb=function(e,t){var r=$v(e,t);return r&&r.prerelease.length?r.prerelease:null};Pv.prerelease=Bb;var Ub=function(e,t,r){return e=new Sb(e,r),t=new Sb(t,r),e.intersects(t)};Pv.intersects=Ub;var Hb=function(e,t){if(e instanceof Wv)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=Lv[xv.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),Lv[xv.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Lv[xv.COERCERTL].lastIndex=-1}else r=e.match(Lv[xv.COERCE]);if(null===r)return null;return $v(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)};Pv.coerce=Hb;const Wb=Pb(process.version,">=10.12.0"),Gb=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(Rv.parse(e).root,""))){const t=new Error("Path contains invalid characters: "+e);throw t.code="EINVAL",t}}},Vb=e=>({...{mode:511,fs:Tv},...e}),zb=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};var Qb=(e,t)=>{if(Gb(e),t=Vb(t),Wb&&t.fs.mkdirSync===Tv.mkdirSync){const r=Rv.resolve(e);return Tv.mkdirSync(r,{mode:t.mode,recursive:!0}),r}const r=e=>{try{t.fs.mkdirSync(e,t.mode)}catch(n){if("EPERM"===n.code)throw n;if("ENOENT"===n.code){if(Rv.dirname(e)===e)throw zb(e);if(n.message.includes("null bytes"))throw n;return r(Rv.dirname(e)),r(e)}try{if(!t.fs.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch(e){throw n}}return e};return r(Rv.resolve(e))};const Kb=My("vscode-"+(process.env.EXT_NAMESPACE||"sqltools"),{suffix:null});function Jb(...e){return m.resolve(Kb.data,...e)}f.existsSync(Kb.data)||Qb(Kb.data),f.existsSync(Jb("node_modules"))||Qb(Jb("node_modules"));const Yb=e=>qy.sync(e,{basedir:Jb()});var Xb,Zb,e_,t_,r_=!1;function n_(e){if(!(e instanceof Error))return e;e[Zb]=void 0;const t=Object.create(t_);t.type=e.constructor.name,t.message=e.message,t.stack=e.stack;for(const r in e)if(void 0===t[r]){const n=e[r];n instanceof Error?n.hasOwnProperty(Zb)||(t[r]=n_(n)):t[r]=n}return delete e[Zb],t.raw=e,t}function i_(){return r_||(r_=!0,Xb={},Xb=n_,Zb=Symbol("circular-ref-tag"),e_=Symbol("pino-raw-err-ref"),t_=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[e_]},set:function(e){this[e_]=e}}}),Object.defineProperty(t_,e_,{writable:!0,value:{}})),Xb}var s_,o_,a_,c_=!1;function u_(e){var t=e.info||e.connection;const r=Object.create(a_);return r.id="function"==typeof e.id?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?r.url=e.originalUrl:r.url=e.url?e.url.path||e.url:void 0,r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function l_(e){return{req:u_(e)}}function h_(){return c_||(c_=!0,s_={},s_={mapHttpRequest:l_,reqSerializer:u_},o_=Symbol("pino-raw-req-ref"),a_=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[o_]},set:function(e){this[o_]=e}}}),Object.defineProperty(a_,o_,{writable:!0,value:{}})),s_}var f_,d_,p_,m_=!1;function g_(e){const t=Object.create(p_);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function y_(e){return{res:g_(e)}}function v_(){return m_||(m_=!0,f_={},f_={mapHttpResponse:y_,resSerializer:g_},d_=Symbol("pino-raw-res-ref"),p_=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[d_]},set:function(e){this[d_]=e}}}),Object.defineProperty(p_,d_,{writable:!0,value:{}})),f_}var b_,__,E_,w_,T_=!1;function R_(){return T_||(T_=!0,b_={},__=i_(),E_=h_(),w_=v_(),b_={err:__,mapHttpRequest:E_.mapHttpRequest,mapHttpResponse:w_.mapHttpResponse,req:E_.reqSerializer,res:w_.resSerializer,wrapErrorSerializer:function(e){return e===__?e:function(t){return e(__(t))}},wrapRequestSerializer:function(e){return e===E_.reqSerializer?e:function(t){return e(E_.reqSerializer(t))}},wrapResponseSerializer:function(e){return e===w_.resSerializer?e:function(t){return e(w_.resSerializer(t))}}}),b_}var S_,C_,O_,k_=!1;function N_(e={}){const{ERR_PATHS_MUST_BE_STRINGS:t=(()=>"fast-redact - Paths must be strings"),ERR_INVALID_PATH:r=(e=>`fast-redact  Invalid path (${e})`)}=e;return function({paths:e}){e.forEach(e=>{if("string"!=typeof e)throw Error(t());try{if(//.test(e))throw Error();const t=new Proxy({},{get:()=>t,set:()=>{throw Error()}}),r=("["===e[0]?"":".")+e.replace(/^\*/,"").replace(/\.\*/g,".").replace(/\[\*\]/g,"[]");if(/\n|\r|;/.test(r))throw Error();if(/\/\*/.test(r))throw Error();O_(`\n          (function () {\n            'use strict'\n            o${r}\n            if ([o${r}].length !== 1) throw Error()\n          })()\n        `,C_({o:t,"":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch(t){throw Error(r(e))}})}}function A_(){return k_||(k_=!0,S_={},({createContext:C_,runInContext:O_}=r),S_=N_),S_}var P_,I_=!1;function L_(){return I_||(I_=!0,P_={},P_=/[^.[\]]+|\[((?:.)*?)\]/g),P_}var M_,x_,D_=!1;function q_({paths:e}){const t=[];var r=0;const n=e.reduce((function(e,n,i){var s=n.match(x_).map(e=>e.replace(/'|"|`/g,""));const o="["===n[0],a=(s=s.map(e=>"["===e[0]?e.substr(1,e.length-2):e)).indexOf("*");if(a>-1){const e=s.slice(0,a),n=e.join("."),i=s.slice(a+1,s.length);if(i.indexOf("*")>-1)throw Error("fast-redact  Only one wildcard per path is supported");const o=i.length>0;r++,t.push({before:e,beforeStr:n,after:i,nested:o})}else e[n]={path:s,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(n),leadingBracket:o};return e}),{});return{wildcards:t,wcLen:r,secret:n}}function j_(){return D_||(D_=!0,M_={},x_=L_(),M_=q_),M_}var F_,$_,B_=!1;function U_({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i},s){const o=Function("o",`\n    if (typeof o !== 'object' || o == null) {\n      ${function(e,t){return!0===e?"throw Error('fast-redact: primitives cannot be redacted')":!1===t?"return o":"return this.serialize(o)"}(n,t)}\n    }\n    const { censor, secret } = this\n    ${function(e,t){return Object.keys(e).map(r=>{const{escPath:n,leadingBracket:i}=e[r],s=i?1:0,o=i?"":".",a=[];for(var c;null!==(c=$_.exec(r));){const[,e]=c,{index:t,input:r}=c;t>s&&a.push(r.substring(0,t-(e?0:1)))}var u=a.map(e=>`o${o}${e}`).join(" && ");0===u.length?u+=`o${o}${r} != null`:u+=` && o${o}${r} != null`;const l=`\n      switch (true) {\n        ${a.reverse().map(e=>`\n          case o${o}${e} === censor:\n            secret[${n}].circle = ${JSON.stringify(e)}\n            break\n        `).join("\n")}\n      }\n    `;return`\n      if (${u}) {\n        const val = o${o}${r}\n        if (val === censor) {\n          secret[${n}].precensored = true\n        } else {\n          secret[${n}].val = val\n          o${o}${r} = ${t?"censor(val)":"censor"}\n          ${l}\n        }\n      }\n    `}).join("\n")}(e,i)}\n    this.compileRestore()\n    ${function(e,t){return!0===e?`\n    {\n      const { wildcards, wcLen, groupRedact, nestedRedact } = this\n      for (var i = 0; i < wcLen; i++) {\n        const { before, beforeStr, after, nested } = wildcards[i]\n        if (nested === true) {\n          secret[beforeStr] = secret[beforeStr] || []\n          nestedRedact(secret[beforeStr], o, before, after, censor, ${t})\n        } else secret[beforeStr] = groupRedact(o, before, censor, ${t})\n      }\n    }\n  `:""}(r>0,i)}\n    ${function(e){return!1===e?"return o":"\n    var s = this.serialize(o)\n    this.restore(o)\n    return s\n  "}(t)}\n  `).bind(s);return!1===t&&(o.restore=e=>s.restore(e)),o}function H_(){return B_||(B_=!0,F_={},$_=L_(),F_=U_),F_}var W_,G_=!1;function V_({keys:e,values:t,target:r}){if(null==r)return;const n=e.length;for(var i=0;i<n;i++){r[e[i]]=t[i]}}function z_(e,t,r,n){const i=Y_(e,t);if(null==i)return{keys:null,values:null,target:null,flat:!0};const s=Object.keys(i),o=s.length,a=new Array(o);for(var c=0;c<o;c++){const e=s[c];a[c]=i[e],i[e]=n?r(i[e]):r}return{keys:s,values:a,target:i,flat:!0}}function Q_(e){const t=e.length;for(var r=0;r<t;r++){const{key:t,target:n,value:i}=e[r];n[t]=i}}function K_(e,t,r,n,i,s){const o=Y_(t,r);if(null==o)return;const a=Object.keys(o),c=a.length;for(var u=0;u<c;u++){const t=a[u],{value:r,parent:c,exists:l}=J_(o,t,n,i,s);!0===l&&null!==c&&e.push({key:n[n.length-1],target:c,value:r})}return e}function J_(e,t,r,n,i){var s,o,a,c,u,l=-1,h=r.length,f=h-1,d=null,p=!0;if(a=s=e[t],"object"!=typeof s)return{value:null,parent:null,exists:p};for(;null!=s&&++l<h;){if(d=a,!((t=r[l])in s)){p=!1;break}if(a=s[t],o=i?n(a):n,o=l!==f?a:o,s[t]=(c=s,u=t,Object.prototype.hasOwnProperty.call(c,u)&&o===a||void 0===o&&void 0!==n?s[t]:o),"object"!=typeof(s=s[t]))break}return{value:a,parent:d,exists:p}}function Y_(e,t){for(var r=-1,n=t.length,i=e;null!=i&&++r<n;)i=i[t[r]];return i}function X_(){return G_||(G_=!0,W_={},W_={groupRedact:z_,groupRestore:V_,nestedRedact:K_,nestedRestore:Q_}),W_}var Z_,eE,tE,rE=!1;function nE({secret:e,wcLen:t}){return function(){if(this.restore)return;const r=Object.keys(e).filter(t=>!1===e[t].precensored),n=function(e,t){return t.map(t=>{const{circle:r,escPath:n,leadingBracket:i}=e[t];return`\n      if (secret[${n}].val !== undefined) {\n        try { ${r?`o.${r} = secret[${n}].val`:`o${i?"":"."}${t} = secret[${n}].val`} } catch (e) {}\n        ${`secret[${n}].val = undefined`}\n      }\n    `}).join("")}(e,r),i=t>0,s=i?{secret:e,groupRestore:eE,nestedRestore:tE}:{secret:e};this.restore=Function("o",function(e,t,r){const n=!0===r?`\n    const keys = Object.keys(secret)\n    const len = keys.length\n    for (var i = ${t.length}; i < len; i++) {\n      const k = keys[i]\n      const o = secret[k]\n      if (o.flat === true) this.groupRestore(o)\n      else this.nestedRestore(o)\n      secret[k] = null\n    }\n  `:"";return`\n    const secret = this.secret\n    ${e}\n    ${n}\n    return o\n  `}(n,r,i)).bind(s)}}function iE(){return rE||(rE=!0,Z_={},({groupRestore:eE,nestedRestore:tE}=X_()),Z_=nE),Z_}var sE,oE=!1;function aE(e){const{secret:t,censor:r,isCensorFct:n,compileRestore:i,serialize:s,groupRedact:o,nestedRedact:a,wildcards:c,wcLen:u}=e,l=[{secret:t,censor:r,isCensorFct:n,compileRestore:i}];return l.push({secret:t}),!1!==s&&l.push({serialize:s}),u>0&&l.push({groupRedact:o,nestedRedact:a,wildcards:c,wcLen:u}),Object.assign(...l)}function cE(){return oE||(oE=!0,sE={},sE=aE),sE}var uE,lE,hE,fE,dE,pE,mE,gE,yE,vE,bE,_E,EE=!1;function wE(e={}){const t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(!1===e.serialize||"function"==typeof e.serialize)?e.serialize:JSON.stringify,n=e.remove;if(!0===n&&r!==JSON.stringify)throw Error("fast-redact  remove option may only be set when serializer is JSON.stringify");const i=!0===n?void 0:"censor"in e?e.censor:_E,s="function"==typeof i;if(0===t.length)return r||bE;vE({paths:t,serialize:r,censor:i});const{wildcards:o,wcLen:a,secret:c}=hE({paths:t,censor:i}),u=dE({secret:c,wcLen:a}),l=!("strict"in e)||e.strict;return fE({secret:c,wcLen:a,serialize:r,strict:l,isCensorFct:s},gE({secret:c,censor:i,compileRestore:u,serialize:r,groupRedact:pE,nestedRedact:mE,wildcards:o,wcLen:a}))}function TE(){return EE||(EE=!0,uE={},lE=A_(),hE=j_(),fE=H_(),dE=iE(),({groupRedact:pE,nestedRedact:mE}=X_()),gE=cE(),yE=L_(),vE=lE(),(bE=e=>e).restore=bE,_E="[REDACTED]",wE.rx=yE,wE.validator=lE,uE=wE),uE}var RE,SE,CE,OE,kE,NE,AE,PE,IE,LE,ME,xE,DE,qE,jE,FE,$E,BE,UE,HE,WE,GE,VE,zE,QE,KE,JE,YE=!1;function XE(){return YE||(YE=!0,RE={},SE=Symbol("pino.setLevel"),CE=Symbol("pino.getLevel"),OE=Symbol("pino.levelVal"),kE=Symbol("pino.useLevelLabels"),NE=Symbol("pino.useOnlyCustomLevels"),AE=Symbol("pino.mixin"),PE=Symbol("pino.lsCache"),IE=Symbol("pino.chindings"),LE=Symbol("pino.parsedChindings"),ME=Symbol("pino.asJson"),xE=Symbol("pino.write"),DE=Symbol("pino.redactFmt"),qE=Symbol("pino.time"),jE=Symbol("pino.timeSliceIndex"),FE=Symbol("pino.stream"),$E=Symbol("pino.stringify"),BE=Symbol("pino.stringifiers"),UE=Symbol("pino.end"),HE=Symbol("pino.formatOpts"),WE=Symbol("pino.messageKey"),GE=Symbol("pino.nestedKey"),VE=Symbol("pino.wildcardFirst"),zE=Symbol.for("pino.serializers"),QE=Symbol.for("pino.formatters"),KE=Symbol.for("pino.hooks"),JE=Symbol.for("pino.metadata"),RE={setLevelSym:SE,getLevelSym:CE,levelValSym:OE,useLevelLabelsSym:kE,mixinSym:AE,lsCacheSym:PE,chindingsSym:IE,parsedChindingsSym:LE,asJsonSym:ME,writeSym:xE,serializersSym:zE,redactFmtSym:DE,timeSym:qE,timeSliceIndexSym:jE,streamSym:FE,stringifySym:$E,stringifiersSym:BE,endSym:UE,formatOptsSym:HE,messageKeySym:WE,nestedKeySym:GE,wildcardFirstSym:VE,needsMetadataGsym:JE,useOnlyCustomLevelsSym:NE,formattersSym:QE,hooksSym:KE}),RE}var ZE,ew,tw,rw,nw,iw,sw,ow,aw,cw=!1;function uw(e,t){const{paths:r,censor:n}=function(e){if(Array.isArray(e))return sw(e={paths:e,censor:ow}),e;var{paths:t,censor:r=ow,remove:n}=e;if(!1===Array.isArray(t))throw Error("pino  redact must contain an array of strings");!0===n&&(r=void 0);return sw({paths:t,censor:r}),{paths:t,censor:r}}(e),i=r.reduce((e,t)=>{nw.lastIndex=0;const r=nw.exec(t),n=nw.exec(t);let i=void 0!==r[1]?r[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):r[0];if("*"===i&&(i=rw),null===n)return e[i]=null,e;if(null===e[i])return e;const{index:s}=n,o=""+t.substr(s,t.length-1);return e[i]=e[i]||[],i!==rw&&0===e[i].length&&e[i].push(...e[rw]||[]),i===rw&&Object.keys(e).forEach((function(t){e[t]&&e[t].push(o)})),e[i].push(o),e},{}),s={[tw]:ew({paths:r,censor:n,serialize:t,strict:aw})},o=(...e)=>t("function"==typeof n?n(...e):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((e,r)=>(null===i[r]?e[r]=o:e[r]=ew({paths:i[r],censor:n,serialize:t,strict:aw}),e),s)}function lw(){return cw||(cw=!0,ZE={},ew=TE(),({redactFmtSym:tw,wildcardFirstSym:rw}=XE()),({rx:nw,validator:iw}=ew),sw=iw({ERR_PATHS_MUST_BE_STRINGS:()=>"pino  redacted paths must be strings",ERR_INVALID_PATH:e=>`pino  redact paths array contains an invalid path (${e})`}),ow="[Redacted]",aw=!1,ZE=uw),ZE}var hw,fw=!1;function dw(){return fw||(fw=!0,hw={},hw={nullTime:()=>"",epochTime:()=>',"time":'+Date.now(),unixTime:()=>',"time":'+Math.round(Date.now()/1e3),isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`}),hw}var pw,mw=!1;function gw(e){return e}function yw(){return mw||(mw=!0,pw={},pw=gw),pw}var vw,bw=!1;function _w(e){if(!1===(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(nil,0,0,Number(e))}function _w(e){if(!1===(e>0&&e<1/0)){if("number"!=typeof e&&"bigint"!=typeof e)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}const t=Date.now()+Number(e);for(;t>Date.now(););}function Ew(){return bw||(bw=!0,function(){if(vw={},"undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){new Int32Array(new SharedArrayBuffer(4));vw=_w}else vw=_w}()),vw}var ww,Tw,Rw,Sw,Cw,Ow,kw,Nw,Aw=!1;function Pw(e,t){function r(e,r){if(e)t.emit("error",e);else if(t.fd=r,t._reopening=!1,t._opening=!1,t._writing=!1,t.emit("ready"),!t._reopening){var n=t._buf.length;n>0&&n>t.minLength&&!t.destroyed&&Mw(t)}}if(t._opening=!0,t._writing=!0,t.file=e,t.sync){r(null,Tw.openSync(e,"a")),process.nextTick(()=>t.emit("ready"))}else Tw.open(e,"a",r)}function Iw(e){if(!(this instanceof Iw))return new Iw(e);var{fd:t,dest:r,minLength:n,sync:i}=e||{};if(t=t||r,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=i||!1,this.minLength=n||0,"number"==typeof t)this.fd=t,process.nextTick(()=>this.emit("ready"));else{if("string"!=typeof t)throw new Error("SonicBoom supports only file descriptors and files");Pw(t,this)}this.release=(e,t)=>{if(e)if("EAGAIN"===e.code)if(this.sync)try{kw(Ow),this.release(void 0,0)}catch(e){this.release(e)}else setTimeout(()=>{Tw.write(this.fd,this._writingBuf,"utf8",this.release)},Ow);else this.emit("error",e);else{if(this._writingBuf.length!==t){if(this._writingBuf=this._writingBuf.slice(t),!this.sync)return void Tw.write(this.fd,this._writingBuf,"utf8",this.release);try{do{t=Tw.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(t)}while(0!==this._writingBuf.length)}catch(e){return void this.release(e)}}if(this._writingBuf="",!this.destroyed){var r=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):r>0&&r>this.minLength?Mw(this):this._ending?r>0?Mw(this):(this._writing=!1,xw(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(Lw,this)):this.emit("drain"))}}}}function Lw(e){e._asyncDrainScheduled=!1,e.emit("drain")}function Mw(e){e._writing=!0;var t=e._buf,r=e.release;if(t.length>Nw?(t=t.slice(0,Nw),e._buf=e._buf.slice(Nw)):e._buf="",Sw(t),e._writingBuf=t,e.sync)try{r(null,Tw.writeSync(e.fd,t,"utf8"))}catch(e){r(e)}else Tw.write(e.fd,t,"utf8",r)}function xw(e){-1!==e.fd?(Tw.close(e.fd,t=>{t?e.emit("error",t):(e._ending&&!e._writing&&e.emit("finish"),e.emit("close"))}),e.destroyed=!0,e._buf=""):e.once("ready",xw.bind(null,e))}function Dw(){return Aw||(Aw=!0,ww={},Tw=h,Rw=w,Sw=yw(),Cw=E.inherits,Ow=100,kw=Ew(),Nw=16777216,Cw(Iw,Rw),Iw.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=e;var t=this._buf.length;return!this._writing&&t>this.minLength&&Mw(this),t<16384},Iw.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||Mw(this)},Iw.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening)this.once("ready",()=>{this.reopen(e)});else if(!this._ending){if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");this._reopening=!0,this._writing||(Tw.close(this.fd,e=>{if(e)return this.emit("error",e)}),Pw(e||this.file,this))}},Iw.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._opening?this.once("ready",()=>{this.end()}):this._ending||(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0?Mw(this):this._writing||xw(this))},Iw.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");this._buf.length>0&&(Tw.writeSync(this.fd,this._buf,"utf8"),this._buf="")},Iw.prototype.destroy=function(){this.destroyed||xw(this)},ww=Iw),ww}var qw,jw=!1;function Fw(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}function $w(e,t,r){var n=r&&r.stringify||Fw;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var s=new Array(i);s[0]=n(e);for(var o=1;o<i;o++)s[o]=n(t[o]);return s.join(" ")}if("string"!=typeof e)return e;var a=t.length;if(0===a)return e;for(var c="",u=0,l=-1,h=e&&e.length||0,f=0;f<h;){if(37===e.charCodeAt(f)&&f+1<h){switch(l=l>-1?l:0,e.charCodeAt(f+1)){case 100:if(u>=a)break;if(l<f&&(c+=e.slice(l,f)),null==t[u])break;c+=Number(t[u]),l=f+=2;break;case 79:case 111:case 106:if(u>=a)break;if(l<f&&(c+=e.slice(l,f)),void 0===t[u])break;var d=typeof t[u];if("string"===d){c+="'"+t[u]+"'",l=f+2,f++;break}if("function"===d){c+=t[u].name||"<anonymous>",l=f+2,f++;break}c+=n(t[u]),l=f+2,f++;break;case 115:if(u>=a)break;l<f&&(c+=e.slice(l,f)),c+=String(t[u]),l=f+2,f++;break;case 37:l<f&&(c+=e.slice(l,f)),c+="%",l=f+2,f++}++u}++f}return-1===l?e:(l<h&&(c+=e.slice(l)),c)}function Bw(){return jw||(jw=!0,qw={},qw=$w),qw}var Uw,Hw,Ww,Gw=!1;function Vw(e,t,r){var n;for(!function e(t,r,n,i){var s;if("object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t){var o=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==o.get?o.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),Hw.push([i,r,t,o])):Ww.push([t,r]):(i[r]="[Circular]",Hw.push([i,r,t])))}if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)e(t[s],s,n,t);else{var a=Object.keys(t);for(s=0;s<a.length;s++){var c=a[s];e(t[c],c,n,t)}}n.pop()}}(e,"",[],void 0),n=0===Ww.length?JSON.stringify(e,t,r):JSON.stringify(e,Kw(t),r);0!==Hw.length;){var i=Hw.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function zw(e,t){return e<t?-1:e>t?1:0}function Qw(e,t,r){var n,i=function e(t,r,n,i){var s;if("object"==typeof t&&null!==t){for(s=0;s<n.length;s++)if(n[s]===t){var o=Object.getOwnPropertyDescriptor(i,r);return void(void 0!==o.get?o.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),Hw.push([i,r,t,o])):Ww.push([t,r]):(i[r]="[Circular]",Hw.push([i,r,t])))}if("function"==typeof t.toJSON)return;if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)e(t[s],s,n,t);else{var a={},c=Object.keys(t).sort(zw);for(s=0;s<c.length;s++){var u=c[s];e(t[u],u,n,t),a[u]=t[u]}if(void 0===i)return a;Hw.push([i,r,t]),i[r]=a}n.pop()}}(e,"",[],void 0)||e;for(n=0===Ww.length?JSON.stringify(i,t,r):JSON.stringify(i,Kw(t),r);0!==Hw.length;){var s=Hw.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return n}function Kw(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(Ww.length>0)for(var n=0;n<Ww.length;n++){var i=Ww[n];if(i[1]===t&&i[0]===r){r="[Circular]",Ww.splice(n,1);break}}return e.call(this,t,r)}}function Jw(){return Gw||(Gw=!0,Uw={},Uw=Vw,Vw.default=Vw,Vw.stable=Qw,Vw.stableStringify=Qw,Hw=[],Ww=[]),Uw}var Yw,Xw=!1;function Zw(){return Xw||(Xw=!0,Yw={},Yw={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Yw}var eT,tT,rT,nT,iT=!1;function sT(){return iT||(iT=!0,function(){eT={},tT=Zw(),rT={};for(const e of Object.keys(tT))rT[tT[e]]=e;eT=nT={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(const e of Object.keys(nT)){if(!("channels"in nT[e]))throw new Error("missing channels property: "+e);if(!("labels"in nT[e]))throw new Error("missing channel labels property: "+e);if(nT[e].labels.length!==nT[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=nT[e];delete nT[e].channels,delete nT[e].labels,Object.defineProperty(nT[e],"channels",{value:t}),Object.defineProperty(nT[e],"labels",{value:r})}nT.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i;let a,c;s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(60*a,360),a<0&&(a+=360);const u=(i+s)/2;return c=s===i?0:u<=.5?o/(s+i):o/(2-s-i),[a,100*c,100*u]},nT.rgb.hsv=function(e){let t,r,n,i,s;const o=e[0]/255,a=e[1]/255,c=e[2]/255,u=Math.max(o,a,c),l=u-Math.min(o,a,c),h=function(e){return(u-e)/6/l+.5};return 0===l?(i=0,s=0):(s=l/u,t=h(o),r=h(a),n=h(c),o===u?i=n-r:a===u?i=1/3+t-n:c===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*u]},nT.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=nT.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,100*s,100*n]},nT.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},nT.rgb.keyword=function(e){const t=rT[e];if(t)return t;let r,n=1/0;for(const t of Object.keys(tT)){const o=tT[t],a=(s=o,((i=e)[0]-s[0])**2+(i[1]-s[1])**2+(i[2]-s[2])**2);a<n&&(n=a,r=t)}var i,s;return r},nT.keyword.rgb=function(e){return tT[e]},nT.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;return[100*(.4124*t+.3576*r+.1805*n),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},nT.rgb.lab=function(e){const t=nT.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*n-16,500*(r-n),200*(n-i)]},nT.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,s,o;if(0===r)return o=255*n,[o,o,o];i=n<.5?n*(1+r):n+r-n*r;const a=2*n-i,c=[0,0,0];for(let e=0;e<3;e++)s=t+1/3*-(e-1),s<0&&s++,s>1&&s--,o=6*s<1?a+6*(i-a)*s:2*s<1?i:3*s<2?a+(i-a)*(2/3-s)*6:a,c[e]=255*o;return c},nT.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;return[t,100*(0===n?2*i/(s+i):2*r/(n+r)),100*((n+r)/2)]},nT.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),c=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,c,o];case 1:return[a,n,o];case 2:return[o,n,c];case 3:return[o,a,n];case 4:return[c,o,n];case 5:return[n,o,a]}},nT.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let s,o;o=(2-r)*n;const a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[t,100*s,100*o]},nT.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let s;i>1&&(r/=i,n/=i);const o=Math.floor(6*t),a=1-n;s=6*t-o,0!=(1&o)&&(s=1-s);const c=r+s*(a-r);let u,l,h;switch(o){default:case 6:case 0:u=a,l=c,h=r;break;case 1:u=c,l=a,h=r;break;case 2:u=r,l=a,h=c;break;case 3:u=r,l=c,h=a;break;case 4:u=c,l=r,h=a;break;case 5:u=a,l=r,h=c}return[255*u,255*l,255*h]},nT.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},nT.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,s,o;return i=3.2406*t+-1.5372*r+-.4986*n,s=-.9689*t+1.8758*r+.0415*n,o=.0557*t+-.204*r+1.057*n,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[255*i,255*s,255*o]},nT.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(t-r),200*(r-n)]},nT.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const i=r**3,s=t**3,o=n**3;return r=i>.008856?i:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=o>.008856?o:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},nT.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;i=360*Math.atan2(n,r)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(r*r+n*n),i]},nT.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},nT.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let s=null===t?nT.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===s&&(o+=60),o},nT.hsv.ansi16=function(e){return nT.rgb.ansi16(nT.hsv.rgb(e),e[2])},nT.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},nT.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},nT.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},nT.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},nT.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map(e=>e+e).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},nT.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s;let a,c;return a=o<1?s/(1-o):0,c=o<=0?0:i===t?(r-n)/o%6:i===r?2+(n-t)/o:4+(t-r)/o,c/=6,c%=1,[360*c,100*o,100*a]},nT.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},nT.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},nT.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const i=[0,0,0],s=t%1*6,o=s%1,a=1-o;let c=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-r)*n,[255*(r*i[0]+c),255*(r*i[1]+c),255*(r*i[2]+c)]},nT.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},nT.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},nT.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},nT.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},nT.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},nT.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},nT.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},nT.gray.hsl=function(e){return[0,0,e[0]]},nT.gray.hsv=nT.gray.hsl,nT.gray.hwb=function(e){return[0,100,e[0]]},nT.gray.cmyk=function(e){return[0,0,0,e[0]]},nT.gray.lab=function(e){return[e[0],0,0]},nT.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},nT.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}()),eT}var oT,aT,cT=!1;function uT(e){const t=function(){const e={},t=Object.keys(aT);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;){const e=r.pop(),n=Object.keys(aT[e]);for(let i=n.length,s=0;s<i;s++){const i=n[s],o=t[i];-1===o.distance&&(o.distance=t[e].distance+1,o.parent=e,r.unshift(i))}}return t}function lT(e,t){return function(r){return t(e(r))}}function hT(e,t){const r=[t[e].parent,e];let n=aT[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=lT(aT[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}function fT(){return cT||(cT=!0,oT={},aT=sT(),oT=function(e){const t=uT(e),r={},n=Object.keys(t);for(let e=n.length,i=0;i<e;i++){const e=n[i];null!==t[e].parent&&(r[e]=hT(e,t))}return r}),oT}var dT,pT,mT,gT,yT=!1;function vT(){dT={},pT=sT(),mT=fT(),gT={},Object.keys(pT).forEach(e=>{gT[e]={},Object.defineProperty(gT[e],"channels",{value:pT[e].channels}),Object.defineProperty(gT[e],"labels",{value:pT[e].labels});const t=mT(e);Object.keys(t).forEach(r=>{const n=t[r];gT[e][r]=function(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(n),gT[e][r].raw=function(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)})}),dT=gT}var bT,_T=!1;function ET(){bT=function(){var e={exports:this};const t=(e,t)=>(...r)=>`[${e(...r)+t}m`,r=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};5;${n}m`},n=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`},i=e=>e,s=(e,t,r)=>[e,t,r],o=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{const n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})};let a;const c=(e,t,r,n)=>{void 0===a&&(yT||(yT=!0,vT()),a=dT);const i=n?10:0,s={};for(const[n,o]of Object.entries(a)){const a="ansi16"===n?"ansi":n;n===t?s[a]=e(r,i):"object"==typeof o&&(s[a]=e(o[t],i))}return s};return Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[t,r]of Object.entries(a)){for(const[t,n]of Object.entries(r))a[t]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[t]=a[t],e.set(n[0],n[1]);Object.defineProperty(a,t,{value:r,enumerable:!1})}return Object.defineProperty(a,"codes",{value:e,enumerable:!1}),a.color.close="[39m",a.bgColor.close="[49m",o(a.color,"ansi",()=>c(t,"ansi16",i,!1)),o(a.color,"ansi256",()=>c(r,"ansi256",i,!1)),o(a.color,"ansi16m",()=>c(n,"rgb",s,!1)),o(a.bgColor,"ansi",()=>c(t,"ansi16",i,!0)),o(a.bgColor,"ansi256",()=>c(r,"ansi256",i,!0)),o(a.bgColor,"ansi16m",()=>c(n,"rgb",s,!0)),a}}),e.exports}.call({})}var wT,TT=!1;function RT(){return TT||(TT=!0,wT={},wT=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)}),wT}var ST,CT,OT,kT,NT,AT,PT=!1;function IT(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function LT(e,t){if(0===AT)return 0;if(kT("color=16m")||kT("color=full")||kT("color=truecolor"))return 3;if(kT("color=256"))return 2;if(e&&!t&&void 0===AT)return 0;const r=AT||0;if("dumb"===NT.TERM)return r;if("win32"===process.platform){const e=CT.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in NT)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in NT)||"codeship"===NT.CI_NAME?1:r;if("TEAMCITY_VERSION"in NT)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(NT.TEAMCITY_VERSION)?1:0;if("GITHUB_ACTIONS"in NT)return 1;if("truecolor"===NT.COLORTERM)return 3;if("TERM_PROGRAM"in NT){const e=parseInt((NT.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(NT.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(NT.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(NT.TERM)||"COLORTERM"in NT?1:r}function MT(e){return IT(LT(e,e&&e.isTTY))}function xT(){return PT||(PT=!0,ST={},CT=i,OT=t,kT=RT(),({env:NT}=process),kT("no-color")||kT("no-colors")||kT("color=false")||kT("color=never")?AT=0:(kT("color")||kT("colors")||kT("color=true")||kT("color=always"))&&(AT=1),"FORCE_COLOR"in NT&&(AT="true"===NT.FORCE_COLOR?1:"false"===NT.FORCE_COLOR?0:0===NT.FORCE_COLOR.length?1:Math.min(parseInt(NT.FORCE_COLOR,10),3)),ST={supportsColor:MT,stdout:IT(LT(!0,OT.isatty(1))),stderr:IT(LT(!0,OT.isatty(2)))}),ST}var DT,qT=!1;function jT(){return qT||(qT=!0,DT={},DT={stringReplaceAll:(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return e;const i=t.length;let s=0,o="";do{o+=e.substr(s,n-s)+t+r,s=n+i,n=e.indexOf(t,s)}while(-1!==n);return o+=e.substr(s),o},stringEncaseCRLFWithFirstIndex:(e,t,r,n)=>{let i=0,s="";do{const o="\r"===e[n-1];s+=e.substr(i,(o?n-1:n)-i)+t+(o?"\r\n":"\n")+r,i=n+1,n=e.indexOf("\n",i)}while(-1!==n);return s+=e.substr(i),s}}),DT}var FT,$T,BT,UT,HT,WT,GT=!1;function VT(e){const t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):WT.get(e)||e}function zT(e,t){const r=[],n=t.trim().split(/\s*,\s*/g);let i;for(const t of n){const n=Number(t);if(Number.isNaN(n)){if(!(i=t.match(UT)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);r.push(i[2].replace(HT,(e,t,r)=>t?VT(t):r))}else r.push(n)}return r}function QT(e){BT.lastIndex=0;const t=[];let r;for(;null!==(r=BT.exec(e));){const e=r[1];if(r[2]){const n=zT(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function KT(e,t){const r={};for(const e of t)for(const t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(const[e,t]of Object.entries(r))if(Array.isArray(t)){if(!(e in n))throw new Error("Unknown Chalk style: "+e);n=t.length>0?n[e](...t):n[e]}return n}function JT(){return GT||(GT=!0,FT={},$T=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,BT=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,UT=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,HT=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,WT=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]),FT=(e,t)=>{const r=[],n=[];let i=[];if(t.replace($T,(t,s,o,a,c,u)=>{if(s)i.push(VT(s));else if(a){const t=i.join("");i=[],n.push(0===r.length?t:KT(e,r)(t)),r.push({inverse:o,styles:QT(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");n.push(KT(e,r)(i.join(""))),i=[],r.pop()}else i.push(u)}),n.push(i.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return n.join("")}),FT}var YT,XT,ZT,eR,tR,rR,nR,iR,sR,oR,aR,cR,uR,lR,hR,fR,dR,pR,mR,gR,yR=!1;function vR(e){return cR(e)}function bR(){YT={},_T||(_T=!0,ET()),XT=bT,({stdout:ZT,stderr:eR}=xT()),({stringReplaceAll:tR,stringEncaseCRLFWithFirstIndex:rR}=jT()),({isArray:nR}=Array),iR=["ansi","ansi","ansi256","ansi16m"],sR=Object.create(null),oR=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=ZT?ZT.level:0;e.level=void 0===t.level?r:t.level},aR=class{constructor(e){return cR(e)}},cR=e=>{const t={};return oR(t,e),t.template=(...e)=>mR(t.template,...e),Object.setPrototypeOf(t,vR.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=aR,t.template};for(const[e,t]of Object.entries(XT))sR[e]={get(){const r=fR(this,hR(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};sR.visible={get(){const e=fR(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}},uR=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of uR)sR[e]={get(){const{level:t}=this;return function(...r){const n=hR(XT.color[iR[t]][e](...r),XT.color.close,this._styler);return fR(this,n,this._isEmpty)}}};for(const e of uR){const t="bg"+e[0].toUpperCase()+e.slice(1);sR[t]={get(){const{level:t}=this;return function(...r){const n=hR(XT.bgColor[iR[t]][e](...r),XT.bgColor.close,this._styler);return fR(this,n,this._isEmpty)}}}}lR=Object.defineProperties(()=>{},{...sR,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),hR=(e,t,r)=>{let n,i;return void 0===r?(n=e,i=t):(n=r.openAll+e,i=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:i,parent:r}},fR=(e,t,r)=>{const n=(...e)=>nR(e[0])&&nR(e[0].raw)?dR(n,mR(n,...e)):dR(n,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(n,lR),n._generator=e,n._styler=t,n._isEmpty=r,n},dR=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(void 0===r)return t;const{openAll:n,closeAll:i}=r;if(-1!==t.indexOf(""))for(;void 0!==r;)t=tR(t,r.close,r.open),r=r.parent;const s=t.indexOf("\n");return-1!==s&&(t=rR(t,i,n,s)),n+t+i},mR=(e,...t)=>{const[r]=t;if(!nR(r)||!nR(r.raw))return t.join(" ");const n=t.slice(1),i=[r.raw[0]];for(let e=1;e<r.length;e++)i.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]));return void 0===pR&&(pR=JT()),pR(e,i.join(""))},Object.defineProperties(vR.prototype,sR),(gR=vR()).supportsColor=ZT,gR.stderr=vR({level:eR?eR.level:0}),gR.stderr.supportsColor=eR,YT=gR}function _R(){return yR||(yR=!0,bR()),YT}var ER,wR=!1;function TR(){!function(e){function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e,i){if(e===i)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(i))return!1;if(!0===t(e)){if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++)if(!1===n(e[s],i[s]))return!1;return!0}if(!0===r(e)){var o={};for(var a in e)if(hasOwnProperty.call(e,a)){if(!1===n(e[a],i[a]))return!1;o[a]=!0}for(var c in i)if(hasOwnProperty.call(i,c)&&!0!==o[c])return!1;return!0}return!1}function i(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(r(e)){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}return!1}var s;s="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var o=0,a=2,c={".":"Dot","*":"Star",",":"Comma",":":"Colon","{":"Lbrace","}":"Rbrace","]":"Rbracket","(":"Lparen",")":"Rparen","@":"Current"},u={"<":!0,">":!0,"=":!0,"!":!0},l={" ":!0,"\t":!0,"\n":!0};function h(e){return e>="0"&&e<="9"||"-"===e}function f(){}f.prototype={tokenize:function(e){var t,r,n,i,s=[];for(this._current=0;this._current<e.length;)if((i=e[this._current])>="a"&&i<="z"||i>="A"&&i<="Z"||"_"===i)t=this._current,r=this._consumeUnquotedIdentifier(e),s.push({type:"UnquotedIdentifier",value:r,start:t});else if(void 0!==c[e[this._current]])s.push({type:c[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(h(e[this._current]))n=this._consumeNumber(e),s.push(n);else if("["===e[this._current])n=this._consumeLBracket(e),s.push(n);else if('"'===e[this._current])t=this._current,r=this._consumeQuotedIdentifier(e),s.push({type:"QuotedIdentifier",value:r,start:t});else if("'"===e[this._current])t=this._current,r=this._consumeRawStringLiteral(e),s.push({type:"Literal",value:r,start:t});else if("`"===e[this._current]){t=this._current;var o=this._consumeLiteral(e);s.push({type:"Literal",value:o,start:t})}else if(void 0!==u[e[this._current]])s.push(this._consumeOperator(e));else if(void 0!==l[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,s.push({type:"And",value:"&&",start:t})):s.push({type:"Expref",value:"&",start:t});else{if("|"!==e[this._current]){var a=new Error("Unknown character:"+e[this._current]);throw a.name="LexerError",a}t=this._current,this._current++,"|"===e[this._current]?(this._current++,s.push({type:"Or",value:"||",start:t})):s.push({type:"Pipe",value:"|",start:t})}return s},_consumeUnquotedIdentifier:function(e){var t,r=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(r,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var r=e.length;'"'!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&'"'!==e[n+1]?n++:n+=2,this._current=n}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var r=e.length;"'"!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&"'"!==e[n+1]?n++:n+=2,this._current=n}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var r=e.length;h(e[this._current])&&this._current<r;)this._current++;return{type:"Number",value:parseInt(e.slice(t,this._current)),start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:"Filter",value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:"Flatten",value:"[]",start:t}):{type:"Lbracket",value:"[",start:t}},_consumeOperator:function(e){var t=this._current,r=e[t];return this._current++,"!"===r?"="===e[this._current]?(this._current++,{type:"NE",value:"!=",start:t}):{type:"Not",value:"!",start:t}:"<"===r?"="===e[this._current]?(this._current++,{type:"LTE",value:"<=",start:t}):{type:"LT",value:"<",start:t}:">"===r?"="===e[this._current]?(this._current++,{type:"GTE",value:">=",start:t}):{type:"GT",value:">",start:t}:"="===r&&"="===e[this._current]?(this._current++,{type:"EQ",value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,r=this._current,n=e.length;"`"!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var o=s(e.slice(r,this._current));return o=o.replace("\\`","`"),t=this._looksLikeJSON(o)?JSON.parse(o):JSON.parse('"'+o+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var d={};function p(){}function m(e){this.runtime=e}function g(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[o]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[o]}]},contains:{_func:this._functionContains,_signature:[{types:[a,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[a]},{types:[a]}]},floor:{_func:this._functionFloor,_signature:[{types:[o]}]},length:{_func:this._functionLength,_signature:[{types:[a,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[a]},{types:[a]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[a]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[a,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}d.EOF=0,d.UnquotedIdentifier=0,d.QuotedIdentifier=0,d.Rbracket=0,d.Rparen=0,d.Comma=0,d.Rbrace=0,d.Number=0,d.Current=0,d.Expref=0,d.Pipe=1,d.Or=2,d.And=3,d.EQ=5,d.GT=5,d.LT=5,d.GTE=5,d.LTE=5,d.NE=5,d.Flatten=9,d.Star=20,d.Filter=21,d.Dot=40,d.Not=45,d.Lbrace=50,d.Lbracket=55,d.Lparen=60,p.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if("EOF"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Unexpected token type: "+r.type+", value: "+r.value);throw n.name="ParserError",n}return t},_loadTokens:function(e){var t=(new f).tokenize(e);t.push({type:"EOF",value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var r=this.nud(t),n=this._lookahead(0);e<d[n];)this._advance(),r=this.led(n,r),n=this._lookahead(0);return r},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,r;switch(e.type){case"Literal":return{type:"Literal",value:e.value};case"UnquotedIdentifier":return{type:"Field",name:e.value};case"QuotedIdentifier":var n={type:"Field",name:e.value};if("Lparen"===this._lookahead(0))throw new Error("Quoted identifier not allowed for function names.");return n;case"Not":return{type:"NotExpression",children:[t=this.expression(d.Not)]};case"Star":return t=null,{type:"ValueProjection",children:[{type:"Identity"},t="Rbracket"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(d.Star)]};case"Filter":return this.led(e.type,{type:"Identity"});case"Lbrace":return this._parseMultiselectHash();case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[{type:"Identity"}]},t=this._parseProjectionRHS(d.Flatten)]};case"Lbracket":return"Number"===this._lookahead(0)||"Colon"===this._lookahead(0)?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):"Star"===this._lookahead(0)&&"Rbracket"===this._lookahead(1)?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(d.Star)]}):this._parseMultiselectList();case"Current":return{type:"Current"};case"Expref":return{type:"ExpressionReference",children:[r=this.expression(d.Expref)]};case"Lparen":for(var i=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(r={type:"Current"},this._advance()):r=this.expression(0),i.push(r);return this._match("Rparen"),i[0];default:this._errorToken(e)}},led:function(e,t){var r;switch(e){case"Dot":var n=d.Dot;return"Star"!==this._lookahead(0)?{type:"Subexpression",children:[t,r=this._parseDotRHS(n)]}:(this._advance(),{type:"ValueProjection",children:[t,r=this._parseProjectionRHS(n)]});case"Pipe":return{type:"Pipe",children:[t,r=this.expression(d.Pipe)]};case"Or":return{type:"OrExpression",children:[t,r=this.expression(d.Or)]};case"And":return{type:"AndExpression",children:[t,r=this.expression(d.And)]};case"Lparen":for(var i,s=t.name,o=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(i={type:"Current"},this._advance()):i=this.expression(0),"Comma"===this._lookahead(0)&&this._match("Comma"),o.push(i);return this._match("Rparen"),{type:"Function",name:s,children:o};case"Filter":var a=this.expression(0);return this._match("Rbracket"),{type:"FilterProjection",children:[t,r="Flatten"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(d.Filter),a]};case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[t]},this._parseProjectionRHS(d.Flatten)]};case"EQ":case"NE":case"GT":case"GTE":case"LT":case"LTE":return this._parseComparator(t,e);case"Lbracket":var c=this._lookaheadToken(0);return"Number"===c.type||"Colon"===c.type?(r=this._parseIndexExpression(),this._projectIfSlice(t,r)):(this._match("Star"),this._match("Rbracket"),{type:"Projection",children:[t,r=this._parseProjectionRHS(d.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),r=new Error("Expected "+e+", got: "+t.type);throw r.name="ParserError",r}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if("Colon"===this._lookahead(0)||"Colon"===this._lookahead(1))return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match("Rbracket"),e},_projectIfSlice:function(e,t){var r={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[r,this._parseProjectionRHS(d.Star)]}:r},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,r=this._lookahead(0);"Rbracket"!==r&&t<3;){if("Colon"===r)t++,this._advance();else{if("Number"!==r){var n=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+n.value+"("+n.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}r=this._lookahead(0)}return this._match("Rbracket"),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(d[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return["UnquotedIdentifier","QuotedIdentifier","Star"].indexOf(t)>=0?this.expression(e):"Lbracket"===t?(this._match("Lbracket"),this._parseMultiselectList()):"Lbrace"===t?(this._match("Lbrace"),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(d[this._lookahead(0)]<10)t={type:"Identity"};else if("Lbracket"===this._lookahead(0))t=this.expression(e);else if("Filter"===this._lookahead(0))t=this.expression(e);else{if("Dot"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Sytanx error, unexpected token: "+r.value+"("+r.type+")");throw n.name="ParserError",n}this._match("Dot"),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];"Rbracket"!==this._lookahead(0);){var t=this.expression(0);if(e.push(t),"Comma"===this._lookahead(0)&&(this._match("Comma"),"Rbracket"===this._lookahead(0)))throw new Error("Unexpected token Rbracket")}return this._match("Rbracket"),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,r,n=[],i=["UnquotedIdentifier","QuotedIdentifier"];;){if(e=this._lookaheadToken(0),i.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match("Colon"),r={type:"KeyValuePair",name:t,value:this.expression(0)},n.push(r),"Comma"===this._lookahead(0))this._match("Comma");else if("Rbrace"===this._lookahead(0)){this._match("Rbrace");break}}return{type:"MultiSelectHash",children:n}}},m.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,s){var o,a,c,u,l,h,f,d,p;switch(e.type){case"Field":return null===s?null:r(s)?void 0===(h=s[e.name])?null:h:null;case"Subexpression":for(c=this.visit(e.children[0],s),p=1;p<e.children.length;p++)if(null===(c=this.visit(e.children[1],c)))return null;return c;case"IndexExpression":return f=this.visit(e.children[0],s),this.visit(e.children[1],f);case"Index":if(!t(s))return null;var m=e.value;return m<0&&(m=s.length+m),void 0===(c=s[m])&&(c=null),c;case"Slice":if(!t(s))return null;var g=e.children.slice(0),y=this.computeSliceParams(s.length,g),v=y[0],b=y[1],_=y[2];if(c=[],_>0)for(p=v;p<b;p+=_)c.push(s[p]);else for(p=v;p>b;p+=_)c.push(s[p]);return c;case"Projection":var E=this.visit(e.children[0],s);if(!t(E))return null;for(d=[],p=0;p<E.length;p++)null!==(a=this.visit(e.children[1],E[p]))&&d.push(a);return d;case"ValueProjection":if(!r(E=this.visit(e.children[0],s)))return null;d=[];var w=function(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++)r.push(e[t[n]]);return r}(E);for(p=0;p<w.length;p++)null!==(a=this.visit(e.children[1],w[p]))&&d.push(a);return d;case"FilterProjection":if(!t(E=this.visit(e.children[0],s)))return null;var T=[],R=[];for(p=0;p<E.length;p++)i(o=this.visit(e.children[2],E[p]))||T.push(E[p]);for(var S=0;S<T.length;S++)null!==(a=this.visit(e.children[1],T[S]))&&R.push(a);return R;case"Comparator":switch(u=this.visit(e.children[0],s),l=this.visit(e.children[1],s),e.name){case"EQ":c=n(u,l);break;case"NE":c=!n(u,l);break;case"GT":c=u>l;break;case"GTE":c=u>=l;break;case"LT":c=u<l;break;case"LTE":c=u<=l;break;default:throw new Error("Unknown comparator: "+e.name)}return c;case"Flatten":var C=this.visit(e.children[0],s);if(!t(C))return null;var O=[];for(p=0;p<C.length;p++)t(a=C[p])?O.push.apply(O,a):O.push(a);return O;case"Identity":return s;case"MultiSelectList":if(null===s)return null;for(d=[],p=0;p<e.children.length;p++)d.push(this.visit(e.children[p],s));return d;case"MultiSelectHash":if(null===s)return null;var k;for(d={},p=0;p<e.children.length;p++)d[(k=e.children[p]).name]=this.visit(k.value,s);return d;case"OrExpression":return i(o=this.visit(e.children[0],s))&&(o=this.visit(e.children[1],s)),o;case"AndExpression":return!0===i(u=this.visit(e.children[0],s))?u:this.visit(e.children[1],s);case"NotExpression":return i(u=this.visit(e.children[0],s));case"Literal":return e.value;case"Pipe":return f=this.visit(e.children[0],s),this.visit(e.children[1],f);case"Current":return s;case"Function":var N=[];for(p=0;p<e.children.length;p++)N.push(this.visit(e.children[p],s));return this.runtime.callFunction(e.name,N);case"ExpressionReference":var A=e.children[0];return A.jmespathType="Expref",A;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var r=t[0],n=t[1],i=t[2],s=[null,null,null];if(null===i)i=1;else if(0===i){var o=new Error("Invalid slice, step cannot be 0");throw o.name="RuntimeError",o}var a=i<0;return r=null===r?a?e-1:0:this.capSliceRange(e,r,i),n=null===n?a?-1:e:this.capSliceRange(e,n,i),s[0]=r,s[1]=n,s[2]=i,s},capSliceRange:function(e,t,r){return t<0?(t+=e)<0&&(t=r<0?-1:0):t>=e&&(t=r<0?e-1:e),t}},g.prototype={callFunction:function(e,t){var r=this.functionTable[e];if(void 0===r)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,r._signature),r._func.call(this,t)},_validateArgs:function(e,t,r){var n,i,s,o;if(r[r.length-1].variadic){if(t.length<r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+r.length+n+" but received "+t.length)}else if(t.length!==r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+r.length+n+" but received "+t.length);for(var a=0;a<r.length;a++){o=!1,i=r[a].types,s=this._getTypeName(t[a]);for(var c=0;c<i.length;c++)if(this._typeMatches(s,i[c],t[a])){o=!0;break}if(!o)throw new Error("TypeError: "+e+"() expected argument "+(a+1)+" to be type "+i+" but received type "+s+" instead.")}},_typeMatches:function(e,t,r){if(1===t)return!0;if(9!==t&&8!==t&&3!==t)return e===t;if(3===t)return 3===e;if(3===e){var n;8===t?n=o:9===t&&(n=a);for(var i=0;i<r.length;i++)if(!this._typeMatches(this._getTypeName(r[i]),n,r[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return a;case"[object Number]":return o;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return"Expref"===e.jmespathType?6:4}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],r=e[1];return-1!==t.indexOf(r,t.length-r.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===a){for(var t=e[0],r="",n=t.length-1;n>=0;n--)r+=t[n];return r}var i=e[0].slice(0);return i.reverse(),i},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t/r.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return r(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],r=this._interpreter,n=e[0],i=e[1],s=0;s<i.length;s++)t.push(r.visit(n,i[s]));return t},_functionMerge:function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];for(var i in n)t[i]=n[i]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===o)return Math.max.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)r.localeCompare(t[n])<0&&(r=t[n]);return r}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===o)return Math.min.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)t[n].localeCompare(r)<0&&(r=t[n]);return r}return null},_functionSum:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case o:return"number";case a:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],r=Object.keys(t),n=[],i=0;i<r.length;i++)n.push(t[r[i]]);return n},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return 3===this._getTypeName(e[0])?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===a?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,r=this._getTypeName(e[0]);return r===o?e[0]:r!==a||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var r=this._interpreter,n=e[1],i=this._getTypeName(r.visit(n,t[0]));if([o,a].indexOf(i)<0)throw new Error("TypeError");for(var s=this,c=[],u=0;u<t.length;u++)c.push([u,t[u]]);c.sort((function(e,t){var o=r.visit(n,e[1]),a=r.visit(n,t[1]);if(s._getTypeName(o)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(o));if(s._getTypeName(a)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(a));return o>a?1:o<a?-1:e[0]-t[0]}));for(var l=0;l<c.length;l++)t[l]=c[l][1];return t},_functionMaxBy:function(e){for(var t,r,n=e[1],i=e[0],s=this.createKeyFunction(n,[o,a]),c=-1/0,u=0;u<i.length;u++)(r=s(i[u]))>c&&(c=r,t=i[u]);return t},_functionMinBy:function(e){for(var t,r,n=e[1],i=e[0],s=this.createKeyFunction(n,[o,a]),c=1/0,u=0;u<i.length;u++)(r=s(i[u]))<c&&(c=r,t=i[u]);return t},createKeyFunction:function(e,t){var r=this,n=this._interpreter;return function(i){var s=n.visit(e,i);if(t.indexOf(r._getTypeName(s))<0){var o="TypeError: expected one of "+t+", received "+r._getTypeName(s);throw new Error(o)}return s}}},e.tokenize=function(e){return(new f).tokenize(e)},e.compile=function(e){return(new p).parse(e)},e.search=function(e,t){var r=new p,n=new g,i=new m(n);n._interpreter=i;var s=r.parse(t);return i.search(s,e)},e.strictDeepEqual=n}(void 0===(ER={})?ER.jmespath={}:ER)}var RR,SR=!1;function CR(){return SR||(SR=!0,RR={},RR={DATE_FORMAT:"yyyy-mm-dd HH:MM:ss.l o",ERROR_LIKE_KEYS:["err","error"],MESSAGE_KEY:"msg",LEVEL_KEY:"level",TIMESTAMP_KEY:"time",LEVELS:{default:"USERLVL",60:"FATAL",50:"ERROR",40:"WARN ",30:"INFO ",20:"DEBUG",10:"TRACE"},LEVEL_NAMES:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},LOGGER_KEYS:["pid","hostname","name","level","time","timestamp","v","caller"]}),RR}var OR,kR,NR,AR,PR,IR,LR,MR,xR=!1;function DR(e,t){if(Number.isInteger(+e))return Object.prototype.hasOwnProperty.call(kR,e)?t[e](kR[e]):t.default(kR.default);const r=NR[e.toLowerCase()]||"default";return t[r](kR[r])}function qR(e){return DR(e,PR)}function jR(e){return DR(e,MR)}function FR(){return xR||(xR=!0,OR={},({LEVELS:kR,LEVEL_NAMES:NR}=CR()),PR={default:AR=e=>e,60:AR,50:AR,40:AR,30:AR,20:AR,10:AR,message:AR},IR=_R(),LR=new IR.Instance({level:3}),MR={default:LR.white,60:LR.bgRed,50:LR.red,40:LR.yellow,30:LR.green,20:LR.blue,10:LR.grey,message:LR.cyan},qR.message=PR.message,jR.message=MR.message,OR=function(e=!1){return e?jR:qR}),OR}var $R,BR=!1;function UR(){return BR||(BR=!0,function(e){var t,r,n,i=(t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,function(e,u,l,h){if(1!==arguments.length||"string"!==c(e)||/\d/.test(e)||(u=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var f=(u=String(i.masks[u]||u||i.masks.default)).slice(0,4);"UTC:"!==f&&"GMT:"!==f||(u=u.slice(4),l=!0,"GMT:"===f&&(h=!0));var d=l?"getUTC":"get",p=e[d+"Date"](),m=e[d+"Day"](),g=e[d+"Month"](),y=e[d+"FullYear"](),v=e[d+"Hours"](),b=e[d+"Minutes"](),_=e[d+"Seconds"](),E=e[d+"Milliseconds"](),w=l?0:e.getTimezoneOffset(),T=o(e),R=a(e),S={d:p,dd:s(p),ddd:i.i18n.dayNames[m],dddd:i.i18n.dayNames[m+7],m:g+1,mm:s(g+1),mmm:i.i18n.monthNames[g],mmmm:i.i18n.monthNames[g+12],yy:String(y).slice(2),yyyy:y,h:v%12||12,hh:s(v%12||12),H:v,HH:s(v),M:b,MM:s(b),s:_,ss:s(_),l:s(E,3),L:s(Math.round(E/10)),t:v<12?i.i18n.timeNames[0]:i.i18n.timeNames[1],tt:v<12?i.i18n.timeNames[2]:i.i18n.timeNames[3],T:v<12?i.i18n.timeNames[4]:i.i18n.timeNames[5],TT:v<12?i.i18n.timeNames[6]:i.i18n.timeNames[7],Z:h?"GMT":l?"UTC":(String(e).match(r)||[""]).pop().replace(n,""),o:(w>0?"-":"+")+s(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10],W:T,N:R};return u.replace(t,(function(e){return e in S?S[e]:e.slice(1,e.length-1)}))});function s(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function o(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-n);var i=(t-r)/6048e5;return 1+Math.floor(i)}function a(e){var t=e.getDay();return 0===t&&(t=7),t}function c(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}i.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},"function"==typeof define&&define.amd?define((function(){return i})):"object"==typeof $R?$R=i:e.dateFormat=i}($R={})),$R}var HR,WR,GR,VR,zR,QR,KR,JR,YR,XR,ZR=!1;function eS(e,t=!1){if(!1===t)return e;const r=new Date(e);if(!0===t)return WR(r,"UTC:"+zR);const n=t.toUpperCase();if("SYS:STANDARD"===n)return WR(r,zR);const i=n.substr(0,4);return WR(r,"SYS:"===i||"UTC:"===i?"UTC:"===i?t:t.slice(4):"UTC:"+t)}function tS(e){return"[object Object]"===Object.prototype.toString.apply(e)}function rS({input:e,ident:t="    ",eol:r="\n"}){const n=e.split(/\r?\n/);for(var i=1;i<n.length;i+=1)n[i]=t+n[i];return n.join(r)}function nS({log:e,messageKey:t=KR,ident:r="    ",eol:n="\n",errorLikeKeys:i=QR,errorProperties:s=[]}){let o=`${r}${rS({input:e.stack,ident:r,eol:n})}${n}`;if(s.length>0){const c=XR.concat(t,"type","stack");let u;u="*"===s[0]?Object.keys(e).filter(e=>!1===c.includes(e)):s.filter(e=>!1===c.includes(e));for(var a=0;a<u.length;a+=1){const t=u[a];if(t in e!=!1)if(tS(e[t])){o=`${o}${t}: {${n}${aS({input:e[t],errorLikeKeys:i,excludeLoggerKeys:!1,eol:n,ident:r})}}${n}`}else o=`${o}${t}: ${e[t]}${n}`}}return o}function iS({log:e,colorizer:t=VR,levelKey:r=JR}){if(r in e!=!1)return t(e[r])}function sS({log:e,messageFormat:t,messageKey:r=KR,colorizer:n=VR}){if(t){const r=String(t).replace(/{([^{}]+)}/g,(function(t,r){return r&&e[r]?e[r]:""}));return n.message(r)}if(r in e!=!1&&"string"==typeof e[r])return n.message(e[r])}function oS({log:e}){let t="";return(e.name||e.pid||e.hostname)&&(t+="(",e.name&&(t+=e.name),e.name&&e.pid?t+="/"+e.pid:e.pid&&(t+=e.pid),e.hostname&&(t+=`${"("===t?"on":" on"} ${e.hostname}`),t+=")"),e.caller&&(t+=`${""===t?"":" "}<${e.caller}>`),""===t?void 0:t}function aS({input:e,ident:t="    ",eol:r="\n",skipKeys:n=[],customPrettifiers:i={},errorLikeKeys:s=QR,excludeLoggerKeys:o=!0}){const a=Object.keys(e),c=[].concat(n);!0===o&&Array.prototype.push.apply(c,XR);let u="";const l=a.filter(e=>!1===c.includes(e));for(var h=0;h<a.length;h+=1){const n=l[h],o=e[n];if(void 0===o)continue;let a;if(a="function"==typeof i[n]?i[n](o,n,e):GR(o,null,2),void 0===a)continue;const c=rS({input:a,ident:t,eol:r});if(!0===s.includes(n)){const e=`${t}${n}: ${c}${r}`.split(r);for(var f=0;f<e.length;f+=1){0!==f&&(u+=r);const t=e[f];if(/^\s*"stack"/.test(t)){const e=/^(\s*"stack":)\s*(".*"),?$/.exec(t);if(e&&3===e.length){const n=/^\s*/.exec(t)[0].length+4,i=" ".repeat(n),s=e[2];u+=e[1]+r+i+JSON.parse(s).replace(/\n/g,r+i)}}else u+=t}}else u+=`${t}${n}: ${c}${r}`}return u}function cS({log:e,timestampKey:t=YR,translateFormat:r}){let n=null;if(t in e?n=e[t]:"timestamp"in e&&(n=e.timestamp),null!==n)return r?"["+eS(n,r)+"]":`[${n}]`}function uS(){return ZR||(ZR=!0,HR={},WR=UR(),GR=Jw(),VR=FR()(),({DATE_FORMAT:zR,ERROR_LIKE_KEYS:QR,MESSAGE_KEY:KR,LEVEL_KEY:JR,TIMESTAMP_KEY:YR,LOGGER_KEYS:XR}=CR()),(HR={isObject:tS,prettifyErrorLog:nS,prettifyLevel:iS,prettifyMessage:sS,prettifyMetadata:oS,prettifyObject:aS,prettifyTime:cS}).internals={formatTime:eS,joinLinesWithIndentation:rS}),HR}var lS,hS,fS,dS,pS,mS=!1;function gS(){return mS||(mS=!0,hS={suspectRx:/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/},(lS={}).parse=fS=function(e,...t){const r="object"==typeof t[0]&&t[0],n=t.length>1||!r?t[0]:void 0,i=t.length>1&&t[1]||r||{},s=JSON.parse(e,n);return"ignore"===i.protoAction?s:s&&"object"==typeof s&&e.match(hS.suspectRx)?(dS(s,i),s):s},dS=function(e,t={}){let r=[e];for(;r.length;){const e=r;r=[];for(const n of e){if(Object.prototype.hasOwnProperty.call(n,"__proto__")){if("remove"!==t.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete n.__proto__}for(const e in n){const t=n[e];t&&"object"==typeof t&&r.push(n[e])}}}},lS.scan=dS,pS=function(e,t){try{return fS(e,t)}catch(e){return null}},lS.safeParse=pS),lS}var yS,vS,bS,_S,ES,wS,TS,RS,SS,CS,OS,kS,NS,AS,PS,IS,LS,MS=!1;function xS(){yS={},vS=_R(),wR||(wR=!0,TR()),bS=ER,_S=FR(),({ERROR_LIKE_KEYS:ES,MESSAGE_KEY:wS,TIMESTAMP_KEY:TS}=CR()),({isObject:RS,prettifyErrorLog:SS,prettifyLevel:CS,prettifyMessage:OS,prettifyMetadata:kS,prettifyObject:NS,prettifyTime:AS}=uS()),PS=gS(),IS=e=>{try{return{value:PS.parse(e,{protoAction:"remove"})}}catch(e){return{err:e}}},LS={colorize:vS.supportsColor,crlf:!1,errorLikeObjectKeys:ES,errorProps:"",levelFirst:!1,messageKey:wS,messageFormat:!1,timestampKey:TS,translateTime:!1,useMetadata:!1,outputStream:process.stdout,customPrettifiers:{}},yS=function(e){const t=Object.assign({},LS,e),r=t.crlf?"\r\n":"\n",n=t.messageKey,i=t.levelKey,s=t.messageFormat,o=t.timestampKey,a=t.errorLikeObjectKeys,c=t.errorProps.split(","),u=t.customPrettifiers,l=t.ignore?new Set(t.ignore.split(",")):void 0,h=_S(t.colorize),f=t.search;return function(e){let d;if(RS(e))d=e;else{const t=IS(e);if(t.err||!RS(t.value))return e+r;d=t.value}if(f&&!bS.search(d,f))return;const p=OS({log:d,messageKey:n,colorizer:h,messageFormat:s});l&&(d=Object.keys(d).filter(e=>!l.has(e)).reduce((e,t)=>(e[t]=d[t],e),{}));const m=CS({log:d,colorizer:h,levelKey:i}),g=kS({log:d}),y=AS({log:d,translateFormat:t.translateTime,timestampKey:o});let v="";t.levelFirst&&m&&(v=""+m);y&&""===v?v=""+y:y&&(v=`${v} ${y}`);!t.levelFirst&&m&&(v=v.length>0?`${v} ${m}`:m);g&&(v=`${v} ${g}:`);!1===v.endsWith(":")&&""!==v&&(v+=":");p&&(v=`${v} ${p}`);v.length>0&&(v+=r);if("Error"===d.type&&d.stack){const e=SS({log:d,errorLikeKeys:a,errorProperties:c,ident:"    ",eol:r});v+=e}else{const e=[n,i,o].filter(e=>"string"==typeof d[e]||"number"==typeof d[e]),t=NS({input:d,skipKeys:e,customPrettifiers:u,errorLikeKeys:a,eol:r,ident:"    "});v+=t}return v}}}var DS,qS,jS,FS,$S,BS,US,HS,WS,GS,VS,zS,QS,KS,JS,YS,XS,ZS,eC,tC,rC,nC,iC=!1;function sC(){}function oC(e,t){return t?function(...e){t.call(this,e,r)}:r;function r(t,...r){if("object"==typeof t){var n,i=t;null!==t&&(t.method&&t.headers&&t.socket?t=jS(t):"function"==typeof t.setHeader&&(t=FS(t))),this[tC]&&(t={[this[tC]]:t}),null===i&&0===r.length?n=[null]:(i=r.shift(),n=r),this[GS](t,qS(i,n,this[zS]),e)}else this[GS](null,qS(t,r,this[zS]),e)}}function aC(e){var t="",r=0,n=!1,i=255;const s=e.length;if(s>100)return JSON.stringify(e);for(var o=0;o<s&&i>=32;o++)34!==(i=e.charCodeAt(o))&&92!==i||(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function cC(e,t,r,n){const i=this[JS],s=this[KS],o=this[QS],a=this[HS],c=this[VS],u=this[rC],l=this[nC];var h,f=this[US][r]+n;f+=a;var d=void 0===e.hasOwnProperty;u.log&&(e=u.log(e)),void 0!==t&&(e[l]=t);const p=s[YS];for(var m in e)if(h=e[m],(d||e.hasOwnProperty(m))&&void 0!==h){h=c[m]?c[m](h):h;const e=s[m]||p;switch(typeof h){case"undefined":case"function":continue;case"number":!1===Number.isFinite(h)&&(h=null);case"boolean":e&&(h=e(h));break;case"string":h=(e||aC)(h);break;default:h=(e||i)(h)}if(void 0===h)continue;f+=',"'+m+'":'+h}return f+o}function uC(e,t){var r,n,i=e[HS];const s=e[JS],o=e[KS],a=o[YS],c=e[VS],u=e[rC].bindings;for(r in t=u(t)){n=t[r];if(!0===("level"!==r&&"serializers"!==r&&"formatters"!==r&&"customLevels"!==r&&t.hasOwnProperty(r)&&void 0!==n)){if(n=c[r]?c[r](n):n,void 0===(n=(o[r]||a||s)(n)))continue;i+=',"'+r+'":'+n}}return i}function lC(e,t,r,n){if(t&&"function"==typeof t)return hC((t=t.bind(n))(e),r,e);try{var i=(MS||(MS=!0,xS()),yS);return i.asMetaWrapper=hC,hC(i(e),r,e)}catch(e){throw Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately")}}function hC(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);var n=!1;return{[XS]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||n||(n=!0,yC(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){const e=this.lastLogger;var t=null;return e?(e.hasOwnProperty(WS)?t=e[WS]:(t=JSON.parse("{"+e[HS].substr(1)+"}"),e[WS]=t),t):null},write(r){const n=this.lastLogger,i=this.chindings();var s=this.lastTime;s.match(/^\d+/)&&(s=parseInt(s));var o=this.lastObj,a=this.lastMsg;const c=n[rC],u=c.log?c.log(o):o,l=n[nC];a&&u&&!u.hasOwnProperty(l)&&(u[l]=a);const h=Object.assign({level:this.lastLevel,time:s},u,null),f=n[VS],d=Object.keys(f);for(var p,m=0;m<d.length;m++)void 0!==h[p=d[m]]&&(h[p]=f[p](h[p]));for(p in i)h.hasOwnProperty(p)||(h[p]=i[p]);const g=n[KS][ZS],y=e("function"==typeof g?g(h):h);void 0!==y&&(yC(t,this),t.write(y))}}}function fC(e){const t=new $S(e);return t.on("error",(function e(r){if("EPIPE"===r.code)return t.write=sC,t.end=sC,t.flushSync=sC,void(t.destroy=sC);t.removeListener("error",e),t.emit("error",r)})),t}function dC(e){return function(t,r={},n){if("string"==typeof r?(n=fC({dest:r,sync:!0}),r={}):"string"==typeof n?n=fC({dest:n,sync:!0}):(r instanceof $S||r.writable||r._writableState)&&(n=r,r=null),"extreme"in(r=Object.assign({},e,r)))throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in r)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in r&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),r.levelKey=r.changeLevelName,delete r.changeLevelName);const{enabled:i,prettyPrint:s,prettifier:o,messageKey:a}=r;if(!1===i&&(r.level="silent"),(n=n||process.stdout)===process.stdout&&n.fd>=0&&!function(e){return e.write!==e.constructor.prototype.write}(n)&&(n=fC({fd:n.fd,sync:!0})),s){n=lC(Object.assign({messageKey:a},s),o,n,t)}return{opts:r,stream:n}}}function pC(e,t){if(void 0===e||"function"!=typeof e.child)throw Error("expected a pino logger instance");const r=void 0!==t;if(r&&"function"!=typeof t)throw Error("if supplied, the handler parameter should be a function");const n=e[eC];if("function"!=typeof n.flushSync)throw Error("final requires a stream that has a flushSync method, such as pino.destination");const i=new Proxy(e,{get:(e,t)=>t in e.levels.values?(...r)=>{e[t](...r),n.flushSync()}:e[t]});return r?(e=null,...r)=>{try{n.flushSync()}catch(e){}return t(e,i,...r)}:i}function mC(e){try{return JSON.stringify(e)}catch(t){return BS(e)}}function gC(e,t,r){return{level:e,bindings:t,log:r}}function yC(e,t){!0===e[XS]&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}function vC(){return iC||(iC=!0,DS={},qS=Bw(),({mapHttpRequest:jS,mapHttpResponse:FS}=R_()),$S=Dw(),BS=Jw(),({lsCacheSym:US,chindingsSym:HS,parsedChindingsSym:WS,writeSym:GS,serializersSym:VS,formatOptsSym:zS,endSym:QS,stringifiersSym:KS,stringifySym:JS,wildcardFirstSym:YS,needsMetadataGsym:XS,redactFmtSym:ZS,streamSym:eC,nestedKeySym:tC,formattersSym:rC,messageKeySym:nC}=XE()),DS={noop:sC,buildSafeSonicBoom:fC,getPrettyStream:lC,asChindings:uC,asJson:cC,genLog:oC,createArgsNormalizer:dC,final:pC,stringify:mC,buildFormatters:gC}),DS}var bC,_C,EC,wC,TC,RC,SC,CC,OC,kC,NC,AC,PC,IC,LC=!1;function MC(e){const t=e[SC].level,{labels:r}=e.levels,n={};for(const e in r){const i=t(r[e],Number(e));n[e]=JSON.stringify(i).slice(0,-1)}return e[EC]=n,e}function xC(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function DC(e){const{labels:t,values:r}=this.levels;if("number"==typeof e){if(void 0===t[e])throw Error("unknown level value"+e);e=t[e]}if(void 0===r[e])throw Error("unknown level "+e);const n=this[wC],i=this[wC]=r[e],s=this[TC],o=this[CC].logMethod;for(var a in r)i>r[a]?this[a]=OC:this[a]=xC(a,s)?AC[a](o):kC(r[a],o);this.emit("level-change",e,i,t[n],n)}function qC(e){const{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function jC(e){const{values:t}=this.levels,r=t[e];return void 0!==r&&r>=this[wC]}function FC(e=null,t=!1){const r=e?Object.keys(e).reduce((t,r)=>(t[e[r]]=r,t),{}):null;return{labels:Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:PC,r),values:Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:NC,e)}}function $C(e,t,r){if("number"==typeof e){if(![].concat(Object.keys(t||{}).map(e=>t[e]),r?[]:Object.keys(PC).map(e=>+e),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}if(!(e in Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:NC,t)))throw Error(`default level:${e} must be included in custom levels`)}function BC(e,t){const{labels:r,values:n}=e;for(const e in t){if(e in n)throw Error("levels cannot be overridden");if(t[e]in r)throw Error("pre-existing level values cannot be used for new levels")}}function UC(){return LC||(LC=!0,bC={},_C=yw(),({lsCacheSym:EC,levelValSym:wC,useOnlyCustomLevelsSym:TC,streamSym:RC,formattersSym:SC,hooksSym:CC}=XE()),({noop:OC,genLog:kC}=vC()),NC={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},AC={fatal:e=>{const t=kC(NC.fatal,e);return function(...e){const r=this[RC];if(t.call(this,...e),"function"==typeof r.flushSync)try{r.flushSync()}catch(e){}}},error:e=>kC(NC.error,e),warn:e=>kC(NC.warn,e),info:e=>kC(NC.info,e),debug:e=>kC(NC.debug,e),trace:e=>kC(NC.trace,e)},PC=Object.keys(NC).reduce((e,t)=>(e[NC[t]]=t,e),{}),IC=Object.keys(PC).reduce((e,t)=>(e[t]=_C('{"level":'+Number(t)),e),{}),bC={initialLsCache:IC,genLsCache:MC,levelMethods:AC,getLevel:qC,setLevel:DC,isLevelEnabled:jC,mappings:FC,assertNoLevelCollisions:BC,assertDefaultLevelFound:$C}),bC}var HC,WC=!1;function GC(){return WC||(WC=!0,HC={},HC=JSON.parse('{"name":"pino","version":"6.5.0","description":"super fast, all natural json logger","main":"pino.js","browser":"./browser.js","files":["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],"scripts":{"docs":"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js","test":"standard | snazzy && tap --100 test/*test.js","cov-ui":"tap --coverage-report=html test/*test.js","bench":"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},"bin":{"pino":"./bin.js"},"precommit":"test","repository":{"type":"git","url":"git+https://github.com/pinojs/pino.git"},"keywords":["fast","logger","stream","json"],"author":"Matteo Collina <hello@matteocollina.com>","contributors":["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],"license":"MIT","bugs":{"url":"https://github.com/pinojs/pino/issues"},"homepage":"http://getpino.io","devDependencies":{"airtap":"2.0.2","benchmark":"^2.1.4","bole":"^3.0.2","bunyan":"^1.8.12","docsify-cli":"^4.4.0","execa":"^1.0.0","fastbench":"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1","log":"^5.0.0","loglevel":"^1.6.7","pino-pretty":"^4.0.0","pre-commit":"^1.2.2","proxyquire":"^2.1.3","pump":"^3.0.0","semver":"^6.3.0","snazzy":"^8.0.0","split2":"^3.1.1","standard":"^14.3.3","steed":"^1.1.3","strip-ansi":"^6.0.0","tap":"^14.10.7","tape":"^4.13.2","through2":"^3.0.1","winston":"^3.2.1"},"dependencies":{"fast-redact":"^2.0.0","fast-safe-stringify":"^2.0.7","flatstr":"^1.0.12","pino-std-serializers":"^2.4.2","quick-format-unescaped":"^4.0.1","sonic-boom":"^1.0.0"}}')),HC}var VC,zC,QC=!1;function KC(){return QC||(QC=!0,VC={},({version:zC}=GC()),VC={version:zC}),VC}var JC,YC,XC,ZC,eO,tO,rO,nO,iO,sO,oO,aO,cO,uO,lO,hO,fO,dO,pO,mO,gO,yO,vO,bO,_O,EO,wO,TO,RO,SO,CO,OO,kO=!1;function NO(e){if(!e)throw Error("missing bindings for child Pino");const t=this[hO],r=this[fO],n=Object.create(this);if(!0===e.hasOwnProperty("serializers")){for(var i in n[hO]=Object.create(null),t)n[hO][i]=t[i];const r=Object.getOwnPropertySymbols(t);for(var s=0;s<r.length;s++){const e=r[s];n[hO][e]=t[e]}for(var o in e.serializers)n[hO][o]=e.serializers[o];const c=Object.getOwnPropertySymbols(e.serializers);for(var a=0;a<c.length;a++){const t=c[a];n[hO][t]=e.serializers[t]}}else n[hO]=t;if(e.hasOwnProperty("formatters")){const{level:t,bindings:i,log:s}=e.formatters;n[fO]=RO(t||r.level,i||OO,s||r.log)}else n[fO]=RO(r.level,OO,r.log);!0===e.hasOwnProperty("customLevels")&&(EO(this.levels,e.customLevels),n.levels=vO(e.customLevels,n[dO]),_O(n)),n[iO]=wO(n,e);const c=e.level||this.level;return n[rO](c),n}function AO(){var e=`{${this[iO].substr(1)}}`,t=JSON.parse(e);return delete t.pid,delete t.hostname,t}function PO(e){const t=wO(this,e);this[iO]=t}function IO(e,t,r){const n=this[cO](),i=this[sO],s=e instanceof Error;var o;null==e?o=i?i():{}:(o=Object.assign(i?i():{},e),!t&&s&&(t=e.message),s&&(o.stack=e.stack,o.type||(o.type="Error")));const a=this[oO](o,t,r,n),c=this[lO];!0===c[pO]&&(c.lastLevel=r,c.lastObj=o,c.lastMsg=t,c.lastTime=n.slice(this[uO]),c.lastLogger=this),c instanceof XC?c.write(a):c.write(ZC(a))}function LO(){const e=this[lO];"flush"in e&&e.flush()}function MO(){return kO||(kO=!0,JC={},({EventEmitter:YC}=w),XC=Dw(),ZC=yw(),({lsCacheSym:eO,levelValSym:tO,setLevelSym:rO,getLevelSym:nO,chindingsSym:iO,mixinSym:sO,asJsonSym:oO,writeSym:aO,timeSym:cO,timeSliceIndexSym:uO,streamSym:lO,serializersSym:hO,formattersSym:fO,useOnlyCustomLevelsSym:dO,needsMetadataGsym:pO}=XE()),({getLevel:mO,setLevel:gO,isLevelEnabled:yO,mappings:vO,initialLsCache:bO,genLsCache:_O,assertNoLevelCollisions:EO}=UC()),({asChindings:wO,asJson:TO,buildFormatters:RO}=vC()),({version:SO}=KC()),CO={constructor:class{},child:NO,bindings:AO,setBindings:PO,flush:LO,isLevelEnabled:yO,version:SO,get level(){return this[nO]()},set level(e){this[rO](e)},get levelVal(){return this[tO]},set levelVal(e){throw Error("levelVal is read-only")},[eO]:bO,[aO]:IO,[oO]:TO,[nO]:mO,[rO]:gO},Object.setPrototypeOf(CO,YC.prototype),JC=function(){return Object.create(CO)},OO=e=>e),JC}var xO,DO,qO,jO,FO,$O,BO,UO,HO,WO,GO,VO,zO,QO,KO,JO,YO,XO,ZO,ek,tk,rk,nk,ik,sk,ok,ak,ck,uk,lk,hk,fk,dk,pk,mk,gk,yk,vk,bk,_k,Ek,wk,Tk,Rk=!1;function Sk(...e){const t={},{opts:r,stream:n}=wk(t,...e),{redact:i,crlf:s,serializers:o,timestamp:a,messageKey:c,nestedKey:u,base:l,name:h,level:f,customLevels:d,useLevelLabels:p,changeLevelName:m,levelKey:g,mixin:y,useOnlyCustomLevels:v,formatters:b,hooks:_}=r,E=JO(b.level,b.bindings,b.log);!p||m||g?!m&&!g||p?(m||g)&&p&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),E.level=function(e){return function(t,r){return{[e]:t}}}(m||g)):(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),E.level=function(e){return function(t,r){return{[e]:r}}}(m||g)):(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),E.level=Ck),o[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),E.log=o[Symbol.for("pino.*")]),E.bindings||(E.bindings=Ek.formatters.bindings),E.level||(E.level=Ek.formatters.level);const w=i?jO(i,QO):{},T=i?{stringify:w[ek]}:{stringify:QO},R="}"+(s?"\r\n":"\n"),S=VO.bind(null,{[ZO]:"",[tk]:o,[ok]:w,[sk]:QO,[pk]:E}),C=null===l?"":S(void 0===h?l:Object.assign({},l,{name:h})),O=a instanceof Function?a:a?gk:yk,k=O().indexOf(":")+1;if(v&&!d)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&"function"!=typeof y)throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);UO(f,d,v);const N=HO(d,v);return Object.assign(t,{levels:N,[dk]:v,[ik]:n,[rk]:O,[nk]:k,[sk]:QO,[ok]:w,[ck]:R,[uk]:T,[lk]:c,[hk]:u,[tk]:o,[fk]:y,[ZO]:C,[pk]:E,[mk]:_,silent:YO}),Object.setPrototypeOf(t,$O()),WO(t),t[ak](f),t}function Ck(e,t){return{level:e}}function Ok(){return Rk||(Rk=!0,xO={},DO=i,qO=R_(),jO=lw(),FO=dw(),$O=MO(),BO=XE(),({assertDefaultLevelFound:UO,mappings:HO,genLsCache:WO}=UC()),({createArgsNormalizer:GO,asChindings:VO,final:zO,stringify:QO,buildSafeSonicBoom:KO,buildFormatters:JO,noop:YO}=vC()),({version:XO}=KC()),({chindingsSym:ZO,redactFmtSym:ek,serializersSym:tk,timeSym:rk,timeSliceIndexSym:nk,streamSym:ik,stringifySym:sk,stringifiersSym:ok,setLevelSym:ak,endSym:ck,formatOptsSym:uk,messageKeySym:lk,nestedKeySym:hk,mixinSym:fk,useOnlyCustomLevelsSym:dk,formattersSym:pk,hooksSym:mk}=BO),({epochTime:gk,nullTime:yk}=FO),({pid:vk}=process),bk=DO.hostname(),_k=qO.err,Ek={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:vk,hostname:bk},serializers:Object.assign(Object.create(null),{err:_k}),formatters:Object.assign(Object.create(null),{bindings:e=>e,level:(e,t)=>({level:t})}),hooks:{logMethod:void 0},timestamp:gk,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},wk=GO(Ek),Tk=Object.assign(Object.create(null),qO),Sk.extreme=(e=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),KO({dest:e,minLength:4096,sync:!1})),Sk.destination=(e=process.stdout.fd)=>"object"==typeof e?(e.dest=e.dest||process.stdout.fd,KO(e)):KO({dest:e,minLength:0,sync:!0}),Sk.final=zO,Sk.levels=HO(),Sk.stdSerializers=Tk,Sk.stdTimeFunctions=Object.assign({},FO),Sk.symbols=BO,Sk.version=XO,xO=Sk),xO}var kk,Nk=!1,Ak=T(xO);function Pk(e={},t){const r=Ak({name:process.env.PRODUCT||"UNINDENTIFIED",base:{},level:"development"===process.env.NODE_ENV?"debug":"info",formatters:{level:e=>({level:e})},prettyPrint:!0,...e},t);return r.show=()=>{},r}function Ik(){return Nk||(Nk=!0,R(kk={}),Ok(),kk.default=Pk),kk}var Lk,Mk,xk=!1;function Dk(){if(Mk)return Mk;const{Writable:t}=y,{window:r}=e,n=Ik().default,i=r.createOutputChannel(process.env.DISPLAY_NAME||"SQLTools"),s=new t({write:(e,t,r)=>{i.append(e.toString(e.encoding||"utf8")),r()},writev:(e,t)=>{e.forEach(e=>i.append(e.chunk.toString(e.encoding||"utf8"))),t()}});return(Mk=n({},s)).clear=i.clear.bind(i),Mk.outputChannel=i,Mk.show=()=>i.show(),Mk}var qk,jk,Fk=!1;function $k(){return Fk||(Fk=!0,R(qk={}),Ik(),jk=Pk(),qk.default=jk),qk}let Bk;if(process.env.PRODUCT&&"ext"!==process.env.PRODUCT||!(()=>{try{return require.resolve("vscode"),!0}catch(e){return!1}})())Bk=$k().default;else try{Bk=(xk||(xk=!0,R(Lk={}),Lk.default=Dk),Lk).default()}catch(e){Bk=$k().default}function Uk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Hk{getId(){return this.credentials.id}constructor(e,t){Uk(this,"deps",[]),Uk(this,"queryResults",async(e,t)=>{const r=await this.singleQuery(e,t);if(r.error)throw r.rawError;return r.results}),Uk(this,"requireDep",e=>(e=>require(Yb(e)))(e)),Uk(this,"resolveDep",e=>Yb(e)),this.credentials=e,this.getWorkspaceFolders=t,this.log=function(e,t={}){return e?Bk.child({...t,ns:e}):Bk}(e.driver.toLowerCase())}singleQuery(e,t){return this.query(e,t).then(([e])=>e)}async describeTable(e,t){const r=await this.singleQuery(this.queries.describeTable(e),t);return r.baseQuery=this.queries.describeTable.raw,[r]}async showRecords(e,t){const{limit:r,page:n=0}=t,i={...t,limit:r,table:e,offset:n*r};if("function"==typeof this.queries.fetchRecords&&"function"==typeof this.queries.countRecords){const[s,o]=await Promise.all([this.singleQuery(this.queries.fetchRecords(i),t),this.singleQuery(this.queries.countRecords(i),t)]);return s.baseQuery=this.queries.fetchRecords.raw,s.pageSize=r,s.page=n,s.total=Number(o.results[0].total),s.queryType="showRecords",s.queryParams=e,[s]}return this.query(this.queries.fetchRecords(i),t)}async checkDependencies(){if(this.deps&&0!==this.deps.length){if(1!==Number(process.env.IS_NODE_RUNTIME||"0"))throw new Cy;this.deps.forEach(e=>{let t=!1;switch(e.type){case Hk.CONSTANTS.DEPENDENCY_PACKAGE:try{const{version:r}=JSON.parse(f.readFileSync(this.resolveDep(e.name+"/package.json")).toString());if(e.version&&r!==e.version)throw t=!0,new Error("Version not matching. We need to upgrade "+e.name);this.requireDep(e.name)}catch(e){throw new Oy(this.deps,this.credentials,t)}}})}}getChildrenForItem(e){return this.log.error(`###### Attention ######getChildrenForItem not implemented for ${this.credentials.driver}\n####################`),Promise.resolve([])}searchItems(e,t,r){return this.log.error(`###### Attention ######searchItems not implemented for ${this.credentials.driver}\n####################`),Promise.resolve([])}async toAbsolutePath(e){if(!m.isAbsolute(e)&&/\$\{workspaceFolder:(.+)}/g.test(e)){const t=e.match(/\$\{workspaceFolder:(.+)}/)[1];if(t){const r=(await this.getWorkspaceFolders()).find(e=>e.name===t);e=m.resolve(r.uri.replace(/^(\w+):\/\//,""),e.replace(/\$\{workspaceFolder:(.+)}/g,"./"))}}return e}prepareMessage(e){return{message:e.toString(),date:new Date}}}Uk(Hk,"CONSTANTS",{DEPENDENCY_PACKAGE:"package",DEPENDENCY_NPM_SCRIPT:"npmscript"});var Wk,Gk,Vk,zk,Qk,Kk={},Jk={},Yk={},Xk={},Zk={},eN={};Qk="object"==typeof C&&C&&C.Object===Object&&C;var tN="object"==typeof self&&self&&self.Object===Object&&self;Vk=(zk=Qk||tN||Function("return this")()).Symbol;var rN={},nN=Object.prototype,iN=nN.hasOwnProperty,sN=nN.toString,oN=Vk?Vk.toStringTag:void 0;rN=function(e){var t=iN.call(e,oN),r=e[oN];try{e[oN]=void 0;var n=!0}catch(e){}var i=sN.call(e);return n&&(t?e[oN]=r:delete e[oN]),i};var aN={},cN=Object.prototype.toString;aN=function(e){return cN.call(e)};var uN=Vk?Vk.toStringTag:void 0;eN=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":uN&&uN in Object(e)?rN(e):aN(e)};var lN={};lN=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};Zk=function(e){if(!lN(e))return!1;var t=eN(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var hN,fN,dN={},pN=zk["__core-js_shared__"],mN=(fN=/[^.]+$/.exec((hN=pN)&&hN.keys&&hN.keys.IE_PROTO||""))?"Symbol(src)_1."+fN:"";dN=function(e){return!!mN&&mN in e};var gN={},yN=Function.prototype.toString;gN=function(e){if(null!=e){try{return yN.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var vN=/^\[object .+?Constructor\]$/,bN=Function.prototype,_N=Object.prototype,EN=bN.toString,wN=_N.hasOwnProperty,TN=RegExp("^"+EN.call(wN).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Xk=function(e){return!(!lN(e)||dN(e))&&(Zk(e)?TN:vN).test(gN(e))};var RN={};RN=function(e,t){return null==e?void 0:e[t]},Yk=function(e,t){var r=RN(e,t);return Xk(r)?r:void 0};var SN=function(){try{var e=Yk(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();Jk=SN,Kk=function(e,t,r){"__proto__"==t&&Jk?Jk(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var CN={};CN=function(e,t){return e===t||e!=e&&t!=t};var ON=Object.prototype.hasOwnProperty;Gk=function(e,t,r){var n=e[t];ON.call(e,t)&&CN(n,r)&&(void 0!==r||t in e)||Kk(e,t,r)};var kN={};kN=function(e,t,r){for(var n=-1,i=e.length,s=t.length,o={};++n<i;){var a=n<s?t[n]:void 0;r(o,e[n],a)}return o},Wk=function(e,t){return kN(e||[],t||[],Gk)};RegExp(/[\\^$.*+?()[\]{}|]/g.source);let NN;var AN;(AN=NN||(NN={})).WHITESPACE="whitespace",AN.WORD="word",AN.STRING="string",AN.RESERVED="reserved",AN.RESERVED_TOP_LEVEL="reserved-top-level",AN.RESERVED_TOP_LEVEL_NO_INDENT="reserved-top-level-no-indent",AN.RESERVED_NEWLINE="reserved-newline",AN.OPERATOR="operator",AN.NO_SPACE_OPERATOR="no-space-operator",AN.OPEN_PAREN="open-paren",AN.CLOSE_PAREN="close-paren",AN.LINE_COMMENT="line-comment",AN.BLOCK_COMMENT="block-comment",AN.NUMBER="number",AN.PLACEHOLDER="placeholder",AN.SERVERVARIABLE="servervariable";class PN{static parse(e,t="mysql"){"mssql"===t&&(e=e.replace(/^[ \t]*GO;?[ \t]*$/gim,""));for(var r=[];;){null==s&&(s=e);var n=PN.getStatements(s,t,";"),i=n[0];null!=i&&""!=i.trim()&&r.push(i);var s=n[1];if(null==s||""==s.trim())break}return r}static getStatements(e,t,r){for(var n=Array.from(e),i=null,s=null,o=!1,a=null,c=!1,u=null,l=!1,h=null,f=[],d=0;d<n.length;d++){var p=n[d];if(d>0&&(i=n[d-1]),d<n.length&&(s=n[d+1]),"\\"==i||"'"!=p&&'"'!=p||0!=c||0!=o)if(("#"==p&&" "==s||"-"==p&&"-"==s||"/"==p&&"*"==s)&&0==c)o=!0,a=p;else if(1!=o||("#"!=a&&"-"!=a||"\n"!=p)&&("/"!=a||"*"!=p||"/"!=s))if("\\"==i||p!=u||1!=c){if("d"==p.toLowerCase()&&0==o&&0==c){var m=PN.getDelimiter(d,e,t);if(null!=m){var g=m[0],y=m[1];e=e.substring(y),f=PN.getStatements(e,t,g);break}}if("$"==p&&0==o&&0==c){var v,b=e.substring(d);if(0==l)null!=(v=PN.getTag(b,t))&&(l=!0,h=v[0]);else if(null!=(v=PN.getTag(b,t)))v[0]==h&&(l=!1)}if("mssql"===t&&"g"===p.toLowerCase()&&"o"===(""+(n[d+1]||"")).toLowerCase()&&void 0!==n[d+2]&&/go\b/gi.test(`${p}${n[d+1]}${n[d+2]}`)&&(p=`${p}${n[d+1]}`),(p.toLowerCase()===r.toLowerCase()||"go"===p.toLowerCase())&&0==c&&0==o&&0==l){var _=d+1;if("mssql"===t&&"go"===p.toLowerCase()){_=d,f=PN.getQueryParts(e,_,2);break}f=PN.getQueryParts(e,_,0);break}}else c=!1,u=null;else o=!1,a=null;else c=!0,u=p}return 0==f.length&&(null!=e&&(e=e.trim()),f.push(e,null)),f}static getQueryParts(e,t,r=1){var n=e.substring(0,t),i=e.substring(t+r),s=[];return null!=n&&(n=n.trim()),s.push(n),s.push(i),s}static getDelimiter(e,t,r){if("mysql"==r){var n="delimiter ".length,i=t.substring(e);if(0==i.toLowerCase().indexOf("delimiter ")){var s=t.substring(e),o=s.indexOf("\n");-1==o&&(o=t.length);var a=(s=(s=s.substring(0,o)).substring(n)).trim();if(null!=(a=PN.clearTextUntilComment(a))){a=a.trim();var c=i.indexOf(a)+e+a.length,u=[];return u.push(a),u.push(c),u}return null}return null}}static getTag(e,t){if("pg"==t){var r=e.match(/^(\$[a-zA-Z]*\$)/i);if(null!=r&&r.length>1){var n=[],i=r[1].trim(),s=e.indexOf(i);return n.push(i),n.push(s),n}return null}}static isGoDelimiter(e,t,r){if("mssql"==e){var n=/(?:\bgo\b\s*)/i.exec(t);return null!=n&&n.index==r}}static clearTextUntilComment(e){for(var t=null,r=Array.from(e),n=null,i=0;i<r.length;i++){var s=r[i];if(i<r.length&&(t=r[i+1]),"#"==s&&" "==t||"-"==s&&"-"==t||"/"==s&&"*"==t)break;null==n&&(n=""),n+=s}return n}}var IN=PN.parse;const LN=new Uint8Array(16);function MN(){return _.randomFillSync(LN)}var xN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const DN=[];for(let e=0;e<256;++e)DN.push((e+256).toString(16).substr(1));function qN(e,t=0){const r=(DN[e[t+0]]+DN[e[t+1]]+DN[e[t+2]]+DN[e[t+3]]+"-"+DN[e[t+4]]+DN[e[t+5]]+"-"+DN[e[t+6]]+DN[e[t+7]]+"-"+DN[e[t+8]]+DN[e[t+9]]+"-"+DN[e[t+10]]+DN[e[t+11]]+DN[e[t+12]]+DN[e[t+13]]+DN[e[t+14]]+DN[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&xN.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}function jN(e,t,r){const n=(e=e||{}).random||(e.rng||MN)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return qN(n)}function FN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $N=e=>e;Zs.types.setTypeParser(Zs.types.builtins.TIMESTAMP||1114,$N),Zs.types.setTypeParser(Zs.types.builtins.TIMESTAMPTZ||1184,$N),Zs.types.setTypeParser(Zs.types.builtins.DATE||1082,$N);var BN=T(Wk);class UN extends Hk{constructor(...e){super(...e),FN(this,"queries",Po),FN(this,"query",(e,t={})=>{const r=[];let n;const{requestId:i}=t;return this.open().then(async t=>{n=await t.connect(),n.on("notice",e=>r.push(this.prepareMessage(`${e.name.toUpperCase()}: ${e.message}`)));const i=await n.query({text:e.toString(),rowMode:"array"});return n.release(),i}).then(t=>{const n=function(e,t="mysql"){return IN(e,t)}(e.toString(),"pg");return Array.isArray(t)||(t=[t]),t.map((e,t)=>{const s=this.getColumnNames(e.fields||[]);return{requestId:i,resultId:jN(),connId:this.getId(),cols:s,messages:r.concat([this.prepareMessage(`${e.command} successfully executed.${"select"!==e.command.toLowerCase()&&"number"==typeof e.rowCount?` ${e.rowCount} rows were affected.`:""}`)]),query:n[t],results:this.mapRows(e.rows,s)}})}).catch(t=>(n&&n.release(),[{connId:this.getId(),requestId:i,resultId:jN(),cols:[],messages:r.concat([this.prepareMessage([t&&t.message||t,t&&"scanner_yyerror"===t.routine&&t.position?"at character "+t.position:void 0].filter(Boolean).join(" "))]),error:!0,rawError:t,query:e,results:[]}]))}),FN(this,"completionsCache",null),FN(this,"getStaticCompletions",async()=>{if(this.completionsCache)return this.completionsCache;this.completionsCache={};return(await this.queryResults("SELECT UPPER(word) AS label, UPPER(catdesc) AS desc FROM pg_get_keywords();")).forEach(e=>{this.completionsCache[e.label]={label:e.label,detail:e.label,filterText:e.label,sortText:(["SELECT","CREATE","UPDATE","DELETE"].includes(e.label)?"2:":"")+e.label,documentation:{value:`\`\`\`yaml\nWORD: ${e.label}\nTYPE: ${e.desc}\n\`\`\``,kind:"markdown"}}}),this.completionsCache})}async open(){if(this.connection)return this.connection;try{const{ssl:e,...t}=this.credentials.pgOptions||{};let r={connectionTimeoutMillis:1e3*Number(""+(this.credentials.connectionTimeout||0)),...t};if(r=this.credentials.connectString?{connectionString:this.credentials.connectString,...r}:{database:this.credentials.database,host:this.credentials.server,password:this.credentials.password,port:this.credentials.port,user:this.credentials.username,...r},e)if("object"==typeof e){const t={...e};["ca","key","cert","pfx"].forEach(e=>{t[e]?(this.log.info("Reading file "+t[e].replace(/^file:\/\//,"")),t[e]=f.readFileSync(t[e].replace(/^file:\/\//,"")).toString()):delete t[e]}),Object.keys(t).length>0&&(r.ssl=t)}else r.ssl=e||!1;const n=new Zs.Pool(r);return(await n.connect()).release(),this.connection=Promise.resolve(n),this.connection}catch(e){return Promise.reject(e)}}async close(){if(!this.connection)return Promise.resolve();const e=await this.connection;this.connection=null,e.end()}getColumnNames(e){return e.reduce((e,{name:t})=>{const r=e.filter(e=>e===t).length;return e.concat(r>0?`${t} (${r})`:t)},[])}mapRows(e,t){return e.map(e=>BN(t,e))}async getColumns(e){return(await this.queryResults(this.queries.fetchColumns(e))).map(t=>({...t,iconName:t.isPk?"pk":t.isFk?"fk":null,childType:fo.ContextValue.NO_CHILD,table:e}))}async testConnection(){const e=await this.open(),t=await e.connect();await t.query("SELECT 1"),t.release()}async getChildrenForItem({item:e,parent:t}){switch(e.type){case fo.ContextValue.CONNECTION:case fo.ContextValue.CONNECTED_CONNECTION:return this.queryResults(this.queries.fetchDatabases());case fo.ContextValue.TABLE:case fo.ContextValue.VIEW:case fo.ContextValue.MATERIALIZED_VIEW:return this.getColumns(e);case fo.ContextValue.DATABASE:return[{label:"Schemas",type:fo.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:fo.ContextValue.SCHEMA}];case fo.ContextValue.RESOURCE_GROUP:return this.getChildrenForGroup({item:e,parent:t});case fo.ContextValue.SCHEMA:return[{label:"Tables",type:fo.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:fo.ContextValue.TABLE},{label:"Views",type:fo.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:fo.ContextValue.VIEW},{label:"Materialized Views",type:fo.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:fo.ContextValue.MATERIALIZED_VIEW},{label:"Functions",type:fo.ContextValue.RESOURCE_GROUP,iconId:"folder",childType:fo.ContextValue.FUNCTION}]}return[]}async getChildrenForGroup({parent:e,item:t}){switch(t.childType){case fo.ContextValue.SCHEMA:return this.queryResults(this.queries.fetchSchemas(e));case fo.ContextValue.TABLE:return this.queryResults(this.queries.fetchTables(e));case fo.ContextValue.VIEW:return this.queryResults(this.queries.fetchViews(e));case fo.ContextValue.MATERIALIZED_VIEW:return this.queryResults(this.queries.fetchMaterializedViews(e));case fo.ContextValue.FUNCTION:return this.queryResults(this.queries.fetchFunctions(e))}return[]}searchItems(e,t,r={}){switch(e){case fo.ContextValue.TABLE:return this.queryResults(this.queries.searchTables({search:t}));case fo.ContextValue.COLUMN:return this.queryResults(this.queries.searchColumns({search:t,...r}))}}}const HN=[{displayName:"PostgreSQL",value:"PostgreSQL"},{displayName:"AWS Redshift",value:"AWS Redshift"}],WN={register(e){HN.forEach(({value:t})=>{e.getContext().drivers.set(t,UN)})}};exports.default=WN;
//# sourceMappingURL=plugin.js.map
