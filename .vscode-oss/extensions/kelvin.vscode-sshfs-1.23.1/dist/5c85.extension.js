"use strict";exports.id="5c85",exports.ids=["5c85"],exports.modules={337:(e,t,n)=>{n.r(t),n.d(t,{open:()=>w,navigate:()=>v});var s=n(5747),i=n(5622),r=n(7549),o=n(8065),a=n(7785),c=n(9425),g=n(9104);const l=c.zW.scope("WebView");let u,d;async function w(){if(!u){const e=function(){const e=r.extensions.getExtension("Kelvin.vscode-sshfs");return e&&e.extensionPath}();u=r.window.createWebviewPanel("sshfs-settings","SSH-FS",r.ViewColumn.One,{enableFindWidget:!0,enableScripts:!0}),u.onDidDispose((()=>u=void 0)),e&&(u.iconPath=r.Uri.file(i.join(e,"resources/icon.svg")));const{webview:t}=u;t.onDidReceiveMessage(f);let o=await async function(){if(!c.eM)return!1;const e="http://localhost:3000/",t=await Promise.resolve().then(n.t.bind(n,8605,23));return(0,g.Vi)((n=>t.get(e,(async t=>{if(200!==t.statusCode)return n(new Error(`Error code ${t.statusCode} (${t.statusMessage}) connecting to React dev server}`));let s="";t.on("data",(e=>s+=e)),await(0,g.Vi)((e=>t.on("end",e))),s=s.toString().replace(/\/static\/js\/bundle\.js/,`${e}/static/js/bundle.js`),s=s.replace(/\$WEBVIEW_CSPSOURCE/g,`$WEBVIEW_CSPSOURCE ${e}`),s=s.replace(/\$WEBVIEW_CSPEXTRA/g,`connect-src ${e} ${e.replace("http://","ws://")};`),s=s.replace(/src="\/static\//g,`src="${e}/static/`),n(null,s)})).on("error",(e=>{l.warning(`Error connecting to React dev server: ${e}`),n(new Error("Could not connect to React dev server. Not running?"))}))))}().catch((e=>(r.window.showErrorMessage(e.message),null)));if(!o){if(!e)throw new Error("Could not get extensionPath");o=s.readFileSync(i.resolve(e,"webview/build/index.html")).toString(),o=o.replace(/\/static\//g,t.asWebviewUri(r.Uri.file(i.join(e,"webview/build/static/"))).toString())}o=o.replace(/\$WEBVIEW_CSPSOURCE/g,t.cspSource),o=o.replace(/\$WEBVIEW_CSPEXTRA/g,""),t.html=o}u.reveal()}async function v(e){return l.debug`Navigation requested: ${e}`,d=e,p({navigation:e,type:"navigate"}),w()}function p(e){null==u||u.webview.postMessage(e)}async function f(e){if(!u)return l.warning`Got message without webviewPanel: ${e}`;switch(l.debug`Got message: ${e}`,d&&(p({type:"navigate",navigation:d}),d=void 0),e.type){case"requestData":{const e=await(0,o.x3)();return p({configs:e,locations:(0,a.JC)(e),type:"responseData"})}case"saveConfig":{const{uniqueId:t,config:n,name:s,remove:i}=e;let r;try{i?await(0,o.vj)(n):await(0,o.rF)(n,s)}catch(t){l.error("Error handling saveConfig message for settings UI:",c.j7),l.error(JSON.stringify(e),c.j7),l.error(t),r=t.message}return p({uniqueId:t,config:n,error:r,type:"saveConfigResult"})}case"promptPath":{const{uniqueId:t}=e;let n,s;try{const e=await r.window.showOpenDialog({});e&&([n]=e)}catch(t){l.error`Error handling promptPath message for settings UI:\n${e}\n${t}`,s=t.message}return p({uniqueId:t,path:n&&n.fsPath,type:"promptPathResult"})}case"navigated":{const{view:t}=e;let n;switch(t){case"configeditor":n="SSH FS - Edit config";break;case"configlocator":n="SSH FS - Locate config";break;case"newconfig":n="SSH FS - New config"}u.title=n||"SSH FS"}}}}};
//# sourceMappingURL=5c85.extension.js.map